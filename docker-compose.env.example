# Docker Compose Environment Configuration
# Copy this file to docker-compose.env for local development
# These values are used by docker-compose.yml

# ==============================================================================
# CONTAINER CONFIGURATION
# ==============================================================================

# Container Names
COMPOSE_PROJECT_NAME=greenlang

# Container Resources
CONTAINER_MEMORY_LIMIT=2g
CONTAINER_CPU_LIMIT=2

# ==============================================================================
# DATABASE SERVICES
# ==============================================================================

# PostgreSQL
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=greenlang_db
POSTGRES_USER=greenlang_user
POSTGRES_PASSWORD=dev_password_change_me
POSTGRES_SSL_MODE=disable
POSTGRES_CONNECTION_POOL_SIZE=20
POSTGRES_MAX_OVERFLOW=10

# PostgreSQL Container Settings
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_MAINTENANCE_WORK_MEM=128MB
POSTGRES_CHECKPOINT_COMPLETION_TARGET=0.9
POSTGRES_WAL_BUFFERS=16MB
POSTGRES_DEFAULT_STATISTICS_TARGET=100
POSTGRES_RANDOM_PAGE_COST=1.1
POSTGRES_EFFECTIVE_IO_CONCURRENCY=200

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis_dev_password
REDIS_DB=0
REDIS_SSL=false
REDIS_CONNECTION_POOL_SIZE=50
REDIS_SOCKET_TIMEOUT=30
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# ==============================================================================
# MESSAGE QUEUE
# ==============================================================================

# RabbitMQ
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_USER=greenlang
RABBITMQ_PASSWORD=rabbitmq_dev_password
RABBITMQ_VHOST=/greenlang
RABBITMQ_DEFAULT_USER=greenlang
RABBITMQ_DEFAULT_PASS=rabbitmq_dev_password
RABBITMQ_DEFAULT_VHOST=/greenlang

# ==============================================================================
# MONITORING SERVICES
# ==============================================================================

# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics
PROMETHEUS_RETENTION_TIME=15d
PROMETHEUS_RETENTION_SIZE=10GB

# Grafana
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin_dev_password
GRAFANA_ANONYMOUS_ENABLED=false
GRAFANA_INSTALL_PLUGINS=grafana-piechart-panel,grafana-worldmap-panel

# Jaeger
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831
JAEGER_COLLECTOR_PORT=14268
JAEGER_UI_PORT=16686
JAEGER_SERVICE_NAME=greenlang-api
JAEGER_SAMPLING_RATE=0.1

# ==============================================================================
# APPLICATION SETTINGS
# ==============================================================================

# API Service
API_HOST=0.0.0.0
API_PORT=8000
APP_WORKERS=2
APP_THREADS_PER_WORKER=4
APP_MAX_REQUESTS=1000
APP_MAX_REQUESTS_JITTER=50

# Frontend Service
FRONTEND_PORT=3000
FRONTEND_HOST=0.0.0.0

# ==============================================================================
# DEVELOPMENT SETTINGS
# ==============================================================================

# Environment
ENVIRONMENT=development
DEBUG=true
TESTING=false
PROFILING=false

# Development Features
DEV_DB_SEED=true
DEV_DB_SAMPLE_DATA_SIZE=100
HOT_RELOAD=true
FORCE_COLOR=true

# ==============================================================================
# SECURITY (Development Defaults - DO NOT USE IN PRODUCTION)
# ==============================================================================

# JWT Configuration
JWT_SECRET_KEY=dev_secret_key_minimum_32_characters_for_testing_only
JWT_REFRESH_SECRET_KEY=dev_refresh_secret_key_minimum_32_characters
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ISSUER=greenlang.local
JWT_AUDIENCE=greenlang-api-local

# Encryption Keys (Development)
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
ENCRYPTION_SALT=0123456789abcdef0123456789abcdef
FIELD_ENCRYPTION_KEY=dev_field_encryption_key_32bytes
PROVENANCE_SIGNING_KEY=dev_provenance_signing_key_here

# API Security (Development - Relaxed)
API_RATE_LIMIT_PER_MINUTE=1000
API_KEY_HEADER_NAME=X-API-Key
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=*
CORS_ALLOWED_HEADERS=*

# Session Security (Development)
SESSION_SECRET_KEY=dev_session_secret_key_32_chars_minimum
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax

# ==============================================================================
# LOGGING
# ==============================================================================

LOG_LEVEL=DEBUG
LOG_FORMAT=plain
LOG_TO_STDOUT=true
LOG_INCLUDE_TIMESTAMP=true
LOG_INCLUDE_HOSTNAME=false
LOG_INCLUDE_PROCESS_ID=true
LOG_INCLUDE_THREAD_ID=false

# ==============================================================================
# FEATURE FLAGS (Development)
# ==============================================================================

# Core Features
FEATURE_ZERO_HALLUCINATION=true
FEATURE_PROVENANCE_TRACKING=true
FEATURE_ASYNC_PROCESSING=true
FEATURE_BATCH_PROCESSING=true
FEATURE_REAL_TIME_VALIDATION=true

# AI Features
FEATURE_LLM_CLASSIFICATION=false
FEATURE_LLM_NARRATIVE_GEN=false
FEATURE_SATELLITE_ML=false
FEATURE_ANOMALY_DETECTION=false

# Regulatory Features
FEATURE_CBAM_MODULE=true
FEATURE_CSRD_MODULE=true
FEATURE_SB253_MODULE=true
FEATURE_EUDR_MODULE=false
FEATURE_TAXONOMY_MODULE=true

# Integration Features
FEATURE_SAP_INTEGRATION=false
FEATURE_ORACLE_INTEGRATION=false
FEATURE_SALESFORCE_INTEGRATION=false
FEATURE_AZURE_IOT_INTEGRATION=false

# ==============================================================================
# VOLUMES & PERSISTENCE
# ==============================================================================

# Data Volumes
POSTGRES_DATA_VOLUME=./docker/volumes/postgres
REDIS_DATA_VOLUME=./docker/volumes/redis
RABBITMQ_DATA_VOLUME=./docker/volumes/rabbitmq
PROMETHEUS_DATA_VOLUME=./docker/volumes/prometheus
GRAFANA_DATA_VOLUME=./docker/volumes/grafana

# Log Volumes
LOG_VOLUME=./docker/volumes/logs

# ==============================================================================
# NETWORKING
# ==============================================================================

# Network Configuration
DOCKER_NETWORK=greenlang-network
DOCKER_NETWORK_DRIVER=bridge

# Service Discovery
SERVICE_DISCOVERY_ENABLED=true
DNS_RESOLVER=127.0.0.11

# ==============================================================================
# HEALTH CHECKS
# ==============================================================================

HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=40s

# Service Health Check Endpoints
API_HEALTH_CHECK_PATH=/health
FRONTEND_HEALTH_CHECK_PATH=/health
POSTGRES_HEALTH_CHECK_CMD=pg_isready -U greenlang_user
REDIS_HEALTH_CHECK_CMD=redis-cli ping
RABBITMQ_HEALTH_CHECK_CMD=rabbitmq-diagnostics -q ping

# ==============================================================================
# GREENLANG SPECIFIC (Development)
# ==============================================================================

GREENLANG_VERSION=dev
GREENLANG_TENANT_ID=local-dev
GREENLANG_WORKSPACE_ID=workspace-1
GREENLANG_DEFAULT_LANGUAGE=en
GREENLANG_DEFAULT_CURRENCY=USD
GREENLANG_DEFAULT_TIMEZONE=UTC
GREENLANG_REGION=US
GREENLANG_REPORT_FORMAT=json

# Agent Configuration
AGENT_TIMEOUT_SECONDS=300
AGENT_MAX_RETRIES=3
AGENT_RETRY_DELAY_SECONDS=5
AGENT_PARALLEL_EXECUTION=true

# Formula Engine
FORMULA_ENGINE_CACHE_SIZE=100
FORMULA_ENGINE_PRECISION=6
FORMULA_ENGINE_ROUNDING_MODE=half_up

# Emission Factors
EMISSION_FACTORS_SOURCE=EPA
EMISSION_FACTORS_VERSION=2024.1
EMISSION_FACTORS_UPDATE_FREQUENCY=daily

# Supply Chain
SUPPLY_CHAIN_TIERS=5
SUPPLY_CHAIN_DATA_QUALITY_THRESHOLD=75
SUPPLY_CHAIN_RISK_SCORING_ENABLED=true