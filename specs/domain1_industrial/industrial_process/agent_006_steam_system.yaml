# GreenLang Agent Specification v2.0
# Agent #6: SteamSystemAgent_AI
# Steam generation, distribution, and condensate return optimization for industrial facilities

agent_metadata:
  agent_id: "industrial/steam_system_agent"
  agent_name: "SteamSystemAgent_AI"
  agent_number: 6
  version: "1.0.0"
  domain: "Domain1_Industrial"
  category: "Industrial_Process"
  complexity: "Medium"
  priority: "P2_Medium"
  base_agent: "None"
  status: "Spec_Complete"
  entry_point: false

description:
  purpose: |
    Comprehensive steam system optimization agent for industrial facilities. Analyzes
    steam generation (boilers), distribution (piping, valves, traps), and condensate
    return systems to identify energy efficiency improvements and decarbonization
    opportunities. Provides detailed auditing, optimization recommendations, and
    implementation planning for steam system upgrades.

  strategic_context:
    global_impact: "Industrial steam systems consume 7% of global energy (12 EJ/year), representing $140B annual fuel cost"
    opportunity: "15-30% energy savings typical through steam system optimization (trap maintenance, insulation, condensate recovery)"
    market_size: "$35B steam system equipment market (boilers, traps, heat recovery)"
    technology_maturity: "Mature technologies with proven 2-5 year payback periods"

  key_capabilities:
    - "Boiler efficiency calculation using ASME PTC 4.1 method (combustion, stack losses)"
    - "Steam trap auditing and failure detection (15-30% traps fail per year without maintenance)"
    - "Condensate recovery system optimization (energy recovery + water savings)"
    - "Steam pressure optimization analysis (reducing pressure saves 1-2% per psi)"
    - "Insulation assessment and heat loss calculation (uninsulated surfaces lose 50-80% of heat)"

  dependencies:
    - agent_id: "agents/boiler_replacement_agent_ai"
      relationship: "coordinates_with"
      data: "Boiler replacement analysis for aging steam systems"

    - agent_id: "agents/waste_heat_recovery_agent_ai"
      relationship: "coordinates_with"
      data: "Waste heat recovery from blowdown and flash steam"

    - agent_id: "agents/maintenance_optimization_agent_ai"
      relationship: "provides_data_to"
      data: "Steam trap maintenance schedules and predictive maintenance"

tools:
  tool_count: 5

  tools_list:
    - tool_id: "tool_1"
      name: "calculate_boiler_efficiency"
      description: "Calculate steam boiler efficiency using ASME PTC 4.1 direct and indirect methods"
      category: "calculation"
      deterministic: true

      parameters:
        type: "object"
        properties:
          boiler_type:
            type: "string"
            description: "Type of boiler"
            enum: ["firetube", "watertube", "electric", "waste_heat_recovery"]
            required: true

          fuel_type:
            type: "string"
            description: "Primary fuel type"
            enum: ["natural_gas", "fuel_oil", "coal", "biomass", "electricity"]
            required: true

          rated_capacity_lb_hr:
            type: "number"
            description: "Nameplate steam capacity in lb/hr"
            units: "lb/hr"
            minimum: 1000
            required: true

          steam_pressure_psig:
            type: "number"
            description: "Steam pressure in psig"
            units: "psig"
            minimum: 0
            maximum: 1500
            required: true

          feedwater_temperature_f:
            type: "number"
            description: "Feedwater inlet temperature in °F"
            units: "°F"
            default: 180
            minimum: 60
            maximum: 250

          stack_temperature_f:
            type: "number"
            description: "Stack gas temperature in °F"
            units: "°F"
            required: true
            minimum: 200
            maximum: 800

          excess_air_percent:
            type: "number"
            description: "Excess air percentage (from O2 measurement)"
            units: "%"
            minimum: 0
            maximum: 100
            default: 15

          blowdown_percent:
            type: "number"
            description: "Blowdown rate as % of steam production"
            units: "%"
            minimum: 0
            maximum: 20
            default: 5

          ambient_temperature_f:
            type: "number"
            description: "Ambient air temperature"
            units: "°F"
            default: 70

        required: ["boiler_type", "fuel_type", "rated_capacity_lb_hr", "steam_pressure_psig", "stack_temperature_f"]

      returns:
        type: "object"
        properties:
          combustion_efficiency:
            type: "number"
            description: "Combustion efficiency (100% - stack losses)"
            units: "%"

          thermal_efficiency:
            type: "number"
            description: "Overall thermal efficiency (ASME PTC 4.1)"
            units: "%"

          stack_loss_percent:
            type: "number"
            description: "Heat loss through stack gases"
            units: "%"

          blowdown_loss_percent:
            type: "number"
            description: "Energy loss through blowdown"
            units: "%"

          radiation_loss_percent:
            type: "number"
            description: "Surface radiation and convection losses"
            units: "%"

          annual_fuel_consumption_mmbtu:
            type: "number"
            description: "Annual fuel consumption"
            units: "MMBtu/year"

          annual_fuel_cost_usd:
            type: "number"
            description: "Annual fuel cost"
            units: "USD/year"

          efficiency_rating:
            type: "string"
            description: "Efficiency classification"
            enum: ["Excellent (>85%)", "Good (80-85%)", "Fair (75-80%)", "Poor (<75%)"]

          improvement_opportunities:
            type: "array"
            items:
              type: "string"

        description: "Comprehensive boiler efficiency analysis"

      implementation:
        physics_formula: |
          Combustion Efficiency = 100% - Stack Loss
          Stack Loss = K × (T_stack - T_ambient) × (1 + excess_air_factor)
          Thermal Efficiency = (Steam Output - Feedwater Input - Blowdown Loss) / Fuel Input

          Where:
            K = 0.01 for natural gas (varies by fuel)
            excess_air_factor = f(O2%) from ASME tables

        calculation_method: "ASME PTC 4.1 - Standard test code for steam generating units"
        data_source: "User input + ASME steam tables + fuel property database"
        accuracy: "±1% for direct method, ±2% for indirect method"
        validation: "Cross-validate with manufacturer data and DOE Steam Tip sheets"
        standards: ["ASME_PTC_4.1", "DOE_Steam_Systems"]

      example:
        input:
          boiler_type: "firetube"
          fuel_type: "natural_gas"
          rated_capacity_lb_hr: 10000
          steam_pressure_psig: 100
          feedwater_temperature_f: 180
          stack_temperature_f: 350
          excess_air_percent: 15
          blowdown_percent: 5
          ambient_temperature_f: 70
        output:
          combustion_efficiency: 82.5
          thermal_efficiency: 78.3
          stack_loss_percent: 12.5
          blowdown_loss_percent: 3.2
          radiation_loss_percent: 1.0
          annual_fuel_consumption_mmbtu: 87600
          annual_fuel_cost_usd: 438000
          efficiency_rating: "Fair (75-80%)"
          improvement_opportunities:
            - "Reduce stack temperature to 300°F (save 2-3%)"
            - "Install economizer for feedwater preheating"
            - "Reduce excess air to 10% (save 1%)"

    - tool_id: "tool_2"
      name: "audit_steam_traps"
      description: "Audit steam trap population for failures, energy losses, and maintenance priorities"
      category: "analysis"
      deterministic: true

      parameters:
        type: "object"
        properties:
          total_trap_count:
            type: "number"
            description: "Total number of steam traps in facility"
            minimum: 1
            required: true

          trap_types:
            type: "array"
            description: "Array of trap types with counts"
            items:
              type: "object"
              properties:
                trap_type:
                  type: "string"
                  enum: ["thermostatic", "mechanical_float", "thermodynamic", "inverted_bucket"]
                count:
                  type: "number"
                steam_pressure_psig:
                  type: "number"
                orifice_size_inch:
                  type: "number"
            required: true

          last_inspection_months:
            type: "number"
            description: "Months since last comprehensive inspection"
            default: 24

          failure_rate_percent:
            type: "number"
            description: "Observed failure rate from ultrasonic testing"
            units: "%"
            minimum: 0
            maximum: 100
            default: 20
            note: "Industry average is 15-30% without regular maintenance"

          steam_cost_per_1000lb:
            type: "number"
            description: "Cost of steam per 1000 lb"
            units: "USD/1000lb"
            required: true

          operating_hours_per_year:
            type: "number"
            description: "Annual operating hours"
            default: 8760

        required: ["total_trap_count", "trap_types", "steam_cost_per_1000lb"]

      returns:
        type: "object"
        properties:
          failed_traps_estimate:
            type: "number"
            description: "Estimated number of failed traps"

          annual_steam_loss_lb:
            type: "number"
            description: "Annual steam loss through failed traps"
            units: "lb/year"

          annual_energy_loss_mmbtu:
            type: "number"
            description: "Annual energy loss"
            units: "MMBtu/year"

          annual_cost_loss_usd:
            type: "number"
            description: "Annual cost of steam losses"
            units: "USD/year"

          water_loss_gallons:
            type: "number"
            description: "Annual water loss (makeup water required)"
            units: "gallons/year"

          priority_traps:
            type: "array"
            description: "High-priority traps for immediate attention"
            items:
              trap_type: "string"
              estimated_failures: "number"
              loss_per_trap_usd_year: "number"

          maintenance_recommendation:
            type: "string"
            description: "Recommended inspection frequency"

          roi_trap_monitoring:
            type: "object"
            description: "ROI for continuous trap monitoring system"
            properties:
              monitoring_system_cost_usd: "number"
              annual_savings_usd: "number"
              payback_years: "number"

        description: "Comprehensive steam trap audit results"

      implementation:
        calculation_method: |
          Steam loss calculation per failed trap:
          Q_loss = C × A × P × sqrt(P) × h_fg × hours

          Where:
            C = Orifice discharge coefficient (0.65-0.85)
            A = Orifice area (in²)
            P = Steam pressure (psia)
            h_fg = Latent heat of vaporization (Btu/lb)
            hours = Operating hours per year

          Failed trap energy loss = steam flow × (h_steam - h_condensate)

        data_source: "ASME steam tables, DOE Steam Tip #3 (Check for Steam Leaks)"
        accuracy: "±10% for loss estimates (varies with trap condition)"
        validation: "Ultrasonic testing or temperature measurement for verification"
        standards: ["DOE_Steam_Tip_3", "ASHRAE_Handbook_Industrial"]

      example:
        input:
          total_trap_count: 500
          trap_types:
            - trap_type: "thermostatic"
              count: 200
              steam_pressure_psig: 100
              orifice_size_inch: 0.125
            - trap_type: "inverted_bucket"
              count: 300
              steam_pressure_psig: 150
              orifice_size_inch: 0.25
          last_inspection_months: 36
          failure_rate_percent: 25
          steam_cost_per_1000lb: 8.50
          operating_hours_per_year: 8400
        output:
          failed_traps_estimate: 125
          annual_steam_loss_lb: 4200000
          annual_energy_loss_mmbtu: 4830
          annual_cost_loss_usd: 35700
          water_loss_gallons: 504000
          priority_traps:
            - trap_type: "inverted_bucket"
              estimated_failures: 75
              loss_per_trap_usd_year: 380
          maintenance_recommendation: "Inspect all traps quarterly, prioritize high-pressure traps monthly"
          roi_trap_monitoring:
            monitoring_system_cost_usd: 50000
            annual_savings_usd: 32000
            payback_years: 1.6

    - tool_id: "tool_3"
      name: "calculate_condensate_recovery"
      description: "Assess condensate return system and calculate energy/water recovery opportunities"
      category: "calculation"
      deterministic: true

      parameters:
        type: "object"
        properties:
          steam_production_lb_hr:
            type: "number"
            description: "Total steam production rate"
            units: "lb/hr"
            required: true

          current_condensate_return_percent:
            type: "number"
            description: "Current condensate return percentage"
            units: "%"
            minimum: 0
            maximum: 100
            required: true

          condensate_temperature_f:
            type: "number"
            description: "Temperature of returned condensate"
            units: "°F"
            minimum: 100
            maximum: 300
            default: 180

          makeup_water_temperature_f:
            type: "number"
            description: "Temperature of makeup water"
            units: "°F"
            default: 60

          makeup_water_cost_per_1000gal:
            type: "number"
            description: "Cost of makeup water"
            units: "USD/1000gal"
            required: true

          water_treatment_cost_per_1000gal:
            type: "number"
            description: "Cost of water treatment chemicals"
            units: "USD/1000gal"
            default: 2.50

          fuel_cost_per_mmbtu:
            type: "number"
            description: "Cost of fuel for boiler"
            units: "USD/MMBtu"
            required: true

          boiler_efficiency:
            type: "number"
            description: "Boiler thermal efficiency"
            minimum: 0.5
            maximum: 0.95
            default: 0.80

          operating_hours_per_year:
            type: "number"
            description: "Annual operating hours"
            default: 8760

          target_condensate_return_percent:
            type: "number"
            description: "Target condensate return percentage"
            units: "%"
            minimum: 0
            maximum: 95
            default: 80
            note: "Best practice is 80-90% return"

        required: ["steam_production_lb_hr", "current_condensate_return_percent", "makeup_water_cost_per_1000gal", "fuel_cost_per_mmbtu"]

      returns:
        type: "object"
        properties:
          current_condensate_return_lb_hr:
            type: "number"
            description: "Current condensate return rate"
            units: "lb/hr"

          current_makeup_water_gpm:
            type: "number"
            description: "Current makeup water flow rate"
            units: "gpm"

          potential_condensate_recovery_lb_hr:
            type: "number"
            description: "Additional condensate recovery potential"
            units: "lb/hr"

          energy_savings_mmbtu_year:
            type: "number"
            description: "Annual energy savings from improved condensate return"
            units: "MMBtu/year"

          water_savings_gallons_year:
            type: "number"
            description: "Annual water savings"
            units: "gallons/year"

          annual_cost_savings_usd:
            type: "number"
            description: "Total annual cost savings (energy + water + treatment)"
            units: "USD/year"
            breakdown:
              energy_savings_usd: "number"
              water_savings_usd: "number"
              treatment_savings_usd: "number"

          implementation_cost_estimate_usd:
            type: "number"
            description: "Estimated cost for condensate return upgrades"
            units: "USD"
            note: "Piping, pumps, tanks, controls"

          payback_period_years:
            type: "number"
            description: "Simple payback period"
            units: "years"

          recommendations:
            type: "array"
            items:
              type: "string"

        description: "Condensate recovery system analysis and recommendations"

      implementation:
        physics_formula: |
          Energy in condensate = m × cp × (T_condensate - T_makeup)
          Energy savings = (target_return - current_return) × h_condensate × hours / efficiency

          Water savings = steam_production × (target% - current%) × hours × density_factor

          Where:
            h_condensate = enthalpy of condensate (Btu/lb)
            cp = specific heat of water (1 Btu/lb·°F)

        calculation_method: "ASME steam tables for enthalpy calculations, water balance analysis"
        data_source: "ASME steam tables, DOE Steam Tip #9 (Return Condensate to Boiler)"
        accuracy: "±2%"
        validation: "Condensate flow metering for verification"
        standards: ["DOE_Steam_Tip_9", "ASHRAE_Handbook_Industrial"]

      example:
        input:
          steam_production_lb_hr: 10000
          current_condensate_return_percent: 40
          condensate_temperature_f: 180
          makeup_water_temperature_f: 60
          makeup_water_cost_per_1000gal: 3.50
          water_treatment_cost_per_1000gal: 2.50
          fuel_cost_per_mmbtu: 5.00
          boiler_efficiency: 0.80
          operating_hours_per_year: 8400
          target_condensate_return_percent: 80
        output:
          current_condensate_return_lb_hr: 4000
          current_makeup_water_gpm: 12.0
          potential_condensate_recovery_lb_hr: 4000
          energy_savings_mmbtu_year: 4032
          water_savings_gallons_year: 4032000
          annual_cost_savings_usd: 44296
          implementation_cost_estimate_usd: 120000
          payback_period_years: 2.7
          recommendations:
            - "Install condensate return pumps for low-pressure returns"
            - "Add flash steam recovery system"
            - "Upgrade insulation on condensate return lines"
            - "Install condensate coolers for contaminated streams"

    - tool_id: "tool_4"
      name: "optimize_steam_pressure"
      description: "Analyze steam pressure optimization opportunities to reduce energy consumption"
      category: "optimization"
      deterministic: true

      parameters:
        type: "object"
        properties:
          current_pressure_psig:
            type: "number"
            description: "Current steam generation pressure"
            units: "psig"
            required: true
            minimum: 0
            maximum: 1500

          minimum_process_pressure_psig:
            type: "number"
            description: "Minimum pressure required by processes"
            units: "psig"
            required: true

          pressure_drop_distribution_psi:
            type: "number"
            description: "Pressure drop in distribution system"
            units: "psi"
            default: 10

          safety_margin_psi:
            type: "number"
            description: "Safety margin for pressure variations"
            units: "psi"
            default: 15

          steam_production_lb_hr:
            type: "number"
            description: "Steam production rate"
            units: "lb/hr"
            required: true

          boiler_efficiency:
            type: "number"
            description: "Boiler efficiency"
            default: 0.80

          fuel_cost_per_mmbtu:
            type: "number"
            description: "Fuel cost"
            units: "USD/MMBtu"
            required: true

          operating_hours_per_year:
            type: "number"
            description: "Annual operating hours"
            default: 8760

        required: ["current_pressure_psig", "minimum_process_pressure_psig", "steam_production_lb_hr", "fuel_cost_per_mmbtu"]

      returns:
        type: "object"
        properties:
          optimal_pressure_psig:
            type: "number"
            description: "Recommended optimal steam pressure"
            units: "psig"

          pressure_reduction_psi:
            type: "number"
            description: "Pressure reduction from current"
            units: "psi"

          energy_savings_percent:
            type: "number"
            description: "Percentage energy savings"
            units: "%"
            note: "Approximately 1-2% per 10 psi reduction"

          annual_energy_savings_mmbtu:
            type: "number"
            description: "Annual energy savings"
            units: "MMBtu/year"

          annual_cost_savings_usd:
            type: "number"
            description: "Annual cost savings"
            units: "USD/year"

          implementation_considerations:
            type: "array"
            items:
              type: "string"

          safety_analysis:
            type: "object"
            properties:
              adequate_pressure_margin: "boolean"
              pressure_reducing_valves_adequate: "boolean"
              process_verification_required: "boolean"

        description: "Steam pressure optimization analysis"

      implementation:
        physics_formula: |
          Energy to generate steam ∝ (h_steam_at_P - h_feedwater)

          Lower pressure steam requires less energy input because:
          1. Lower saturation temperature (less sensible heat)
          2. Slightly lower latent heat requirement

          Energy savings ≈ 1-2% per 10 psi reduction (empirical)

          Optimal pressure = max(process_min_pressure) + distribution_drop + safety_margin

        calculation_method: "ASME steam table lookups for enthalpy calculations, DOE guidance for savings estimation"
        data_source: "ASME steam tables, DOE Steam Tip #1 (Reduce Operating Pressure)"
        accuracy: "±5% for savings estimates"
        validation: "Pre/post implementation energy monitoring"
        standards: ["DOE_Steam_Tip_1", "ASME_Steam_Tables"]

      example:
        input:
          current_pressure_psig: 150
          minimum_process_pressure_psig: 80
          pressure_drop_distribution_psi: 10
          safety_margin_psi: 15
          steam_production_lb_hr: 10000
          boiler_efficiency: 0.80
          fuel_cost_per_mmbtu: 5.00
          operating_hours_per_year: 8400
        output:
          optimal_pressure_psig: 105
          pressure_reduction_psi: 45
          energy_savings_percent: 5.4
          annual_energy_savings_mmbtu: 5130
          annual_cost_savings_usd: 25650
          implementation_considerations:
            - "Verify all processes can operate at reduced pressure"
            - "Check pressure reducing valve (PRV) capacity"
            - "Retune boiler controls for lower setpoint"
            - "Monitor process quality during transition period"
          safety_analysis:
            adequate_pressure_margin: true
            pressure_reducing_valves_adequate: true
            process_verification_required: true

    - tool_id: "tool_5"
      name: "assess_insulation_losses"
      description: "Calculate heat losses from uninsulated or poorly insulated steam system components"
      category: "calculation"
      deterministic: true

      parameters:
        type: "object"
        properties:
          components:
            type: "array"
            description: "Array of steam system components"
            items:
              type: "object"
              properties:
                component_type:
                  type: "string"
                  enum: ["pipe", "valve", "flange", "expansion_joint", "pressure_reducing_valve", "steam_trap"]
                diameter_inches:
                  type: "number"
                length_feet:
                  type: "number"
                  note: "For pipes, or equivalent surface area for valves/flanges"
                steam_temperature_f:
                  type: "number"
                current_insulation:
                  type: "string"
                  enum: ["none", "poor_1inch", "good_2inch", "excellent_3inch"]
            required: true

          ambient_temperature_f:
            type: "number"
            description: "Ambient temperature"
            units: "°F"
            default: 70

          fuel_cost_per_mmbtu:
            type: "number"
            description: "Cost of fuel"
            units: "USD/MMBtu"
            required: true

          operating_hours_per_year:
            type: "number"
            description: "Annual operating hours"
            default: 8760

        required: ["components", "fuel_cost_per_mmbtu"]

      returns:
        type: "object"
        properties:
          total_heat_loss_btu_hr:
            type: "number"
            description: "Total heat loss from all components"
            units: "Btu/hr"

          annual_energy_loss_mmbtu:
            type: "number"
            description: "Annual energy loss"
            units: "MMBtu/year"

          annual_cost_loss_usd:
            type: "number"
            description: "Annual cost of heat losses"
            units: "USD/year"

          component_breakdown:
            type: "array"
            description: "Heat loss by component"
            items:
              component_id: "string"
              heat_loss_btu_hr: "number"
              annual_cost_usd: "number"
              improvement_recommendation: "string"

          insulation_upgrade_investment_usd:
            type: "number"
            description: "Estimated cost to upgrade all insulation"
            units: "USD"

          annual_savings_with_upgrades_usd:
            type: "number"
            description: "Annual savings from insulation upgrades"
            units: "USD/year"

          payback_period_years:
            type: "number"
            description: "Simple payback for insulation investment"
            units: "years"

          priority_components:
            type: "array"
            description: "Highest priority components for insulation (lowest payback)"
            items:
              component_id: "string"
              current_annual_loss_usd: "number"
              upgrade_cost_usd: "number"
              payback_months: "number"

        description: "Comprehensive insulation assessment and recommendations"

      implementation:
        physics_formula: |
          Heat loss from bare pipe:
          Q = A × U × (T_surface - T_ambient)

          Where:
            A = Surface area = π × D × L (ft²)
            U = Overall heat transfer coefficient (Btu/hr·ft²·°F)
            U_bare ≈ 2.0 Btu/hr·ft²·°F (natural convection + radiation)
            U_1inch_insulation ≈ 0.3 Btu/hr·ft²·°F
            U_2inch_insulation ≈ 0.15 Btu/hr·ft²·°F

          Valves and flanges modeled as equivalent pipe length (typically 3-5× diameter)

        calculation_method: "Heat transfer calculations per ASHRAE Fundamentals, 3E Plus software methodology"
        data_source: "ASHRAE Fundamentals Chapter 24 (Insulation), DOE Steam Tip #8 (Install Removable Insulation)"
        accuracy: "±10%"
        validation: "Infrared thermography for surface temperature verification"
        standards: ["DOE_Steam_Tip_8", "ASHRAE_Fundamentals_Ch24", "ASTM_C680"]

      example:
        input:
          components:
            - component_type: "pipe"
              diameter_inches: 4
              length_feet: 500
              steam_temperature_f: 350
              current_insulation: "poor_1inch"
            - component_type: "valve"
              diameter_inches: 4
              length_feet: 5
              steam_temperature_f: 350
              current_insulation: "none"
            - component_type: "flange"
              diameter_inches: 4
              length_feet: 2
              steam_temperature_f: 350
              current_insulation: "none"
          ambient_temperature_f: 70
          fuel_cost_per_mmbtu: 5.00
          operating_hours_per_year: 8760
        output:
          total_heat_loss_btu_hr: 98400
          annual_energy_loss_mmbtu: 862
          annual_cost_loss_usd: 4310
          component_breakdown:
            - component_id: "4inch_pipe_500ft"
              heat_loss_btu_hr: 78000
              annual_cost_usd: 3419
              improvement_recommendation: "Upgrade to 2-inch insulation (save 60%)"
            - component_id: "4inch_valve"
              heat_loss_btu_hr: 12400
              annual_cost_usd: 544
              improvement_recommendation: "Install removable insulation blanket"
          insulation_upgrade_investment_usd: 8500
          annual_savings_with_upgrades_usd: 3450
          payback_period_years: 2.5
          priority_components:
            - component_id: "4inch_valve"
              current_annual_loss_usd: 544
              upgrade_cost_usd: 250
              payback_months: 5.5

ai_integration:
  temperature: 0.0
  seed: 42
  tool_choice: "auto"
  max_iterations: 5
  budget_usd: 0.10
  provenance_tracking: true
  ai_summary: true

  system_prompt: |
    You are a steam system optimization expert for GreenLang. You help industrial
    facilities identify energy efficiency improvements in steam generation,
    distribution, and condensate return systems.

    Your expertise includes:
    - Boiler efficiency analysis and optimization (ASME PTC 4.1 methods)
    - Steam trap auditing and maintenance planning
    - Condensate recovery system design and optimization
    - Steam pressure reduction analysis
    - Insulation assessment and heat loss prevention

    CRITICAL RULES:
    - Use provided tools for ALL calculations
    - NEVER estimate or guess numbers
    - Always cite DOE Steam Tips and ASHRAE standards
    - Provide conservative savings estimates (under-promise, over-deliver)
    - Prioritize recommendations by payback period (quick wins first)
    - Consider safety implications for all pressure/temperature changes

  user_prompt_template: |
    Analyze steam system efficiency and identify optimization opportunities:

    Facility Profile:
    - Industry: {industry_type}
    - Steam Generation Capacity: {steam_capacity_lb_hr} lb/hr
    - Operating Pressure: {steam_pressure_psig} psig
    - Boiler Type: {boiler_type}
    - Fuel Type: {fuel_type}
    - Operating Hours: {hours_per_day} hours/day, {days_per_week} days/week

    System Details:
    - Number of Steam Traps: {trap_count}
    - Current Condensate Return: {condensate_return_percent}%
    - Stack Temperature: {stack_temp_f}°F
    - Excess Air: {excess_air_percent}%
    - Last Trap Inspection: {months_since_inspection} months ago

    Costs:
    - Fuel Cost: ${fuel_cost_per_mmbtu}/MMBtu
    - Steam Cost: ${steam_cost_per_1000lb}/1000 lb
    - Makeup Water Cost: ${water_cost_per_1000gal}/1000 gal

    Tasks:
    1. Use calculate_boiler_efficiency to assess boiler performance
    2. Use audit_steam_traps to quantify trap losses
    3. Use calculate_condensate_recovery to identify water/energy recovery opportunities
    4. Use optimize_steam_pressure to assess pressure reduction potential
    5. Use assess_insulation_losses to identify heat loss prevention opportunities
    6. Provide comprehensive report with:
       - Current system efficiency rating
       - Prioritized list of improvements (by payback)
       - Total savings potential (energy, cost, water)
       - Implementation roadmap (Phase 1: quick wins, Phase 2: capital projects)
       - ROI analysis for each recommendation

    IMPORTANT:
    - Use tools for ALL calculations
    - Provide clear, actionable insights
    - Format numbers with proper units and thousands separators
    - Include conservative safety factors

sub_agents:
  sub_agent_count: 0

inputs:
  input_schema:
    type: "object"
    properties:
      industry_type:
        type: "string"
        description: "Industry sector"
        required: true

      steam_capacity_lb_hr:
        type: "number"
        description: "Steam generation capacity"
        units: "lb/hr"
        required: true

      steam_pressure_psig:
        type: "number"
        description: "Operating steam pressure"
        units: "psig"
        required: true

      boiler_type:
        type: "string"
        enum: ["firetube", "watertube", "electric", "waste_heat_recovery"]
        required: true

      fuel_type:
        type: "string"
        enum: ["natural_gas", "fuel_oil", "coal", "biomass", "electricity"]
        required: true

      stack_temp_f:
        type: "number"
        description: "Stack gas temperature"
        units: "°F"
        required: true

      trap_count:
        type: "number"
        description: "Number of steam traps"
        required: true

      condensate_return_percent:
        type: "number"
        description: "Current condensate return percentage"
        units: "%"
        required: true

      fuel_cost_per_mmbtu:
        type: "number"
        description: "Fuel cost"
        units: "USD/MMBtu"
        required: true

    required: ["industry_type", "steam_capacity_lb_hr", "steam_pressure_psig", "boiler_type", "fuel_type", "stack_temp_f", "trap_count", "condensate_return_percent", "fuel_cost_per_mmbtu"]

  example_input:
    industry_type: "Food & Beverage"
    steam_capacity_lb_hr: 10000
    steam_pressure_psig: 150
    boiler_type: "firetube"
    fuel_type: "natural_gas"
    stack_temp_f: 350
    trap_count: 500
    condensate_return_percent: 40
    fuel_cost_per_mmbtu: 5.00
    steam_cost_per_1000lb: 8.50
    water_cost_per_1000gal: 3.50

outputs:
  output_schema:
    type: "object"
    properties:
      boiler_efficiency_percent:
        type: "number"
        units: "%"

      annual_fuel_consumption_mmbtu:
        type: "number"
        units: "MMBtu/year"

      total_savings_potential_usd:
        type: "number"
        units: "USD/year"
        breakdown:
          boiler_optimization: "number"
          trap_maintenance: "number"
          condensate_recovery: "number"
          pressure_optimization: "number"
          insulation_upgrades: "number"

      recommendations:
        type: "array"
        items:
          recommendation: "string"
          annual_savings_usd: "number"
          implementation_cost_usd: "number"
          payback_years: "number"
          priority: "string"

      implementation_roadmap:
        type: "object"
        properties:
          phase_1_quick_wins:
            items: "array"
          phase_2_capital_projects:
            items: "array"

      ai_explanation:
        type: "string"

      provenance:
        type: "object"
        properties:
          model: "string"
          tools_used: "array"
          cost_usd: "number"
          deterministic: "boolean"

  example_output:
    boiler_efficiency_percent: 78.3
    annual_fuel_consumption_mmbtu: 87600
    total_savings_potential_usd: 130000
    recommendations:
      - recommendation: "Steam trap maintenance program"
        annual_savings_usd: 32000
        implementation_cost_usd: 25000
        payback_years: 0.8
        priority: "High"
      - recommendation: "Condensate recovery system upgrade"
        annual_savings_usd: 44000
        implementation_cost_usd: 120000
        payback_years: 2.7
        priority: "Medium"
    ai_explanation: "Comprehensive steam system analysis with prioritized recommendations"
    provenance:
      model: "gpt-4o"
      tools_used: ["calculate_boiler_efficiency", "audit_steam_traps", "calculate_condensate_recovery", "optimize_steam_pressure", "assess_insulation_losses"]
      cost_usd: 0.09
      deterministic: true

testing:
  test_coverage_target: 0.85

  test_categories:
    - category: "unit_tests"
      description: "Test individual tool implementations"
      count: 20

    - category: "integration_tests"
      description: "Test AI orchestration with tools"
      count: 6

    - category: "determinism_tests"
      description: "Verify temperature=0, seed=42 reproducibility"
      count: 3

    - category: "boundary_tests"
      description: "Test edge cases (low pressure, high losses, etc.)"
      count: 5

    - category: "performance_tests"
      description: "Verify latency and cost targets"
      count: 3

  performance_requirements:
    max_latency_ms: 3000
    max_cost_usd: 0.10
    accuracy_target: 0.90

deployment:
  pack_id: "industrial/steam_system_pack"
  pack_version: "1.0.0"

  dependencies:
    python_packages:
      - "pydantic>=2.0"
      - "numpy>=1.24"
      - "scipy>=1.11"

    greenlang_modules:
      - "greenlang.agents.base"
      - "greenlang.intelligence"

  resource_requirements:
    memory_mb: 512
    cpu_cores: 1
    gpu_required: false

  api_endpoints:
    - endpoint: "/api/v1/agents/industrial/steam_system/execute"
      method: "POST"
      authentication: "required"

documentation:
  readme: true
  api_docs: true
  examples: true
  tutorials: true

  example_use_cases:
    - title: "Food Processing Plant Steam System Audit"
      description: "Comprehensive steam system analysis for 10,000 lb/hr food plant"
      input_example:
        industry_type: "Food & Beverage"
        steam_capacity_lb_hr: 10000
        steam_pressure_psig: 150
        boiler_type: "firetube"
        fuel_type: "natural_gas"
      output_summary: "$130,000/year savings potential identified, 2.1 year average payback"

    - title: "Chemical Plant Steam Pressure Optimization"
      description: "Reduce steam generation pressure to save energy"
      input_example:
        steam_pressure_psig: 200
        minimum_process_pressure_psig: 100
      output_summary: "50 psi reduction saves $35,000/year with immediate payback"

    - title: "Pharmaceutical Steam Trap Audit"
      description: "Identify failed steam traps and quantify losses"
      input_example:
        trap_count: 800
        failure_rate_percent: 30
      output_summary: "240 failed traps costing $72,000/year, 1.2 year payback for monitoring system"

compliance:
  zero_secrets: true
  sbom_required: true
  digital_signature: true

  standards:
    - "ASME_PTC_4.1_Steam_Generating_Units"
    - "DOE_Industrial_Technologies_Program_Steam"
    - "ASHRAE_Handbook_Industrial"
    - "ASTM_C680_Insulation"

  certifications:
    - "LEED_EA_Optimize_Energy_Performance"
    - "ISO_50001_EnMS"

business_impact:
  market_opportunity:
    addressable_market_usd: 35000000000
    market_segment: "Industrial facilities with steam systems (70% of industrial facilities)"
    target_customers: "Food/beverage, chemicals, pharmaceuticals, pulp/paper"

  carbon_impact:
    addressable_emissions_gt_co2e: 1.2
    realistic_reduction_2030_gt: 0.24
    note: "20% improvement in steam system efficiency across addressable market"

  economic_value:
    typical_savings_percent: "15-30%"
    typical_payback_years: "2-5"
    irr_range: "20-50%"

metadata:
  created_date: "2025-10-13"
  created_by: "Head of AI & Climate Intelligence"
  last_modified: "2025-10-13"
  review_status: "Approved"
  reviewers: ["AI Lead"]

  change_log:
    - version: "1.0.0"
      date: "2025-10-13"
      changes: "Initial specification - production ready for Agent Factory generation"
      author: "Chief AI & Climate Intelligence"

# END OF AGENT #6 SPECIFICATION
# Production Ready for Agent Factory Generation
# Next: Agent #7 - ThermalStorageAgent_AI
