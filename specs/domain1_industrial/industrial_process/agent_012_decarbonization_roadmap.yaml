# GreenLang Agent Specification v2.0
# Agent #12: DecarbonizationRoadmapAgent_AI ⭐ P0_CRITICAL ⭐
# MASTER PLANNING AGENT: Comprehensive multi-year decarbonization strategy and roadmap development

agent_metadata:
  agent_id: "industrial/decarbonization_roadmap_agent"
  agent_name: "DecarbonizationRoadmapAgent_AI"
  agent_number: 12
  version: "1.0.0"
  domain: "Domain1_Industrial"
  category: "Industrial_Process"
  complexity: "High"
  priority: "P0_Critical"  # ⭐ MASTER PLANNING AGENT ⭐
  base_agent: "None"
  status: "Spec_Complete"
  entry_point: true  # ⭐ MASTER COORDINATOR for all Industrial Process agents ⭐

description:
  purpose: |
    ⭐ MASTER PLANNING AGENT ⭐

    Comprehensive decarbonization strategy and roadmap development agent that integrates
    insights from all 11 other Industrial Process agents to create detailed, multi-year
    net-zero pathways. Provides GHG inventory (Scope 1, 2, 3), scenario modeling with
    technology options, phased implementation planning, carbon pricing analysis, investment
    optimization, progress tracking, and stakeholder reporting.

    This is the STRATEGIC PLANNING HUB that coordinates:
    - Process Heat, Boilers, Heat Pumps, WHR, CHP (Agents 1-5)
    - Steam, Storage, Scheduling, Controls, Maintenance (Agents 6-10)
    - Energy Benchmarking (Agent 11)

    Delivers comprehensive roadmaps to achieve net-zero by 2040-2050 with optimized
    technology deployment, financial planning, and stakeholder engagement strategies.

  strategic_context:
    global_impact: "Industrial sector: 24% of global GHG emissions (9.3 Gt CO2e/year), net-zero by 2050 requires 5% annual reduction"
    opportunity: "Comprehensive planning increases decarbonization success rate 3× vs ad-hoc approaches"
    market_size: "$120B corporate decarbonization strategy and ESG advisory market (20% CAGR)"
    technology_maturity: "GHG Protocol mature, SBTi guidance expanding, integrated planning tools emerging"

  key_capabilities:
    - "Comprehensive GHG inventory: Scope 1 (direct), Scope 2 (electricity), Scope 3 (value chain) per GHG Protocol"
    - "Multi-scenario modeling with technology portfolios and MACC (Marginal Abatement Cost Curve)"
    - "Technology roadmap with phased deployment (2025, 2030, 2040, 2050 milestones)"
    - "Internal carbon pricing and financial optimization (NPV, IRR, risk-adjusted returns)"
    - "Implementation planning with governance, change management, and resource allocation"
    - "Progress tracking with KPIs and variance analysis (PDCA cycle)"
    - "Investment portfolio optimization across projects"
    - "Stakeholder reporting (TCFD, CDP, GRI, SASB frameworks)"
    - "Integration with all 11 Industrial Process agents for coordinated strategy"
    - "Science-based targets (SBTi) alignment and validation"
    - "Supply chain decarbonization strategies"
    - "Policy and regulatory scenario analysis"

  dependencies:
    # INTEGRATES ALL 11 OTHER INDUSTRIAL PROCESS AGENTS
    - agent_id: "industrial/process_heat_agent"
      relationship: "receives_data_from"
      data: "Process heat decarbonization opportunities and costs"

    - agent_id: "industrial/boiler_replacement_agent"
      relationship: "receives_data_from"
      data: "Boiler electrification and fuel switching options"

    - agent_id: "industrial/heat_pump_agent"
      relationship: "receives_data_from"
      data: "Industrial heat pump deployment potential"

    - agent_id: "industrial/waste_heat_recovery_agent"
      relationship: "receives_data_from"
      data: "WHR opportunities and emission reductions"

    - agent_id: "industrial/cogeneration_chp_agent"
      relationship: "receives_data_from"
      data: "CHP system carbon impact and economics"

    - agent_id: "industrial/steam_system_agent"
      relationship: "receives_data_from"
      data: "Steam system efficiency improvements"

    - agent_id: "industrial/thermal_storage_agent"
      relationship: "receives_data_from"
      data: "Storage for load shifting and renewable integration"

    - agent_id: "industrial/process_scheduling_agent"
      relationship: "receives_data_from"
      data: "Production scheduling for carbon optimization"

    - agent_id: "industrial/controls_agent"
      relationship: "receives_data_from"
      data: "Control optimization emission reductions"

    - agent_id: "industrial/maintenance_agent"
      relationship: "receives_data_from"
      data: "Maintenance-related efficiency and emissions"

    - agent_id: "industrial/benchmarking_agent"
      relationship: "receives_data_from"
      data: "Baseline performance and peer comparison"

    - agent_id: "agents/grid_factor_agent_ai"
      relationship: "receives_data_from"
      data: "Grid decarbonization trajectories"

    - agent_id: "agents/project_finance_agent_ai"
      relationship: "coordinates_with"
      data: "Complex financial structuring"

    - agent_id: "agents/regulatory_compliance_agent_ai"
      relationship: "coordinates_with"
      data: "Regulatory requirements and compliance"

tools:
  tool_count: 8  # ⭐ MOST COMPREHENSIVE AGENT ⭐

  tools_list:
    - tool_id: "tool_1"
      name: "create_baseline_inventory"
      description: "Create comprehensive GHG inventory for Scope 1, 2, and 3 emissions per GHG Protocol"
      category: "calculation"
      deterministic: true

      parameters:
        type: "object"
        properties:
          organization_name:
            type: "string"
            required: true

          inventory_year:
            type: "number"
            description: "Base year for inventory"
            required: true

          organizational_boundary:
            type: "string"
            enum: ["operational_control", "financial_control", "equity_share"]
            required: true

          scope1_sources:
            type: "object"
            description: "Direct GHG emissions"
            properties:
              stationary_combustion:
                type: "array"
                items:
                  type: "object"
                  properties:
                    fuel_type:
                      type: "string"
                    fuel_quantity:
                      type: "number"
                    fuel_units:
                      type: "string"
              mobile_combustion:
                type: "array"
                items:
                  type: "object"
              process_emissions:
                type: "array"
                items:
                  type: "object"
              fugitive_emissions:
                type: "array"
                items:
                  type: "object"
            required: true

          scope2_sources:
            type: "object"
            description: "Indirect emissions from purchased electricity"
            properties:
              purchased_electricity_kwh:
                type: "number"
              grid_region:
                type: "string"
              renewable_electricity_kwh:
                type: "number"
                default: 0
              purchased_steam_mmbtu:
                type: "number"
                default: 0
              purchased_heating_mmbtu:
                type: "number"
                default: 0
              purchased_cooling_mmbtu:
                type: "number"
                default: 0
            required: true

          scope3_categories:
            type: "object"
            description: "Value chain emissions (15 GHG Protocol categories)"
            properties:
              category1_purchased_goods:
                type: "number"
                description: "Purchased goods and services"
              category2_capital_goods:
                type: "number"
              category3_fuel_energy:
                type: "number"
                description: "Fuel and energy not in Scope 1/2"
              category4_upstream_transport:
                type: "number"
              category5_waste:
                type: "number"
              category6_business_travel:
                type: "number"
              category7_employee_commute:
                type: "number"
              category8_upstream_leased:
                type: "number"
              category9_downstream_transport:
                type: "number"
              category10_processing:
                type: "number"
              category11_use_of_products:
                type: "number"
              category12_end_of_life:
                type: "number"
              category13_downstream_leased:
                type: "number"
              category14_franchises:
                type: "number"
              category15_investments:
                type: "number"

          emission_factors_source:
            type: "string"
            enum: ["epa_ghg_protocol", "ipcc", "defra", "custom"]
            default: "epa_ghg_protocol"

        required: ["organization_name", "inventory_year", "organizational_boundary", "scope1_sources", "scope2_sources"]

      returns:
        type: "object"
        properties:
          scope1_emissions:
            type: "object"
            properties:
              total_mt_co2e:
                type: "number"
                units: "metric tons CO2e"
              by_source:
                type: "array"
                items:
                  type: "object"
                  properties:
                    source:
                      type: "string"
                    mt_co2e:
                      type: "number"
                    percent_of_scope1:
                      type: "number"
              by_gas:
                type: "object"
                properties:
                  co2:
                    type: "number"
                  ch4:
                    type: "number"
                  n2o:
                    type: "number"
                  hfcs:
                    type: "number"
                  pfcs:
                    type: "number"
                  sf6:
                    type: "number"

          scope2_emissions:
            type: "object"
            properties:
              location_based_mt_co2e:
                type: "number"
              market_based_mt_co2e:
                type: "number"
              by_source:
                type: "array"

          scope3_emissions:
            type: "object"
            properties:
              total_mt_co2e:
                type: "number"
              by_category:
                type: "array"
                items:
                  type: "object"
                  properties:
                    category:
                      type: "string"
                    mt_co2e:
                      type: "number"
                    percent_of_scope3:
                      type: "number"
                    data_quality:
                      type: "string"
                      enum: ["high", "medium", "low"]
              material_categories:
                type: "array"
                description: "Scope 3 categories > 5% of total"

          total_emissions:
            type: "object"
            properties:
              scopes_123_mt_co2e:
                type: "number"
              scope1_percent:
                type: "number"
              scope2_percent:
                type: "number"
              scope3_percent:
                type: "number"

          emissions_intensity:
            type: "object"
            properties:
              per_revenue_mt_co2e_per_million_usd:
                type: "number"
              per_employee_mt_co2e:
                type: "number"
              per_production_unit:
                type: "number"

          data_quality_assessment:
            type: "object"
            properties:
              scope1_quality:
                type: "string"
              scope2_quality:
                type: "string"
              scope3_quality:
                type: "string"
              overall_quality:
                type: "string"
              data_gaps:
                type: "array"

          ghg_protocol_compliance:
            type: "boolean"

          recommendations:
            type: "array"
            items:
              type: "string"

      implementation:
        calculation_method: |
          GHG Inventory Calculation (GHG Protocol):

          1. Scope 1 (Direct Emissions):
             For each fuel:
               Emissions = Fuel_Quantity × Emission_Factor × GWP

             Stationary Combustion:
               Natural Gas: kg CO2e = MMBtu × 53.06
               Fuel Oil: kg CO2e = gallon × 10.21
               Coal: kg CO2e = short ton × 2,325.71

             Process Emissions:
               Cement: CO2 from calcination (CaCO3 → CaO + CO2)
               Chemicals: Process-specific factors

             Fugitive Emissions:
               Refrigerants: mass × GWP (e.g., R-410A: GWP 2,088)

          2. Scope 2 (Indirect - Purchased Energy):
             Location-based:
               Emissions = Electricity_kWh × Grid_Emission_Factor

             Market-based:
               Emissions = (Electricity_kWh - Renewable_kWh) × Residual_Mix_Factor

          3. Scope 3 (Value Chain):
             Category-specific methodologies:
             - Purchased goods: Spend-based or supplier-specific
             - Transport: Distance-based or fuel-based
             - Use of products: Product lifetime emissions

          4. Total Inventory:
             Total = Scope1 + Scope2 + Scope3

          5. Emission Factors:
             - EPA Center for Corporate Climate Leadership
             - IPCC 2006 Guidelines
             - DEFRA UK Government GHG factors
             - ecoinvent database

          6. GWP Values (100-year horizon):
             CO2: 1, CH4: 25, N2O: 298, HFC-134a: 1,430, SF6: 22,800
        data_source: "Utility bills, fuel purchase records, production data, spend data, EPA/IPCC emission factors"
        accuracy: "Scope 1: ±5%, Scope 2: ±3%, Scope 3: ±20-50% (varies by category)"
        validation: "Third-party verification per ISO 14064-3 recommended"
        standards: ["GHG_Protocol_Corporate_Standard", "ISO_14064-1_GHG_Quantification", "ISO_14067_Carbon_Footprint", "TCFD_Metrics"]

      example:
        input:
          organization_name: "Acme Manufacturing Corp"
          inventory_year: 2024
          organizational_boundary: "operational_control"
          scope1_sources:
            stationary_combustion:
              - fuel_type: "natural_gas"
                fuel_quantity: 185000
                fuel_units: "MMBtu"
              - fuel_type: "propane"
                fuel_quantity: 12000
                fuel_units: "gallons"
          scope2_sources:
            purchased_electricity_kwh: 12500000
            grid_region: "MROW"
            renewable_electricity_kwh: 0
          emission_factors_source: "epa_ghg_protocol"
        output:
          scope1_emissions:
            total_mt_co2e: 10125
            by_source:
              - source: "Natural gas combustion"
                mt_co2e: 9817
                percent_of_scope1: 96.9
              - source: "Propane combustion"
                mt_co2e: 308
                percent_of_scope1: 3.1
            by_gas:
              co2: 9980
              ch4: 98
              n2o: 47
          scope2_emissions:
            location_based_mt_co2e: 6375
            market_based_mt_co2e: 6375
            by_source:
              - source: "Purchased electricity"
                mt_co2e: 6375
                percent_of_scope2: 100
          scope3_emissions:
            total_mt_co2e: 45200
            by_category:
              - category: "Category 1: Purchased goods & services"
                mt_co2e: 28000
                percent_of_scope3: 62
                data_quality: "medium"
              - category: "Category 4: Upstream transportation"
                mt_co2e: 8500
                percent_of_scope3: 19
                data_quality: "medium"
              - category: "Category 11: Use of products"
                mt_co2e: 7200
                percent_of_scope3: 16
                data_quality: "low"
            material_categories: ["Category 1: Purchased goods", "Category 4: Transportation", "Category 11: Use phase"]
          total_emissions:
            scopes_123_mt_co2e: 61700
            scope1_percent: 16.4
            scope2_percent: 10.3
            scope3_percent: 73.3
          emissions_intensity:
            per_revenue_mt_co2e_per_million_usd: 411
            per_employee_mt_co2e: 247
            per_production_unit: 0.0247
          data_quality_assessment:
            scope1_quality: "high"
            scope2_quality: "high"
            scope3_quality: "medium"
            overall_quality: "medium"
            data_gaps: ["Scope 3 Category 11 uses industry average, need product-specific LCA", "Supplier-specific emission factors needed for key suppliers"]
          ghg_protocol_compliance: true
          recommendations: ["Focus decarbonization on Scope 3 (73% of total)", "Engage top 10 suppliers (represent 60% of Scope 3 Cat 1)", "Conduct product LCA for use-phase emissions (Cat 11)", "Set Scope 1+2 target for 2030 (within direct control)", "Set supplier engagement target for Scope 3"]

    - tool_id: "tool_2"
      name: "model_scenarios"
      description: "Model multiple decarbonization scenarios with technology options and create MACC (Marginal Abatement Cost Curve)"
      category: "optimization"
      deterministic: true

      parameters:
        type: "object"
        properties:
          baseline_emissions:
            type: "object"
            description: "Baseline GHG inventory"
            properties:
              scope1_mt_co2e:
                type: "number"
              scope2_mt_co2e:
                type: "number"
              scope3_mt_co2e:
                type: "number"
              total_mt_co2e:
                type: "number"
            required: true

          target_emissions:
            type: "object"
            description: "Target emissions by year"
            properties:
              target_2030_percent_reduction:
                type: "number"
              target_2040_percent_reduction:
                type: "number"
              target_2050_percent_reduction:
                type: "number"
                default: 90
            required: true

          technology_options:
            type: "array"
            description: "Available decarbonization technologies"
            items:
              type: "object"
              properties:
                technology_id:
                  type: "string"
                technology_name:
                  type: "string"
                applicable_scope:
                  type: "array"
                  items:
                    type: "string"
                    enum: ["scope1", "scope2", "scope3"]
                emission_reduction_mt_co2e:
                  type: "number"
                  description: "Annual reduction potential"
                capex_usd:
                  type: "number"
                annual_opex_change_usd:
                  type: "number"
                  description: "Negative = savings"
                implementation_time_years:
                  type: "number"
                technology_readiness_level:
                  type: "number"
                  description: "TRL 1-9 (NASA scale)"
                  minimum: 1
                  maximum: 9
                deployment_constraints:
                  type: "string"
            required: true

          scenario_definitions:
            type: "array"
            description: "Scenarios to model"
            items:
              type: "object"
              properties:
                scenario_name:
                  type: "string"
                description:
                  type: "string"
                technology_mix:
                  type: "array"
                  description: "Technologies included in scenario"
                  items:
                    type: "string"
                grid_decarbonization_assumption:
                  type: "string"
                  enum: ["conservative", "moderate", "aggressive"]
                carbon_price_trajectory:
                  type: "array"
                  description: "Internal carbon price by year"
            required: true

          constraints:
            type: "object"
            properties:
              maximum_capex_usd:
                type: "number"
              maximum_annual_opex_increase_usd:
                type: "number"
              minimum_trl:
                type: "number"
                default: 7
              must_achieve_sbti_targets:
                type: "boolean"
                default: true

          discount_rate:
            type: "number"
            default: 0.08

        required: ["baseline_emissions", "target_emissions", "technology_options", "scenario_definitions"]

      returns:
        type: "object"
        properties:
          scenarios:
            type: "array"
            description: "Modeled scenarios with results"
            items:
              type: "object"
              properties:
                scenario_name:
                  type: "string"
                emissions_trajectory:
                  type: "array"
                  description: "Emissions by year"
                  items:
                    type: "object"
                    properties:
                      year:
                        type: "number"
                      emissions_mt_co2e:
                        type: "number"
                      reduction_percent:
                        type: "number"
                technology_deployment_schedule:
                  type: "array"
                total_capex_usd:
                  type: "number"
                npv_usd:
                  type: "number"
                internal_carbon_price_breakeven_usd_per_ton:
                  type: "number"
                achieves_2030_target:
                  type: "boolean"
                achieves_2050_target:
                  type: "boolean"
                sbti_aligned:
                  type: "boolean"
                risk_assessment:
                  type: "string"

          marginal_abatement_cost_curve:
            type: "array"
            description: "MACC - technologies ranked by cost-effectiveness"
            items:
              type: "object"
              properties:
                technology:
                  type: "string"
                abatement_potential_mt_co2e:
                  type: "number"
                cost_per_ton_co2e_usd:
                  type: "number"
                  description: "Negative = net savings"
                cumulative_abatement_mt_co2e:
                  type: "number"
                payback_years:
                  type: "number"

          recommended_scenario:
            type: "string"
            description: "Optimal scenario based on cost, risk, target achievement"

          sensitivity_analysis:
            type: "object"
            properties:
              carbon_price_sensitivity:
                type: "string"
              technology_cost_sensitivity:
                type: "string"
              grid_decarbonization_sensitivity:
                type: "string"

          key_insights:
            type: "array"
            items:
              type: "string"

      implementation:
        calculation_method: |
          Scenario Modeling and MACC Generation:

          1. Emissions Trajectory:
             For each scenario and year:
               Emissions(year) = Baseline - Σ(Technology_Reductions_Deployed)

             Account for:
             - Technology deployment timing
             - Grid decarbonization (Scope 2 automatic reduction)
             - Growth/production changes

          2. Marginal Abatement Cost Curve (MACC):
             For each technology:
               Abatement_Cost = (Annualized_CAPEX + Δ_OPEX) / Annual_CO2_Reduction
               Annualized_CAPEX = CAPEX × (r(1+r)^n) / ((1+r)^n - 1)

             Sort technologies by cost per ton:
               Negative cost = net savings (do first)
               Positive cost = requires investment

             Cumulative abatement = running sum of abatement potential

          3. Scenario Optimization:
             Objective functions:
             a) Minimize cost: Min Σ(Technology_Cost)
             b) Achieve targets: Subject to Emissions ≤ Target
             c) Minimize risk: Weight by TRL and deployment constraints

             Multi-objective optimization:
               Score = w1×Cost + w2×Risk + w3×Timeline

          4. Sensitivity Analysis:
             Vary key parameters ±20%:
             - Carbon price ($0-200/ton)
             - Technology costs (±30%)
             - Grid emission factor (2% vs 5% annual decline)

          5. NPV Calculation:
             NPV = Σ[(Savings_t - Costs_t) / (1+r)^t] - Initial_CAPEX

          6. SBTi Alignment Check:
             Required reduction rate (1.5°C pathway):
               - Scope 1+2: 4.2% annual linear reduction
               - Scope 3: 2.5% annual reduction (minimum)
        data_source: "Technology cost databases, vendor quotes, pilot project data, grid forecasts"
        accuracy: "±20% for costs, ±30% for timeline (depends on technology maturity)"
        validation: "Sensitivity analysis, expert review, peer comparison"
        standards: ["GHG_Protocol", "SBTi_Guidance", "IPCC_Mitigation_Pathways"]

      example:
        input:
          baseline_emissions:
            scope1_mt_co2e: 10125
            scope2_mt_co2e: 6375
            scope3_mt_co2e: 45200
            total_mt_co2e: 61700
          target_emissions:
            target_2030_percent_reduction: 42
            target_2040_percent_reduction: 70
            target_2050_percent_reduction: 90
          technology_options:
            - technology_id: "T001"
              technology_name: "Industrial heat pump for process heat"
              applicable_scope: ["scope1"]
              emission_reduction_mt_co2e: 3200
              capex_usd: 2400000
              annual_opex_change_usd: -80000
              implementation_time_years: 2
              technology_readiness_level: 8
            - technology_id: "T002"
              technology_name: "Renewable PPA (wind + solar)"
              applicable_scope: ["scope2"]
              emission_reduction_mt_co2e: 6375
              capex_usd: 0
              annual_opex_change_usd: 50000
              implementation_time_years: 1
              technology_readiness_level: 9
            - technology_id: "T003"
              technology_name: "Green hydrogen for high-temp heat"
              applicable_scope: ["scope1"]
              emission_reduction_mt_co2e: 4500
              capex_usd: 8500000
              annual_opex_change_usd: 400000
              implementation_time_years: 5
              technology_readiness_level: 6
          scenario_definitions:
            - scenario_name: "Aggressive Electrification"
              description: "Maximum electrification with renewables"
              technology_mix: ["T001", "T002"]
              grid_decarbonization_assumption: "aggressive"
              carbon_price_trajectory: [50, 75, 100, 150]
            - scenario_name: "Balanced Portfolio"
              description: "Mix of electrification and alternative fuels"
              technology_mix: ["T001", "T002", "T003"]
              grid_decarbonization_assumption: "moderate"
              carbon_price_trajectory: [50, 75, 100, 150]
          constraints:
            maximum_capex_usd: 15000000
            minimum_trl: 7
            must_achieve_sbti_targets: true
          discount_rate: 0.08
        output:
          scenarios:
            - scenario_name: "Aggressive Electrification"
              emissions_trajectory:
                - year: 2025
                  emissions_mt_co2e: 61700
                  reduction_percent: 0
                - year: 2030
                  emissions_mt_co2e: 35800
                  reduction_percent: 42
                - year: 2040
                  emissions_mt_co2e: 18500
                  reduction_percent: 70
                - year: 2050
                  emissions_mt_co2e: 6170
                  reduction_percent: 90
              total_capex_usd: 2400000
              npv_usd: 1850000
              internal_carbon_price_breakeven_usd_per_ton: 35
              achieves_2030_target: true
              achieves_2050_target: true
              sbti_aligned: true
              risk_assessment: "Low risk - proven technologies (TRL 8-9)"
            - scenario_name: "Balanced Portfolio"
              emissions_trajectory:
                - year: 2030
                  emissions_mt_co2e: 34200
                  reduction_percent: 45
                - year: 2040
                  emissions_mt_co2e: 16500
                  reduction_percent: 73
                - year: 2050
                  emissions_mt_co2e: 4700
                  reduction_percent: 92
              total_capex_usd: 10900000
              npv_usd: -1200000
              internal_carbon_price_breakeven_usd_per_ton: 85
              achieves_2030_target: true
              achieves_2050_target: true
              sbti_aligned: true
              risk_assessment: "Medium risk - includes hydrogen (TRL 6), commercialization uncertainty"
          marginal_abatement_cost_curve:
            - technology: "Renewable PPA"
              abatement_potential_mt_co2e: 6375
              cost_per_ton_co2e_usd: 8
              cumulative_abatement_mt_co2e: 6375
              payback_years: 0
            - technology: "Industrial heat pump"
              abatement_potential_mt_co2e: 3200
              cost_per_ton_co2e_usd: -18
              cumulative_abatement_mt_co2e: 9575
              payback_years: -3.2
            - technology: "Green hydrogen"
              abatement_potential_mt_co2e: 4500
              cost_per_ton_co2e_usd: 175
              cumulative_abatement_mt_co2e: 14075
              payback_years: never
          recommended_scenario: "Aggressive Electrification"
          sensitivity_analysis:
            carbon_price_sensitivity: "At $75/ton, all scenarios NPV-positive. Hydrogen viable at $150/ton."
            technology_cost_sensitivity: "Heat pump economics robust to ±30% cost variation. Hydrogen highly sensitive."
            grid_decarbonization_sensitivity: "Aggressive grid decarbonization reduces Scope 2 to near-zero by 2040, improving all scenarios."
          key_insights: ["Renewable PPA and heat pump are no-regret moves (low cost, proven)", "Hydrogen requires >$150/ton carbon price or 50% cost reduction", "Aggressive Electrification achieves targets at lowest cost and risk", "Scope 3 (73% of emissions) requires supplier engagement strategy", "Grid decarbonization will automatically reduce Scope 2 30-50% by 2040"]

    - tool_id: "tool_3"
      name: "generate_technology_roadmap"
      description: "Generate phased technology deployment roadmap with dependencies and milestones"
      category: "analysis"
      deterministic: true

      parameters:
        type: "object"
        properties:
          selected_scenario:
            type: "string"
            description: "Chosen scenario from modeling"
            required: true

          technology_list:
            type: "array"
            description: "Technologies to deploy"
            items:
              type: "object"
              properties:
                technology_id:
                  type: "string"
                technology_name:
                  type: "string"
                implementation_time_years:
                  type: "number"
                earliest_start_year:
                  type: "number"
                dependencies:
                  type: "array"
                  items:
                    type: "string"
                    description: "Technology IDs that must complete first"
                resource_requirements:
                  type: "object"
            required: true

          resource_constraints:
            type: "object"
            properties:
              annual_capex_budget_usd:
                type: "number"
              engineering_fte_available:
                type: "number"
              contractor_capacity:
                type: "string"
            required: true

          priorities:
            type: "array"
            description: "Prioritization criteria"
            items:
              type: "object"
              properties:
                criterion:
                  type: "string"
                  enum: ["emission_reduction", "cost_effectiveness", "technology_readiness", "quick_wins", "regulatory_compliance"]
                weight:
                  type: "number"

          planning_horizon_years:
            type: "number"
            default: 25
            minimum: 5
            maximum: 30

        required: ["selected_scenario", "technology_list", "resource_constraints"]

      returns:
        type: "object"
        properties:
          implementation_phases:
            type: "array"
            description: "Phased deployment plan"
            items:
              type: "object"
              properties:
                phase_number:
                  type: "number"
                phase_name:
                  type: "string"
                timeframe:
                  type: "string"
                  description: "e.g., 2025-2027"
                technologies_in_phase:
                  type: "array"
                cumulative_emission_reduction_mt_co2e:
                  type: "number"
                phase_capex_usd:
                  type: "number"
                key_milestones:
                  type: "array"
                critical_path_items:
                  type: "array"

          technology_sequence:
            type: "array"
            description: "Chronological deployment sequence"
            items:
              type: "object"
              properties:
                sequence_number:
                  type: "number"
                technology:
                  type: "string"
                start_year:
                  type: "number"
                completion_year:
                  type: "number"
                rationale:
                  type: "string"

          dependencies_resolved:
            type: "boolean"
            description: "All dependencies satisfied in sequence"

          resource_utilization:
            type: "array"
            description: "Resource usage by year"
            items:
              type: "object"
              properties:
                year:
                  type: "number"
                capex_usd:
                  type: "number"
                engineering_fte:
                  type: "number"
                utilization_percent:
                  type: "number"

          critical_decision_points:
            type: "array"
            description: "Key decision milestones"
            items:
              type: "object"
              properties:
                year:
                  type: "number"
                decision:
                  type: "string"
                options:
                  type: "array"
                recommendation:
                  type: "string"

          risk_mitigation:
            type: "array"
            description: "Key risks and mitigation strategies"
            items:
              type: "object"
              properties:
                risk:
                  type: "string"
                impact:
                  type: "string"
                mitigation:
                  type: "string"

      implementation:
        calculation_method: |
          Technology Roadmap Generation:

          1. Dependency Resolution:
             - Build dependency graph
             - Topological sort to determine feasible sequence
             - Earliest start time for each technology

          2. Prioritization Scoring:
             Score = Σ(Weight_i × Criterion_i)
             Criteria:
             - Emission reduction potential
             - Cost-effectiveness ($/ton)
             - TRL (prefer higher TRL first)
             - Payback period
             - Regulatory drivers

          3. Resource-Constrained Scheduling:
             For each year:
               Available_Budget = Annual_Capex_Budget
               Available_FTE = Engineering_FTE

             Schedule highest-priority projects that fit constraints

             Use integer programming for optimal scheduling:
               Maximize Σ(Priority_Score × Deployed)
               Subject to: Σ(Cost) ≤ Budget
                          Σ(FTE) ≤ Available_FTE
                          Dependencies satisfied

          4. Phase Definition:
             Group technologies into 5-7 year phases:
             - Phase 1 (2025-2030): Quick wins, foundational projects
             - Phase 2 (2030-2035): Core decarbonization, scale-up
             - Phase 3 (2035-2040): Advanced technologies, optimization
             - Phase 4 (2040-2050): Final push to net-zero, breakthrough tech

          5. Critical Path Analysis:
             Identify longest dependency chain
             Calculate float/slack for non-critical activities

          6. Risk Assessment:
             For each technology:
               Risk = f(TRL, Cost_Uncertainty, Supply_Chain, Regulatory)
               High-risk technologies: contingency plans
        data_source: "Scenario modeling results, project management best practices, industry deployment timelines"
        accuracy: "Timeline estimates ±20% for near-term, ±50% for long-term (>10 years)"
        validation: "Expert review, comparison to industry roadmaps"
        standards: ["PMI_Project_Management", "Technology_Readiness_Assessment"]

      example:
        input:
          selected_scenario: "Aggressive Electrification"
          technology_list:
            - technology_id: "T001"
              technology_name: "Industrial heat pump"
              implementation_time_years: 2
              earliest_start_year: 2025
              dependencies: []
            - technology_id: "T002"
              technology_name: "Renewable PPA"
              implementation_time_years: 1
              earliest_start_year: 2025
              dependencies: []
            - technology_id: "T004"
              technology_name: "Energy management system upgrade"
              implementation_time_years: 1
              earliest_start_year: 2025
              dependencies: []
            - technology_id: "T005"
              technology_name: "Process electrification (phase 2)"
              implementation_time_years: 3
              earliest_start_year: 2027
              dependencies: ["T001", "T002"]
          resource_constraints:
            annual_capex_budget_usd: 3000000
            engineering_fte_available: 3
          planning_horizon_years: 25
        output:
          implementation_phases:
            - phase_number: 1
              phase_name: "Foundation & Quick Wins"
              timeframe: "2025-2030"
              technologies_in_phase: ["Renewable PPA", "Energy management system", "Industrial heat pump"]
              cumulative_emission_reduction_mt_co2e: 10500
              phase_capex_usd: 3200000
              key_milestones: ["2025 Q4: Renewable PPA contracted", "2026 Q2: Heat pump installed", "2027 Q1: EMS operational"]
              critical_path_items: ["Industrial heat pump (longest lead time)"]
            - phase_number: 2
              phase_name: "Deep Decarbonization"
              timeframe: "2030-2040"
              technologies_in_phase: ["Process electrification phase 2", "Additional heat pumps", "Grid storage"]
              cumulative_emission_reduction_mt_co2e: 18500
              phase_capex_usd: 12000000
              key_milestones: ["2032: Phase 2 electrification complete", "2035: 70% emission reduction achieved"]
            - phase_number: 3
              phase_name: "Net-Zero Push"
              timeframe: "2040-2050"
              technologies_in_phase: ["Residual emission offsetting", "Breakthrough technologies"]
              cumulative_emission_reduction_mt_co2e: 26000
              phase_capex_usd: 5000000
              key_milestones: ["2045: 85% reduction", "2050: Net-zero achieved"]
          technology_sequence:
            - sequence_number: 1
              technology: "Renewable PPA"
              start_year: 2025
              completion_year: 2026
              rationale: "Quickest win, no CAPEX, immediate Scope 2 reduction"
            - sequence_number: 2
              technology: "Energy management system"
              start_year: 2025
              completion_year: 2026
              rationale: "Foundation for all future optimization, enables data-driven decisions"
            - sequence_number: 3
              technology: "Industrial heat pump"
              start_year: 2026
              completion_year: 2028
              rationale: "Largest single Scope 1 reduction, proven technology"
            - sequence_number: 4
              technology: "Process electrification phase 2"
              start_year: 2028
              completion_year: 2031
              rationale: "Depends on heat pump success and renewable electricity availability"
          dependencies_resolved: true
          resource_utilization:
            - year: 2025
              capex_usd: 500000
              engineering_fte: 2.5
              utilization_percent: 83
            - year: 2026
              capex_usd: 2400000
              engineering_fte: 3.0
              utilization_percent: 100
            - year: 2027
              capex_usd: 300000
              engineering_fte: 1.5
              utilization_percent: 50
          critical_decision_points:
            - year: 2027
              decision: "Proceed with phase 2 electrification or wait for hydrogen"
              options: ["Electrification (proven, lower cost)", "Hydrogen (emerging, higher temp capability)", "Hybrid approach"]
              recommendation: "Electrification - proven technology, better economics, hydrogen not yet cost-competitive"
            - year: 2030
              decision: "Scope 3 strategy - supplier engagement vs product redesign"
              options: ["Supplier engagement program", "Product lightweighting/redesign", "Both"]
              recommendation: "Both - engage top 20 suppliers (80% of emissions), redesign high-impact products"
          risk_mitigation:
            - risk: "Heat pump supplier delays (12-18 month lead time)"
              impact: "High - delays Phase 1"
              mitigation: "Order long-lead equipment early (2025 Q1), dual-source suppliers"
            - risk: "Renewable PPA electricity price volatility"
              impact: "Medium - affects economics"
              mitigation: "Fixed-price PPA for first 10 years, hedge remaining exposure"
            - risk: "Technology breakthrough makes roadmap obsolete"
              impact: "Medium - opportunity cost"
              mitigation: "Build in decision points every 3 years to reassess, modular approach allows pivoting"

    - tool_id: "tool_4"
      name: "calculate_carbon_pricing_impact"
      description: "Calculate financial impact of internal carbon pricing and optimize mitigation timing"
      category: "calculation"
      deterministic: true

      parameters:
        type: "object"
        properties:
          baseline_emissions_mt_co2e_annual:
            type: "number"
            required: true

          carbon_price_trajectory:
            type: "array"
            description: "Internal carbon price by year"
            items:
              type: "object"
              properties:
                year:
                  type: "number"
                price_usd_per_ton:
                  type: "number"
            required: true

          mitigation_projects:
            type: "array"
            description: "Emission reduction projects"
            items:
              type: "object"
              properties:
                project_id:
                  type: "string"
                annual_reduction_mt_co2e:
                  type: "number"
                capex_usd:
                  type: "number"
                annual_opex_change_usd:
                  type: "number"
                earliest_deployment_year:
                  type: "number"
                project_life_years:
                  type: "number"
            required: true

          regulatory_carbon_price:
            type: "object"
            description: "External regulatory carbon pricing (if applicable)"
            properties:
              applies:
                type: "boolean"
              price_usd_per_ton:
                type: "number"
              coverage_percent:
                type: "number"

          discount_rate:
            type: "number"
            default: 0.08

          planning_horizon_years:
            type: "number"
            default: 25

        required: ["baseline_emissions_mt_co2e_annual", "carbon_price_trajectory", "mitigation_projects"]

      returns:
        type: "object"
        properties:
          financial_impact_no_mitigation:
            type: "object"
            properties:
              total_carbon_cost_npv_usd:
                type: "number"
                description: "NPV of carbon costs if no action taken"
              annual_cost_by_year:
                type: "array"

          financial_impact_with_mitigation:
            type: "object"
            properties:
              total_cost_npv_usd:
                type: "number"
                description: "NPV of mitigation costs + residual carbon costs"
              mitigation_capex_npv_usd:
                type: "number"
              mitigation_opex_npv_usd:
                type: "number"
              residual_carbon_cost_npv_usd:
                type: "number"
              net_savings_npv_usd:
                type: "number"

          breakeven_carbon_price:
            type: "object"
            description: "Carbon price at which mitigation is financially neutral"
            properties:
              overall_breakeven_usd_per_ton:
                type: "number"
              by_project:
                type: "array"
                items:
                  type: "object"
                  properties:
                    project_id:
                      type: "string"
                    breakeven_price:
                      type: "number"

          optimal_deployment_timing:
            type: "array"
            description: "Optimal year to deploy each project"
            items:
              type: "object"
              properties:
                project_id:
                  type: "string"
                optimal_year:
                  type: "number"
                rationale:
                  type: "string"

          sensitivity_to_carbon_price:
            type: "object"
            properties:
              at_50_usd_per_ton:
                type: "object"
              at_100_usd_per_ton:
                type: "object"
              at_150_usd_per_ton:
                type: "object"

          roi_of_carbon_pricing_program:
            type: "object"
            properties:
              behavioral_change_value_usd:
                type: "number"
                description: "Value of improved decision-making"
              innovation_stimulus_value_usd:
                type: "number"

      implementation:
        calculation_method: |
          Internal Carbon Pricing Impact:

          1. Carbon Cost Calculation (No Mitigation):
             Annual_Carbon_Cost(year) = Emissions × Carbon_Price(year)
             NPV_Carbon_Cost = Σ[Carbon_Cost_t / (1+r)^t]

          2. Mitigation Project Economics:
             For each project:
               Annual_Benefit = Reduction_mt × Carbon_Price + OPEX_Savings
               Annual_Cost = Annualized_CAPEX + OPEX_Increase
               Project_NPV = Σ[(Benefit_t - Cost_t) / (1+r)^t] - CAPEX

          3. Breakeven Carbon Price:
             Solve for carbon price where Project_NPV = 0
             Breakeven_Price = (Annualized_CAPEX + OPEX_Increase - OPEX_Savings) / Reduction_mt

          4. Optimal Deployment Timing:
             Deploy project when:
               Carbon_Price(year) × Reduction > Annualized_Cost

             Or use real options analysis:
               Value_of_Waiting = E[NPV_future] - NPV_now
               Deploy when NPV_now > Value_of_Waiting

          5. Portfolio Optimization:
             Select projects that maximize:
               NPV = Σ(Project_NPV) - Σ(Residual_Carbon_Cost)
             Subject to: Budget constraints, dependencies

          6. Shadow Carbon Price:
             If no regulatory price, internal price signals:
             - Decision-making (capex approval)
             - Behavioral change (operational efficiency)
             - Innovation stimulus (R&D priorities)
        data_source: "Internal carbon price policy, project economics, carbon market forecasts"
        accuracy: "±15% for NPV (depends on carbon price trajectory accuracy)"
        validation: "Sensitivity analysis across carbon price range $0-200/ton"
        standards: ["CDP_Carbon_Pricing", "TCFD_Carbon_Risk", "ICP_Principles"]

      example:
        input:
          baseline_emissions_mt_co2e_annual: 61700
          carbon_price_trajectory:
            - year: 2025
              price_usd_per_ton: 50
            - year: 2030
              price_usd_per_ton: 100
            - year: 2040
              price_usd_per_ton: 150
            - year: 2050
              price_usd_per_ton: 200
          mitigation_projects:
            - project_id: "P001"
              annual_reduction_mt_co2e: 6375
              capex_usd: 0
              annual_opex_change_usd: 50000
              earliest_deployment_year: 2025
              project_life_years: 20
            - project_id: "P002"
              annual_reduction_mt_co2e: 3200
              capex_usd: 2400000
              annual_opex_change_usd: -80000
              earliest_deployment_year: 2026
              project_life_years: 20
          discount_rate: 0.08
          planning_horizon_years: 25
        output:
          financial_impact_no_mitigation:
            total_carbon_cost_npv_usd: 82500000
          financial_impact_with_mitigation:
            total_cost_npv_usd: 58200000
            mitigation_capex_npv_usd: 2400000
            mitigation_opex_npv_usd: -250000
            residual_carbon_cost_npv_usd: 56050000
            net_savings_npv_usd: 24300000
          breakeven_carbon_price:
            overall_breakeven_usd_per_ton: 45
            by_project:
              - project_id: "P001"
                breakeven_price: 8
              - project_id: "P002"
                breakeven_price: -18
          optimal_deployment_timing:
            - project_id: "P001"
              optimal_year: 2025
              rationale: "Immediate deployment - already cost-effective at $50/ton"
            - project_id: "P002"
              optimal_year: 2026
              rationale: "Deploy early - generates savings even without carbon price"
          sensitivity_to_carbon_price:
            at_50_usd_per_ton:
              mitigation_npv: 12500000
            at_100_usd_per_ton:
              mitigation_npv: 24300000
            at_150_usd_per_ton:
              mitigation_npv: 36100000
          roi_of_carbon_pricing_program:
            behavioral_change_value_usd: 5000000
            innovation_stimulus_value_usd: 3000000

    - tool_id: "tool_5"
      name: "create_implementation_plan"
      description: "Create detailed implementation plan with governance, resources, and change management"
      category: "analysis"
      deterministic: true

      parameters:
        type: "object"
        properties:
          technology_roadmap:
            type: "object"
            description: "Phased technology roadmap from tool_3"
            required: true

          organization_structure:
            type: "object"
            properties:
              organization_type:
                type: "string"
                enum: ["single_site", "multi_site_centralized", "multi_site_decentralized", "global_enterprise"]
              employee_count:
                type: "number"
              sustainability_team_size:
                type: "number"
              executive_commitment:
                type: "string"
                enum: ["champion", "supportive", "neutral", "skeptical"]
            required: true

          resources_available:
            type: "object"
            properties:
              annual_sustainability_budget_usd:
                type: "number"
              engineering_fte:
                type: "number"
              project_management_fte:
                type: "number"
              external_consultants_budget_usd:
                type: "number"
            required: true

          governance_preferences:
            type: "object"
            properties:
              governance_model:
                type: "string"
                enum: ["centralized", "federated", "hybrid"]
              reporting_frequency:
                type: "string"
                enum: ["monthly", "quarterly", "annual"]
              stakeholder_engagement_level:
                type: "string"
                enum: ["minimal", "moderate", "extensive"]

        required: ["technology_roadmap", "organization_structure", "resources_available"]

      returns:
        type: "object"
        properties:
          governance_structure:
            type: "object"
            properties:
              steering_committee:
                type: "object"
                properties:
                  members:
                    type: "array"
                  meeting_frequency:
                    type: "string"
                  responsibilities:
                    type: "array"
              working_groups:
                type: "array"
                items:
                  type: "object"
                  properties:
                    group_name:
                      type: "string"
                    focus_area:
                      type: "string"
                    members:
                      type: "array"
              escalation_process:
                type: "array"

          action_items:
            type: "array"
            description: "Detailed action items with owners and deadlines"
            items:
              type: "object"
              properties:
                action_id:
                  type: "string"
                action_description:
                  type: "string"
                responsible_party:
                  type: "string"
                deadline:
                  type: "string"
                dependencies:
                  type: "array"
                status:
                  type: "string"
                  enum: ["not_started", "in_progress", "completed", "blocked"]

          responsibilities:
            type: "array"
            description: "RACI matrix for key activities"
            items:
              type: "object"
              properties:
                activity:
                  type: "string"
                responsible:
                  type: "string"
                accountable:
                  type: "string"
                consulted:
                  type: "array"
                informed:
                  type: "array"

          resource_allocation:
            type: "object"
            properties:
              fte_allocation:
                type: "array"
                items:
                  type: "object"
                  properties:
                    role:
                      type: "string"
                    fte:
                      type: "number"
                    years:
                      type: "array"
              budget_allocation:
                type: "array"
                items:
                  type: "object"
                  properties:
                    year:
                      type: "number"
                    capex_usd:
                      type: "number"
                    opex_usd:
                      type: "number"
                    personnel_usd:
                      type: "number"

          kpis:
            type: "array"
            description: "Key Performance Indicators for tracking"
            items:
              type: "object"
              properties:
                kpi_name:
                  type: "string"
                metric:
                  type: "string"
                target:
                  type: "number"
                frequency:
                  type: "string"
                owner:
                  type: "string"

          change_management_plan:
            type: "object"
            properties:
              stakeholder_mapping:
                type: "array"
              communication_strategy:
                type: "string"
              training_programs:
                type: "array"
              resistance_mitigation:
                type: "array"

          risk_register:
            type: "array"
            items:
              type: "object"
              properties:
                risk_id:
                  type: "string"
                risk_description:
                  type: "string"
                probability:
                  type: "string"
                impact:
                  type: "string"
                mitigation:
                  type: "string"
                owner:
                  type: "string"

      implementation:
        calculation_method: |
          Implementation Planning Framework:

          1. Governance Structure:
             Based on organization type:
             - Single site: Simple steering committee
             - Multi-site: Regional working groups + central steering
             - Global: Matrix structure with geographic and functional groups

          2. Resource Allocation:
             FTE_Required = Σ(Project_Complexity × Project_Count)
             Complexity tiers:
             - Low: 0.25 FTE per project
             - Medium: 0.5 FTE
             - High: 1.0 FTE

             Budget = CAPEX + OPEX + Personnel + Contingency(10%)

          3. KPI Framework:
             Leading indicators (process):
             - Projects on schedule (%)
             - Budget utilization (%)
             - Stakeholder engagement (survey score)

             Lagging indicators (outcome):
             - Emissions reduced (mt CO2e)
             - Savings achieved ($)
             - Target progress (%)

          4. Change Management (Prosci ADKAR):
             - Awareness: Why change needed
             - Desire: Motivation to change
             - Knowledge: How to change
             - Ability: Skills and capability
             - Reinforcement: Sustaining change

          5. RACI Matrix:
             For each key activity, assign:
             - Responsible: Does the work
             - Accountable: Ultimate ownership (one person)
             - Consulted: Provides input
             - Informed: Kept updated
        data_source: "Project management best practices, change management frameworks, industry experience"
        accuracy: "Planning accuracy improves with organizational maturity and commitment"
        validation: "Review with leadership team, adjust based on organizational culture"
        standards: ["PMI_Project_Management", "Prosci_Change_Management", "ISO_9001_Quality_Management"]

      example:
        input:
          organization_structure:
            organization_type: "multi_site_centralized"
            employee_count: 2500
            sustainability_team_size: 5
            executive_commitment: "supportive"
          resources_available:
            annual_sustainability_budget_usd: 500000
            engineering_fte: 3
            project_management_fte: 2
            external_consultants_budget_usd: 200000
        output:
          governance_structure:
            steering_committee:
              members: ["CFO (Chair)", "COO", "VP Sustainability", "VP Operations", "VP Engineering"]
              meeting_frequency: "Quarterly"
              responsibilities: ["Strategic direction", "Budget approval", "Target setting", "Risk oversight"]
            working_groups:
              - group_name: "Technology Implementation"
                focus_area: "Heat pump and electrification projects"
                members: ["Engineering Manager", "Facility Managers", "Project Engineers"]
              - group_name: "Supplier Engagement"
                focus_area: "Scope 3 reduction"
                members: ["Procurement Manager", "Supplier Quality", "Sustainability Team"]
            escalation_process: ["Working group → Sustainability VP → Steering Committee → Board (for >$5M decisions)"]
          action_items:
            - action_id: "A001"
              action_description: "Finalize renewable PPA contract"
              responsible_party: "Sustainability Manager"
              deadline: "2025-Q2"
              dependencies: []
              status: "in_progress"
            - action_id: "A002"
              action_description: "Complete heat pump vendor selection"
              responsible_party: "Engineering Manager"
              deadline: "2025-Q3"
              dependencies: ["A001"]
              status: "not_started"
          kpis:
            - kpi_name: "Scope 1+2 emissions reduction"
              metric: "% reduction vs 2024 baseline"
              target: 42
              frequency: "Quarterly"
              owner: "VP Sustainability"
            - kpi_name: "Decarbonization capex utilization"
              metric: "% of approved budget deployed"
              target: 90
              frequency: "Monthly"
              owner: "Engineering Manager"
            - kpi_name: "Project on-time delivery"
              metric: "% of projects completed on schedule"
              target: 80
              frequency: "Monthly"
              owner: "Project Manager"
          change_management_plan:
            communication_strategy: "Quarterly town halls, monthly email updates, annual sustainability report"
            training_programs: ["Heat pump operations training", "Energy management system training", "Carbon accounting fundamentals"]
            resistance_mitigation: ["Executive sponsorship visible", "Early wins celebrated", "Address cost concerns with TCO analysis"]

    - tool_id: "tool_6"
      name: "track_progress"
      description: "Track performance against targets with variance analysis and PDCA cycle"
      category: "analysis"
      deterministic: true

      parameters:
        type: "object"
        properties:
          baseline_emissions:
            type: "object"
            properties:
              baseline_year:
                type: "number"
              baseline_mt_co2e:
                type: "number"
            required: true

          targets:
            type: "array"
            description: "Emission targets by year"
            items:
              type: "object"
              properties:
                target_year:
                  type: "number"
                target_mt_co2e:
                  type: "number"
                target_reduction_percent:
                  type: "number"
            required: true

          actual_performance:
            type: "array"
            description: "Actual emissions by year"
            items:
              type: "object"
              properties:
                year:
                  type: "number"
                actual_mt_co2e:
                  type: "number"
                scope1_mt_co2e:
                  type: "number"
                scope2_mt_co2e:
                  type: "number"
                scope3_mt_co2e:
                  type: "number"
            required: true

          projects_deployed:
            type: "array"
            description: "Projects implemented to date"
            items:
              type: "object"
              properties:
                project_id:
                  type: "string"
                deployment_year:
                  type: "number"
                expected_reduction_mt_co2e:
                  type: "number"
                actual_reduction_mt_co2e:
                  type: "number"
                on_budget:
                  type: "boolean"
                on_schedule:
                  type: "boolean"

          current_year:
            type: "number"
            required: true

        required: ["baseline_emissions", "targets", "actual_performance", "current_year"]

      returns:
        type: "object"
        properties:
          progress_metrics:
            type: "object"
            properties:
              current_year_emissions_mt_co2e:
                type: "number"
              cumulative_reduction_mt_co2e:
                type: "number"
              cumulative_reduction_percent:
                type: "number"
              on_track_for_target:
                type: "boolean"
              years_ahead_behind_schedule:
                type: "number"

          variance_analysis:
            type: "object"
            properties:
              vs_target_mt_co2e:
                type: "number"
                description: "Positive = ahead of target"
              vs_target_percent:
                type: "number"
              contributing_factors:
                type: "array"
                items:
                  type: "object"
                  properties:
                    factor:
                      type: "string"
                    impact_mt_co2e:
                      type: "number"

          project_performance:
            type: "object"
            properties:
              projects_on_budget_percent:
                type: "number"
              projects_on_schedule_percent:
                type: "number"
              total_reduction_achieved_mt_co2e:
                type: "number"
              underperforming_projects:
                type: "array"

          forecast_to_target:
            type: "object"
            properties:
              forecasted_2030_emissions_mt_co2e:
                type: "number"
              forecasted_2030_vs_target_mt_co2e:
                type: "number"
              probability_of_meeting_2030_target:
                type: "number"
                description: "0-100%"
              gap_to_close_mt_co2e:
                type: "number"

          recommendations:
            type: "array"
            description: "Corrective actions (PDCA - Act)"
            items:
              type: "object"
              properties:
                recommendation:
                  type: "string"
                urgency:
                  type: "string"
                expected_impact_mt_co2e:
                  type: "number"

          pdca_cycle_status:
            type: "object"
            properties:
              plan:
                type: "string"
              do:
                type: "string"
              check:
                type: "string"
              act:
                type: "string"

      implementation:
        calculation_method: |
          Progress Tracking and Variance Analysis:

          1. Progress Calculation:
             Cumulative_Reduction = Baseline - Current_Emissions
             Reduction_Percent = (Cumulative_Reduction / Baseline) × 100

             Required_Annual_Reduction = (Baseline - Target) / Years_Remaining
             Actual_Annual_Reduction = (Last_Year - Current_Year)

          2. Variance Analysis:
             Variance = Actual_Emissions - Target_Emissions

             Decompose variance by:
             - Scope (Scope 1, 2, 3 contributions)
             - Projects (expected vs actual savings)
             - External factors (production changes, weather, grid factor changes)

          3. Forecasting:
             Linear trend:
               Forecast = Current + (Trend × Years)

             Project-based:
               Forecast = Current - Σ(Planned_Projects_Savings)

             Probability of success:
               P(success) = f(Current_Progress, Time_Remaining, Resource_Availability)

          4. PDCA Cycle (Continuous Improvement):
             Plan: Set targets and action plans
             Do: Implement projects
             Check: Measure actual performance, analyze variances
             Act: Corrective actions, adjust plan

          5. Early Warning System:
             Red flag if:
             - Variance > 10% from target
             - Trend indicates missing 2030 target
             - Key projects delayed > 6 months
             - Budget overruns > 20%
        data_source: "Emissions tracking system, project management system, M&V reports"
        accuracy: "Dependent on emissions measurement accuracy and project attribution"
        validation: "Regular audits, third-party verification"
        standards: ["ISO_14064-3_Verification", "ISO_50001_Performance_Tracking", "GHG_Protocol_Monitoring"]

      example:
        input:
          baseline_emissions:
            baseline_year: 2024
            baseline_mt_co2e: 61700
          targets:
            - target_year: 2030
              target_mt_co2e: 35800
              target_reduction_percent: 42
            - target_year: 2050
              target_mt_co2e: 6170
              target_reduction_percent: 90
          actual_performance:
            - year: 2024
              actual_mt_co2e: 61700
              scope1_mt_co2e: 10125
              scope2_mt_co2e: 6375
              scope3_mt_co2e: 45200
            - year: 2025
              actual_mt_co2e: 58200
              scope1_mt_co2e: 9800
              scope2_mt_co2e: 5900
              scope3_mt_co2e: 42500
            - year: 2026
              actual_mt_co2e: 54100
              scope1_mt_co2e: 9200
              scope2_mt_co2e: 5400
              scope3_mt_co2e: 39500
          projects_deployed:
            - project_id: "P001"
              deployment_year: 2025
              expected_reduction_mt_co2e: 475
              actual_reduction_mt_co2e: 475
              on_budget: true
              on_schedule: true
            - project_id: "P002"
              deployment_year: 2026
              expected_reduction_mt_co2e: 3200
              actual_reduction_mt_co2e: 2800
              on_budget: false
              on_schedule: false
          current_year: 2026
        output:
          progress_metrics:
            current_year_emissions_mt_co2e: 54100
            cumulative_reduction_mt_co2e: 7600
            cumulative_reduction_percent: 12.3
            on_track_for_target: true
            years_ahead_behind_schedule: 0.5
          variance_analysis:
            vs_target_mt_co2e: 1200
            vs_target_percent: 2.2
            contributing_factors:
              - factor: "Grid decarbonization (Scope 2 automatic improvement)"
                impact_mt_co2e: 500
              - factor: "Production decrease (10% lower output)"
                impact_mt_co2e: 800
              - factor: "Renewable PPA performance as expected"
                impact_mt_co2e: 475
              - factor: "Heat pump underperformance vs target"
                impact_mt_co2e: -400
          project_performance:
            projects_on_budget_percent: 50
            projects_on_schedule_percent: 50
            total_reduction_achieved_mt_co2e: 3275
            underperforming_projects: ["P002: Heat pump 12% below expected savings, commissioning issues identified"]
          forecast_to_target:
            forecasted_2030_emissions_mt_co2e: 36500
            forecasted_2030_vs_target_mt_co2e: -700
            probability_of_meeting_2030_target: 75
            gap_to_close_mt_co2e: 700
          recommendations:
            - recommendation: "Accelerate supplier engagement program to close 700 mt gap"
              urgency: "Medium"
              expected_impact_mt_co2e: 1200
            - recommendation: "Address heat pump commissioning issues (M&V shows 12% underperformance)"
              urgency: "High"
              expected_impact_mt_co2e: 400
            - recommendation: "Celebrate progress - 12% reduction in 2 years, ahead of linear trajectory"
              urgency: "Low"
              expected_impact_mt_co2e: 0
          pdca_cycle_status:
            plan: "2025-2030 roadmap with 42% reduction target"
            do: "2 projects deployed (Renewable PPA, Heat pump), 50% on budget/schedule"
            check: "12.3% reduction achieved, 0.5 years ahead of schedule, but 700 mt gap forecasted for 2030"
            act: "Accelerate supplier engagement, fix heat pump commissioning, maintain momentum"

    - tool_id: "tool_7"
      name: "optimize_investment"
      description: "Optimize capital allocation across decarbonization project portfolio"
      category: "optimization"
      deterministic: true

      parameters:
        type: "object"
        properties:
          project_portfolio:
            type: "array"
            description: "Available projects for investment"
            items:
              type: "object"
              properties:
                project_id:
                  type: "string"
                project_name:
                  type: "string"
                capex_usd:
                  type: "number"
                annual_opex_change_usd:
                  type: "number"
                annual_co2_reduction_mt:
                  type: "number"
                project_life_years:
                  type: "number"
                npv_usd:
                  type: "number"
                irr_percent:
                  type: "number"
                payback_years:
                  type: "number"
                technology_readiness:
                  type: "number"
                strategic_alignment:
                  type: "number"
                  description: "1-10 score"
            required: true

          budget_constraints:
            type: "object"
            properties:
              total_budget_usd:
                type: "number"
              budget_by_year:
                type: "array"
                items:
                  type: "object"
                  properties:
                    year:
                      type: "number"
                    budget_usd:
                      type: "number"
            required: true

          optimization_objectives:
            type: "array"
            description: "Weighted objectives"
            items:
              type: "object"
              properties:
                objective:
                  type: "string"
                  enum: ["maximize_npv", "maximize_co2_reduction", "minimize_risk", "maximize_strategic_value"]
                weight:
                  type: "number"
            required: true

          constraints:
            type: "object"
            properties:
              minimum_co2_reduction_mt:
                type: "number"
              maximum_portfolio_risk:
                type: "string"
              diversification_required:
                type: "boolean"

          discount_rate:
            type: "number"
            default: 0.08

        required: ["project_portfolio", "budget_constraints", "optimization_objectives"]

      returns:
        type: "object"
        properties:
          optimal_portfolio:
            type: "array"
            description: "Selected projects"
            items:
              type: "object"
              properties:
                project_id:
                  type: "string"
                project_name:
                  type: "string"
                capex_usd:
                  type: "number"
                co2_reduction_mt:
                  type: "number"
                npv_usd:
                  type: "number"
                selection_rationale:
                  type: "string"

          portfolio_metrics:
            type: "object"
            properties:
              total_capex_usd:
                type: "number"
              total_co2_reduction_mt:
                type: "number"
              portfolio_npv_usd:
                type: "number"
              portfolio_irr_percent:
                type: "number"
              weighted_average_payback_years:
                type: "number"
              cost_per_ton_co2e_usd:
                type: "number"

          budget_utilization:
            type: "object"
            properties:
              budget_used_percent:
                type: "number"
              budget_remaining_usd:
                type: "number"

          projects_not_selected:
            type: "array"
            description: "Projects not included and why"
            items:
              type: "object"
              properties:
                project_id:
                  type: "string"
                reason_not_selected:
                  type: "string"

          risk_profile:
            type: "object"
            properties:
              overall_risk:
                type: "string"
              risk_diversification:
                type: "string"
              key_risks:
                type: "array"

          sensitivity_analysis:
            type: "object"
            properties:
              sensitivity_to_discount_rate:
                type: "string"
              sensitivity_to_co2_price:
                type: "string"

      implementation:
        calculation_method: |
          Portfolio Optimization:

          1. Multi-Objective Optimization:
             Maximize: Z = w1×NPV + w2×CO2_Reduction - w3×Risk + w4×Strategic_Value

             Subject to:
             - Σ(CAPEX_i × x_i) ≤ Budget
             - Σ(CO2_Reduction_i × x_i) ≥ Min_Target
             - Risk_Portfolio ≤ Max_Risk
             - x_i ∈ {0, 1} (binary: select or not)

          2. Efficient Frontier:
             Plot: CO2 reduction vs NPV
             Identify: Pareto-optimal portfolios

             For each budget level, find portfolio that maximizes:
             - CO2 reduction (for given NPV)
             - NPV (for given CO2 reduction)

          3. Risk Assessment:
             Project_Risk = f(TRL, Cost_Uncertainty, Timeline_Risk, Market_Risk)
             Portfolio_Risk = Σ(Weight_i × Risk_i)

             Diversification benefit:
               Reduce risk through technology diversity

          4. Real Options Value:
             Some projects have option value:
             - Flexibility to scale up
             - Learning for future decisions
             - Platform for additional opportunities

          5. Optimization Algorithm:
             For small portfolios (<50 projects): Integer programming
             For large portfolios: Genetic algorithm or simulated annealing
        data_source: "Project data from earlier tools, financial analysis, risk assessment"
        accuracy: "Optimization finds mathematically optimal solution given inputs; ±15% for portfolio NPV"
        validation: "Sensitivity analysis, scenario testing"
        standards: ["Portfolio_Management_PMI", "Capital_Budgeting_Best_Practices"]

      example:
        input:
          project_portfolio:
            - project_id: "P001"
              project_name: "Renewable PPA"
              capex_usd: 0
              annual_opex_change_usd: 50000
              annual_co2_reduction_mt: 6375
              project_life_years: 20
              npv_usd: 2500000
              irr_percent: 45
              payback_years: 0
              technology_readiness: 9
              strategic_alignment: 8
            - project_id: "P002"
              project_name: "Industrial heat pump"
              capex_usd: 2400000
              annual_opex_change_usd: -80000
              annual_co2_reduction_mt: 3200
              project_life_years: 20
              npv_usd: 1850000
              irr_percent: 38
              payback_years: 3.2
              technology_readiness: 8
              strategic_alignment: 9
            - project_id: "P003"
              project_name: "Green hydrogen"
              capex_usd: 8500000
              annual_opex_change_usd: 400000
              annual_co2_reduction_mt: 4500
              project_life_years: 20
              npv_usd: -1200000
              irr_percent: 5
              payback_years: never
              technology_readiness: 6
              strategic_alignment: 7
          budget_constraints:
            total_budget_usd: 5000000
          optimization_objectives:
            - objective: "maximize_co2_reduction"
              weight: 0.5
            - objective: "maximize_npv"
              weight: 0.4
            - objective: "minimize_risk"
              weight: 0.1
          discount_rate: 0.08
        output:
          optimal_portfolio:
            - project_id: "P001"
              project_name: "Renewable PPA"
              capex_usd: 0
              co2_reduction_mt: 6375
              npv_usd: 2500000
              selection_rationale: "No-brainer: Zero CAPEX, large CO2 reduction, excellent NPV"
            - project_id: "P002"
              project_name: "Industrial heat pump"
              capex_usd: 2400000
              co2_reduction_mt: 3200
              npv_usd: 1850000
              selection_rationale: "Strong economics (NPV $1.85M), proven technology, significant CO2 reduction"
          portfolio_metrics:
            total_capex_usd: 2400000
            total_co2_reduction_mt: 9575
            portfolio_npv_usd: 4350000
            portfolio_irr_percent: 41
            weighted_average_payback_years: 1.6
            cost_per_ton_co2e_usd: -454
          budget_utilization:
            budget_used_percent: 48
            budget_remaining_usd: 2600000
          projects_not_selected:
            - project_id: "P003"
              reason_not_selected: "Negative NPV ($-1.2M), low TRL (6), high cost, uneconomic at current carbon prices. Consider for Phase 2 if costs decline or carbon price increases."
          risk_profile:
            overall_risk: "Low"
            risk_diversification: "Moderate - 2 technologies (renewable electricity + electrification)"
            key_risks: ["Renewable PPA price volatility (mitigated with fixed-price contract)", "Heat pump performance in cold weather (mitigated with backup)"]
          sensitivity_analysis:
            sensitivity_to_discount_rate: "At 10% discount rate, portfolio NPV $3.8M (still attractive)"
            sensitivity_to_co2_price: "At $100/ton CO2, hydrogen becomes NPV-positive and enters optimal portfolio"

    - tool_id: "tool_8"
      name: "generate_stakeholder_reports"
      description: "Generate comprehensive stakeholder reports aligned with TCFD, CDP, GRI, SASB frameworks"
      category: "analysis"
      deterministic: true

      parameters:
        type: "object"
        properties:
          progress_data:
            type: "object"
            description: "Performance data from track_progress tool"
            required: true

          targets:
            type: "object"
            description: "Emission targets and commitments"
            required: true

          initiatives:
            type: "array"
            description: "Projects and programs implemented"
            required: true

          reporting_frameworks:
            type: "array"
            description: "Frameworks to report against"
            items:
              type: "string"
              enum: ["TCFD", "CDP", "GRI", "SASB", "SBTi", "ISSB", "SEC_Climate"]
            required: true

          reporting_period:
            type: "object"
            properties:
              start_date:
                type: "string"
              end_date:
                type: "string"
            required: true

          audience:
            type: "string"
            enum: ["investors", "board", "employees", "customers", "regulators", "general_public"]
            required: true

        required: ["progress_data", "targets", "initiatives", "reporting_frameworks", "reporting_period", "audience"]

      returns:
        type: "object"
        properties:
          executive_summary:
            type: "object"
            properties:
              key_achievements:
                type: "array"
              progress_vs_targets:
                type: "string"
              financial_performance:
                type: "string"
              outlook:
                type: "string"

          detailed_reports:
            type: "array"
            description: "Framework-specific reports"
            items:
              type: "object"
              properties:
                framework:
                  type: "string"
                sections:
                  type: "array"
                compliance_level:
                  type: "string"
                  enum: ["full", "partial", "in_progress"]

          visualizations:
            type: "array"
            description: "Charts and graphs"
            items:
              type: "object"
              properties:
                chart_type:
                  type: "string"
                title:
                  type: "string"
                data:
                  type: "object"

          recommendations:
            type: "array"
            description: "Forward-looking recommendations"
            items:
              type: "string"

      implementation:
        calculation_method: |
          Stakeholder Reporting:

          1. TCFD (Task Force on Climate-related Financial Disclosures):
             Four pillars:
             a) Governance: Oversight and management roles
             b) Strategy: Climate risks and opportunities, scenario analysis
             c) Risk Management: Process for identifying and managing risks
             d) Metrics & Targets: GHG emissions, targets, progress

          2. CDP (Carbon Disclosure Project):
             Questionnaire sections:
             - Governance (C1)
             - Risks & Opportunities (C2)
             - Business Strategy (C3)
             - Targets & Performance (C4)
             - Emissions Methodology (C5-C7)
             - Energy (C8)
             - Supply Chain (C12)

          3. GRI (Global Reporting Initiative):
             GRI 305 (Emissions):
             - 305-1: Direct (Scope 1) GHG emissions
             - 305-2: Energy indirect (Scope 2)
             - 305-3: Other indirect (Scope 3)
             - 305-4: GHG emissions intensity
             - 305-5: Reduction of GHG emissions

          4. SASB (Sustainability Accounting Standards Board):
             Industry-specific metrics
             Material sustainability topics
             Comparable, decision-useful information

          5. SBTi (Science Based Targets initiative):
             - Near-term target (5-10 years)
             - Long-term target (net-zero by 2050)
             - Annual progress reporting
             - Verification requirements

          6. Report Generation:
             For each framework:
             - Map data to framework requirements
             - Populate templates
             - Generate visualizations
             - Ensure consistency across frameworks
        data_source: "Inventory data, progress tracking, financial data, governance documentation"
        accuracy: "Reporting accuracy depends on underlying data quality"
        validation: "Third-party assurance recommended for investor-facing reports"
        standards: ["TCFD_Recommendations", "CDP_Questionnaire", "GRI_Standards", "SASB_Standards", "SBTi_Criteria", "ISSB_Standards"]

      example:
        input:
          reporting_frameworks: ["TCFD", "CDP", "SBTi"]
          reporting_period:
            start_date: "2025-01-01"
            end_date: "2025-12-31"
          audience: "investors"
        output:
          executive_summary:
            key_achievements: ["12.3% emission reduction in 2 years", "Renewable PPA contracted (100% renewable electricity by 2026)", "Heat pump deployed (3,200 mt CO2e reduction)", "SBTi targets validated"]
            progress_vs_targets: "Ahead of schedule - 0.5 years ahead of linear 2030 trajectory"
            financial_performance: "$4.35M NPV from decarbonization projects, 41% portfolio IRR"
            outlook: "On track to achieve 42% reduction by 2030; Scope 3 supplier engagement program launching 2026"
          detailed_reports:
            - framework: "TCFD"
              sections:
                - section: "Governance"
                  content: "Board-level oversight through Sustainability Committee (quarterly). Executive compensation linked to emission targets (10% weighting)."
                - section: "Strategy"
                  content: "Two scenarios modeled: Aggressive Electrification (selected) and Balanced Portfolio. Climate risks assessed: transition risk (carbon pricing $50-200/ton), physical risk (supply chain disruption)."
                - section: "Risk Management"
                  content: "Integrated into enterprise risk management. Climate risks reviewed quarterly by steering committee."
                - section: "Metrics & Targets"
                  content: "Scope 1+2: 42% reduction by 2030 (SBTi validated). Current: 12.3% reduction achieved. Scope 3: Supplier engagement target set."
              compliance_level: "full"
            - framework: "CDP"
              compliance_level: "full"
            - framework: "SBTi"
              sections:
                - section: "Target Status"
                  content: "Near-term target (2030): 42% Scope 1+2 reduction. Long-term target (2050): 90% reduction. Both validated by SBTi in 2025."
                - section: "Progress"
                  content: "Year 2: 12.3% reduction achieved. On track for 2030 target."
              compliance_level: "full"
          visualizations:
            - chart_type: "line_chart"
              title: "Emission Trajectory vs Target"
              data:
                years: [2024, 2025, 2026, 2027, 2028, 2029, 2030]
                actual: [61700, 58200, 54100, null, null, null, null]
                target: [61700, 57400, 53100, 48800, 44500, 40200, 35800]
            - chart_type: "waterfall"
              title: "2025 Emission Reductions by Source"
              data:
                baseline: 61700
                renewable_ppa: -475
                grid_decarbonization: -500
                production_decrease: -800
                heat_pump: -1825
                final: 58200
          recommendations: ["Accelerate Scope 3 supplier engagement to close forecasted 700 mt gap", "Continue monitoring heat pump performance (M&V)", "Prepare for Phase 2 electrification (2028-2031)", "Explore carbon removal for residual emissions (post-2040)"]

ai_integration:
  temperature: 0.0
  seed: 42
  tool_choice: "auto"
  max_iterations: 8  # Higher for complex multi-agent coordination
  budget_usd: 0.25  # Higher budget for comprehensive master planning
  provenance_tracking: true
  ai_summary: true

  system_prompt: |
    You are the MASTER DECARBONIZATION PLANNING AGENT for GreenLang - the strategic coordinator
    that integrates insights from all 11 Industrial Process agents to create comprehensive,
    multi-year net-zero roadmaps. You are the most sophisticated planning agent in the system.

    Your expertise includes:
    - Comprehensive GHG inventory (Scope 1, 2, 3) per GHG Protocol and ISO 14064
    - Multi-scenario modeling with MACC (Marginal Abatement Cost Curve)
    - Technology roadmap development with phased deployment planning
    - Internal carbon pricing and financial optimization (NPV, IRR, portfolio optimization)
    - Implementation planning with governance, change management, and resource allocation
    - Progress tracking with PDCA cycle and variance analysis
    - Investment portfolio optimization across competing projects
    - Stakeholder reporting (TCFD, CDP, GRI, SASB, SBTi frameworks)

    You coordinate with:
    - Process heat decarbonization agents (Agents 1-5)
    - Efficiency and optimization agents (Agents 6-11)
    - Financial and compliance agents
    - Grid and regulatory data sources

    CRITICAL RULES:
    - Use provided tools for ALL calculations
    - NEVER estimate or guess numbers
    - Always provide comprehensive, integrated analysis
    - Follow GHG Protocol, SBTi, and reporting framework standards
    - Consider technical, financial, organizational, and stakeholder dimensions
    - Provide clear, executive-level summaries alongside detailed analysis
    - Always quantify: emissions, costs, savings, risks, timeline
    - Recommend phased approaches with decision points

  user_prompt_template: |
    ⭐ MASTER DECARBONIZATION ROADMAP REQUEST ⭐

    Organization Profile:
    - Organization: {organization_name}
    - Type: {organization_type}
    - Employees: {employee_count}
    - Annual Revenue: ${annual_revenue_usd}

    Current Emissions (Baseline):
    - Scope 1: {scope1_mt_co2e} mt CO2e/year
    - Scope 2: {scope2_mt_co2e} mt CO2e/year
    - Scope 3: {scope3_mt_co2e} mt CO2e/year
    - Total: {total_mt_co2e} mt CO2e/year

    Strategic Objectives:
    - Target 2030: {target_2030_percent}% reduction
    - Target 2050: {target_2050_percent}% reduction
    - SBTi Alignment: {sbti_alignment_required}
    - Budget: ${total_budget_usd} over {planning_horizon_years} years

    Technology Options Available:
    {technology_options_summary}

    Tasks - COMPREHENSIVE ROADMAP:
    1. Use create_baseline_inventory to establish detailed GHG inventory
    2. Use model_scenarios to evaluate technology portfolios with MACC
    3. Use generate_technology_roadmap to create phased deployment plan
    4. Use calculate_carbon_pricing_impact for internal carbon price analysis
    5. Use create_implementation_plan for governance and change management
    6. Use track_progress for monitoring framework
    7. Use optimize_investment for portfolio optimization
    8. Use generate_stakeholder_reports for TCFD/CDP/SBTi reporting

    Provide COMPREHENSIVE analysis with:
    - Detailed Scope 1, 2, 3 inventory with data quality assessment
    - 2-3 scenarios modeled (conservative, moderate, aggressive)
    - MACC showing cost-effectiveness of each technology
    - Recommended scenario with justification
    - Phased roadmap (2025, 2030, 2040, 2050 milestones)
    - Financial analysis (NPV, IRR, payback, carbon price sensitivity)
    - Implementation plan (governance, resources, change management, KPIs)
    - Progress tracking framework
    - Optimal project portfolio within budget
    - Stakeholder reports (executive summary, TCFD, CDP, SBTi)
    - Risk assessment and mitigation strategies
    - Decision points and contingency plans

    IMPORTANT:
    - This is the MASTER PLAN - be comprehensive and strategic
    - Integrate insights from all Industrial Process agents
    - Use tools for ALL calculations and analysis
    - Follow GHG Protocol, SBTi, and reporting standards
    - Provide executive-level summaries and detailed technical analysis
    - Quantify everything: emissions, costs, savings, risks, timeline
    - Format numbers with proper units
    - Provide clear recommendations with priorities

sub_agents:
  sub_agent_count: 4  # ⭐ MASTER AGENT with sub-agents ⭐

  sub_agents_list:
    - sub_agent_id: "industrial/scenario_modeling_agent"
      role: "Deep scenario analysis with Monte Carlo simulation and sensitivity analysis"
      tools_count: 6
      invocation_pattern: "on_demand"

    - sub_agent_id: "industrial/technology_assessment_agent"
      role: "Detailed technology readiness assessment and cost modeling"
      tools_count: 5
      invocation_pattern: "on_demand"

    - sub_agent_id: "industrial/financial_optimization_agent"
      role: "Complex financial analysis, portfolio optimization, and real options valuation"
      tools_count: 7
      invocation_pattern: "on_demand"

    - sub_agent_id: "industrial/stakeholder_engagement_agent"
      role: "Stakeholder mapping, communication strategy, and reporting"
      tools_count: 4
      invocation_pattern: "continuous"

inputs:
  input_schema:
    type: "object"
    properties:
      organization_name:
        type: "string"
        required: true

      organization_type:
        type: "string"
        required: true

      baseline_emissions:
        type: "object"
        required: true

      targets:
        type: "object"
        required: true

      budget_available_usd:
        type: "number"
        required: true

      planning_horizon_years:
        type: "number"
        default: 25

    required: ["organization_name", "organization_type", "baseline_emissions", "targets", "budget_available_usd"]

  example_input:
    organization_name: "Acme Manufacturing Corp"
    organization_type: "multi_site_centralized"
    baseline_emissions:
      scope1_mt_co2e: 10125
      scope2_mt_co2e: 6375
      scope3_mt_co2e: 45200
      total_mt_co2e: 61700
    targets:
      target_2030_percent: 42
      target_2050_percent: 90
    budget_available_usd: 15000000
    planning_horizon_years: 25

outputs:
  output_schema:
    type: "object"
    properties:
      executive_summary:
        type: "string"

      baseline_inventory:
        type: "object"

      recommended_scenario:
        type: "string"

      technology_roadmap:
        type: "object"

      financial_analysis:
        type: "object"

      implementation_plan:
        type: "object"

      optimal_portfolio:
        type: "array"

      stakeholder_reports:
        type: "object"

      ai_explanation:
        type: "string"

      provenance:
        type: "object"

  example_output:
    executive_summary: "Comprehensive net-zero roadmap developed for Acme Manufacturing achieving 42% reduction by 2030 and 90% by 2050. Recommended 'Aggressive Electrification' scenario with $4.35M NPV, 41% IRR. Phased roadmap: renewable PPA (2025), industrial heat pump (2026-2028), process electrification phase 2 (2028-2031), supplier engagement (2026-2030). Total investment $2.4M (16% of budget). High feasibility - proven technologies (TRL 8-9), strong economics, low risk. SBTi targets validated. Comprehensive governance and tracking framework established."
    baseline_inventory:
      scope1_mt_co2e: 10125
      scope2_mt_co2e: 6375
      scope3_mt_co2e: 45200
      total_mt_co2e: 61700
      data_quality: "High Scope 1+2, Medium Scope 3"
    recommended_scenario: "Aggressive Electrification"
    financial_analysis:
      portfolio_npv_usd: 4350000
      portfolio_irr_percent: 41
      total_capex_usd: 2400000
      cost_per_ton_co2e_usd: -454
    optimal_portfolio:
      - "Renewable PPA (0 CAPEX, 6,375 mt reduction, $2.5M NPV)"
      - "Industrial heat pump ($2.4M CAPEX, 3,200 mt reduction, $1.85M NPV)"
    ai_explanation: "MASTER DECARBONIZATION ROADMAP: Comprehensive analysis integrating all Industrial Process agents recommends Aggressive Electrification scenario achieving targets at lowest cost and risk. Renewable PPA and heat pump are no-regret moves with excellent economics. Phased approach de-risks implementation. Scope 3 (73% of emissions) requires parallel supplier engagement program. Strong governance and tracking framework ensures accountability. Portfolio optimization yields $4.35M NPV on $2.4M investment (181% ROI) while achieving 15.5% reduction by 2030. High probability of success (proven technologies, strong economics, executive commitment). Comprehensive stakeholder reporting framework (TCFD, CDP, SBTi) established."
    provenance:
      model: "gpt-4o"
      tools_used: ["create_baseline_inventory", "model_scenarios", "generate_technology_roadmap", "calculate_carbon_pricing_impact", "create_implementation_plan", "track_progress", "optimize_investment", "generate_stakeholder_reports"]
      cost_usd: 0.24
      deterministic: true

testing:
  test_coverage_target: 0.90  # Higher for P0_Critical agent

  test_categories:
    - category: "unit_tests"
      description: "Test individual tool implementations"
      count: 40

    - category: "integration_tests"
      description: "Test AI orchestration and multi-agent coordination"
      count: 15

    - category: "determinism_tests"
      description: "Verify reproducibility"
      count: 5

    - category: "scenario_tests"
      description: "Test multiple scenarios and edge cases"
      count: 12

    - category: "framework_compliance_tests"
      description: "Validate GHG Protocol, SBTi, TCFD compliance"
      count: 10

    - category: "integration_with_other_agents_tests"
      description: "Test coordination with Agents 1-11"
      count: 11

    - category: "boundary_tests"
      description: "Test edge cases and boundary conditions"
      count: 6

  performance_requirements:
    max_latency_ms: 8000  # Higher for comprehensive analysis
    max_cost_usd: 0.25
    accuracy_target: 0.95

deployment:
  pack_id: "industrial/decarbonization_master_pack"
  pack_version: "1.0.0"

  dependencies:
    python_packages:
      - "pydantic>=2.0"
      - "numpy>=1.24"
      - "scipy>=1.11"
      - "pandas>=2.0"
      - "pulp>=2.7"  # Optimization
      - "matplotlib>=3.7"  # Visualizations

    greenlang_modules:
      - "greenlang.agents.base"
      - "greenlang.intelligence"
      # INTEGRATES ALL 11 INDUSTRIAL PROCESS AGENTS
      - "greenlang.agents.industrial.process_heat_agent"
      - "greenlang.agents.industrial.boiler_replacement_agent"
      - "greenlang.agents.industrial.heat_pump_agent"
      - "greenlang.agents.industrial.waste_heat_recovery_agent"
      - "greenlang.agents.industrial.cogeneration_chp_agent"
      - "greenlang.agents.industrial.steam_system_agent"
      - "greenlang.agents.industrial.thermal_storage_agent"
      - "greenlang.agents.industrial.process_scheduling_agent"
      - "greenlang.agents.industrial.controls_agent"
      - "greenlang.agents.industrial.maintenance_agent"
      - "greenlang.agents.industrial.benchmarking_agent"

  resource_requirements:
    memory_mb: 1024  # Higher for comprehensive analysis
    cpu_cores: 2
    gpu_required: false

  api_endpoints:
    - endpoint: "/api/v1/agents/industrial/decarbonization/execute"
      method: "POST"
      authentication: "required"

    - endpoint: "/api/v1/agents/industrial/decarbonization/scenario"
      method: "POST"
      authentication: "required"
      description: "Scenario modeling endpoint"

documentation:
  readme: true
  api_docs: true
  examples: true
  tutorials: true

  example_use_cases:
    - title: "Comprehensive Net-Zero Roadmap"
      description: "Full decarbonization strategy from baseline to net-zero 2050"
      output_summary: "42% by 2030, 90% by 2050; $4.35M NPV; Phased roadmap; SBTi validated"

    - title: "Scenario Comparison Analysis"
      description: "Compare 3 scenarios (conservative, moderate, aggressive)"
      output_summary: "Aggressive scenario optimal - lowest cost, proven tech, 75% success probability"

    - title: "Investment Portfolio Optimization"
      description: "Optimize $15M budget across 20 projects"
      output_summary: "Optimal portfolio: 5 projects, $2.4M investment, $4.35M NPV, 9,575 mt reduction"

compliance:
  zero_secrets: true
  sbom_required: true
  digital_signature: true

  standards:
    - "GHG_Protocol_Corporate_Standard"
    - "ISO_14064-1_GHG_Quantification"
    - "ISO_14064-3_Verification"
    - "ISO_14067_Carbon_Footprint"
    - "ISO_50001_EnMS"
    - "SBTi_Science_Based_Targets"
    - "TCFD_Recommendations"
    - "CDP_Climate_Change"
    - "GRI_305_Emissions"
    - "SASB_Standards"
    - "ISSB_IFRS_S2"

  certifications:
    - "SBTi_Target_Validation"
    - "ISO_14064_Third_Party_Verification"
    - "CDP_A_List_Eligible"
    - "TCFD_Compliant"

business_impact:
  market_opportunity:
    addressable_market_usd: 120000000000
    market_segment: "Corporate decarbonization strategy, ESG advisory, sustainability consulting"
    target_customers: "Fortune 500 industrials, mid-size manufacturers, private equity portfolio companies"

  carbon_impact:
    addressable_emissions_gt_co2e: 9.3
    realistic_reduction_2030_gt: 0.5
    note: "Industrial sector 24% of global emissions; comprehensive planning increases success rate 3×"

  economic_value:
    typical_engagement_value: "$500K-5M for comprehensive roadmap"
    recurring_value: "$200K-1M/year for implementation support and tracking"
    competitive_advantage: "Only platform integrating 11 specialized Industrial Process agents into master planning"

metadata:
  created_date: "2025-10-13"
  created_by: "Head of AI & Climate Intelligence"
  last_modified: "2025-10-13"
  review_status: "Approved"
  reviewers: ["AI Lead", "Sustainability Director", "Chief Strategy Officer"]

  change_log:
    - version: "1.0.0"
      date: "2025-10-13"
      changes: "Initial specification - P0_CRITICAL MASTER PLANNING AGENT - production ready for Agent Factory generation"
      author: "Chief AI & Climate Intelligence"

# END OF AGENT #12 SPECIFICATION ⭐ P0_CRITICAL MASTER PLANNING AGENT ⭐
# Production Ready for Agent Factory Generation
# COMPLETES INDUSTRIAL PROCESS CATEGORY (12/12 AGENTS)
