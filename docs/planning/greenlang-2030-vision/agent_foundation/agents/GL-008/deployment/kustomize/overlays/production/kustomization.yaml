# GL-008 SteamTrapInspector - Production Environment
# Kustomize overlay for production environment

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Base configuration
resources:
  - ../../base

# Namespace override
namespace: greenlang

# Name prefix for resources
namePrefix: prod-

# Common labels for production environment
commonLabels:
  environment: production
  tier: production

# Common annotations
commonAnnotations:
  environment: "production"
  cost-center: "operations"
  compliance: "soc2"

# Images - use production tag (semver)
images:
  - name: gcr.io/greenlang/gl-008-steam-trap-inspector
    newTag: 1.0.0

# Replicas - full HA for production
replicas:
  - name: gl-008-steam-trap-inspector
    count: 3

# Patches
patches:
  - path: patches/replica-patch.yaml
  - path: patches/resource-patch.yaml
  - path: patches/env-patch.yaml
  - path: patches/hpa-patch.yaml
  - path: patches/ingress-patch.yaml
  - path: patches/security-patch.yaml

# ConfigMap patches for production-specific config
configMapGenerator:
  - name: gl-008-config
    behavior: merge
    literals:
      - environment=production
      - log_level=INFO
      - feature_ml_classification=true
      - feature_predictive_maintenance=true
      - alerts_enabled=true
