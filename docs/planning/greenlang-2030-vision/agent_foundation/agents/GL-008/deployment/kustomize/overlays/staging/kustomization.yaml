# GL-008 SteamTrapInspector - Staging Environment
# Kustomize overlay for staging environment

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Base configuration
resources:
  - ../../base

# Namespace override
namespace: greenlang-staging

# Name prefix for resources
namePrefix: staging-

# Common labels for staging environment
commonLabels:
  environment: staging
  tier: staging

# Common annotations
commonAnnotations:
  environment: "staging"
  cost-center: "engineering"

# Images - use staging tag
images:
  - name: gcr.io/greenlang/gl-008-steam-trap-inspector
    newTag: staging-latest

# Replicas - moderate for staging
replicas:
  - name: gl-008-steam-trap-inspector
    count: 2

# Patches
patches:
  - path: patches/replica-patch.yaml
  - path: patches/resource-patch.yaml
  - path: patches/env-patch.yaml
  - path: patches/hpa-patch.yaml
  - path: patches/ingress-patch.yaml

# ConfigMap patches for staging-specific config
configMapGenerator:
  - name: gl-008-config
    behavior: merge
    literals:
      - environment=staging
      - log_level=INFO
      - feature_ml_classification=true
