# Kustomize Base Configuration for GL-002 BoilerEfficiencyOptimizer
# This defines the common resources shared across all environments

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Namespace for all resources
namespace: greenlang

# Common labels applied to all resources
commonLabels:
  app: gl-002-boiler-efficiency
  agent: "GL-002"
  managed-by: "kustomize"

# Common annotations
commonAnnotations:
  documentation: "https://docs.greenlang.ai/agents/GL-002"
  deployment-tool: "kustomize"

# Resources to include
resources:
  # Core Kubernetes resources (relative paths to parent deployment/)
  - ../../deployment.yaml
  - ../../service.yaml
  - ../../configmap.yaml
  - ../../secret.yaml
  - ../../hpa.yaml
  - ../../networkpolicy.yaml
  - ../../ingress.yaml
  - ../../servicemonitor.yaml

  # New production-grade resources
  - ../../pdb.yaml
  - ../../serviceaccount.yaml
  - ../../resourcequota.yaml
  - ../../limitrange.yaml

# ConfigMap generator (for environment-agnostic configuration)
configMapGenerator:
  - name: gl-002-base-config
    literals:
      - app_name=GL-002 BoilerEfficiencyOptimizer
      - app_version=1.0.0
      - deployment_tool=kustomize

# Secret generator (for base secrets - override in overlays)
secretGenerator:
  - name: gl-002-base-secrets
    type: Opaque
    literals:
      - placeholder=REPLACE_IN_OVERLAYS

# Images (for version management)
images:
  - name: gcr.io/greenlang/gl-002-boiler-efficiency
    newTag: 1.0.0

# Replicas (override in overlays)
replicas:
  - name: gl-002-boiler-efficiency
    count: 3

# Resource transformers
# Apply resource limits across all deployments
# replicas:
#   - name: gl-002-boiler-efficiency
#     count: 3

# Patches (optional - for advanced transformations)
# patches:
#   - path: patch-resource-limits.yaml
#     target:
#       kind: Deployment
#       name: gl-002-boiler-efficiency
