# GL-010 EMISSIONWATCH EmissionsComplianceAgent - Python Dependencies
# Production-grade dependency list with pinned versions for reproducible builds
# Supports EPA 40 CFR Part 75, EU ETS, and ISO 14064 compliance
# Last updated: 2025-11-26

# =============================================================================
# Core Framework & Web Server
# =============================================================================
fastapi>=0.104.0,<0.105.0
uvicorn[standard]>=0.24.0,<0.25.0
uvloop>=0.19.0,<0.20.0  # High-performance event loop
httptools>=0.6.1,<0.7.0
python-multipart>=0.0.6,<0.1.0
websockets>=12.0,<13.0  # Real-time emissions monitoring
starlette>=0.32.0,<0.33.0

# =============================================================================
# Data Validation & Settings
# =============================================================================
pydantic>=2.5.0,<3.0.0
pydantic-settings>=2.1.0,<3.0.0
email-validator>=2.1.0,<3.0.0

# =============================================================================
# Scientific Computing & Numerical Analysis
# =============================================================================
numpy>=1.26.0,<2.0.0
scipy>=1.11.0,<2.0.0
pandas>=2.1.0,<3.0.0
sympy>=1.12.0,<2.0.0  # Symbolic mathematics for emissions calculations

# Statistical analysis for emissions data
statsmodels>=0.14.0,<0.15.0
scikit-learn>=1.3.0,<2.0.0  # Anomaly detection in emissions data

# =============================================================================
# Emissions Calculations & Environmental Science
# =============================================================================
# Atmospheric chemistry calculations
chempy>=0.8.0,<0.9.0  # Chemical equilibria and kinetics

# Unit conversions for emissions (ppm, mg/m3, tons)
pint>=0.23.0,<0.24.0  # Physical quantities with units
uncertainties>=3.1.7,<4.0.0  # Error propagation in measurements

# Time series analysis for emissions trends
arch>=6.2.0,<7.0.0  # Time series analysis
pmdarima>=2.0.4,<3.0.0  # ARIMA modeling for emissions forecasting

# =============================================================================
# Regulatory Compliance & Reporting
# =============================================================================
# XML processing for EPA and EU ETS reports
lxml>=4.9.3,<5.0.0
xmltodict>=0.13.0,<0.14.0
defusedxml>=0.7.1,<0.8.0  # Secure XML parsing

# PDF report generation for compliance documents
reportlab>=4.0.7,<5.0.0
fpdf2>=2.7.6,<3.0.0
weasyprint>=60.1,<61.0.0  # HTML to PDF conversion
jinja2>=3.1.2,<4.0.0  # Template engine for reports

# Excel export for regulatory submissions
openpyxl>=3.1.2,<4.0.0
xlsxwriter>=3.1.9,<4.0.0

# =============================================================================
# Data Visualization
# =============================================================================
plotly>=5.18.0,<6.0.0
matplotlib>=3.8.0,<4.0.0
seaborn>=0.13.0,<0.14.0
kaleido>=0.2.1,<0.3.0  # Static image export for Plotly

# =============================================================================
# Industrial Protocols & CEMS Integration
# =============================================================================
# Modbus protocol (RTU, TCP, ASCII) - CEMS communication
pymodbus>=3.5.0,<4.0.0
pyserial>=3.5,<4.0  # Serial communication for CEMS

# OPC UA (industrial automation standard)
asyncua>=1.0.0,<2.0.0
opcua-crypto>=0.1.0,<0.2.0

# MQTT (IoT messaging protocol)
paho-mqtt>=2.0.0,<3.0.0
aiomqtt>=1.2.1,<2.0.0  # Async MQTT client

# BACnet (building automation)
bacpypes3>=0.0.80,<0.1.0

# DNP3 (Distributed Network Protocol for SCADA)
pydnp3>=0.1.0,<0.2.0

# =============================================================================
# Database & Caching
# =============================================================================
# PostgreSQL (async) - primary emissions data store
asyncpg>=0.29.0,<0.30.0
psycopg2-binary>=2.9.9,<3.0.0

# TimescaleDB support for time-series emissions data
# Uses asyncpg with TimescaleDB extension

# Redis (caching and message broker)
redis>=5.0.1,<6.0.0
hiredis>=2.2.3,<3.0.0  # C parser for Redis protocol

# SQLAlchemy (ORM)
sqlalchemy[asyncio]>=2.0.23,<3.0.0
alembic>=1.13.0,<2.0.0  # Database migrations

# InfluxDB (optional time-series database)
influxdb-client>=1.39.0,<2.0.0

# =============================================================================
# Authentication & Security
# =============================================================================
python-jose[cryptography]>=3.3.0,<4.0.0
passlib[bcrypt]>=1.7.4,<2.0.0
bcrypt>=4.1.1,<5.0.0
cryptography>=41.0.0,<42.0.0
pyjwt>=2.8.0,<3.0.0

# Digital signatures for compliance reports
pyhanko>=0.21.0,<0.22.0  # PDF signing for regulatory submissions

# =============================================================================
# API Clients for Regulatory Systems
# =============================================================================
# HTTP clients for EPA CDX, EU ETS registry
httpx>=0.25.2,<0.26.0
aiohttp>=3.9.1,<4.0.0

# SOAP client for legacy regulatory systems
zeep>=4.2.1,<5.0.0

# FTP/SFTP for regulatory file submissions
paramiko>=3.4.0,<4.0.0
asyncssh>=2.14.1,<3.0.0

# =============================================================================
# Monitoring & Observability
# =============================================================================
# Prometheus metrics
prometheus-client>=0.19.0,<0.20.0
prometheus-fastapi-instrumentator>=6.1.0,<7.0.0

# OpenTelemetry (distributed tracing)
opentelemetry-api>=1.21.0,<2.0.0
opentelemetry-sdk>=1.21.0,<2.0.0
opentelemetry-instrumentation-fastapi>=0.42b0,<0.43b0
opentelemetry-exporter-prometheus>=0.42b0,<0.43b0
opentelemetry-exporter-jaeger>=1.21.0,<2.0.0
opentelemetry-instrumentation-sqlalchemy>=0.42b0,<0.43b0
opentelemetry-instrumentation-redis>=0.42b0,<0.43b0

# Structured logging
structlog>=23.2.0,<24.0.0
python-json-logger>=2.0.7,<3.0.0

# Application Performance Monitoring
sentry-sdk[fastapi]>=1.39.1,<2.0.0

# =============================================================================
# Task Queue & Background Jobs
# =============================================================================
celery>=5.3.4,<6.0.0
kombu>=5.3.4,<6.0.0  # AMQP messaging
flower>=2.0.1,<3.0.0  # Celery monitoring

# APScheduler for scheduled compliance reports
apscheduler>=3.10.4,<4.0.0

# =============================================================================
# Async Utilities
# =============================================================================
aiofiles>=23.2.1,<24.0.0
anyio>=4.1.0,<5.0.0
asyncio-throttle>=1.0.2,<2.0.0  # Rate limiting for CEMS polling

# =============================================================================
# Testing & Quality Assurance
# =============================================================================
pytest>=7.4.0,<8.0.0
pytest-asyncio>=0.21.0,<0.22.0
pytest-cov>=4.1.0,<5.0.0
pytest-mock>=3.12.0,<4.0.0
pytest-timeout>=2.2.0,<3.0.0
pytest-xdist>=3.5.0,<4.0.0  # Parallel test execution
pytest-benchmark>=4.0.0,<5.0.0  # Performance benchmarking

# HTTP testing
respx>=0.20.2,<0.21.0

# Mocking and fixtures
factory-boy>=3.3.0,<4.0.0
faker>=20.1.0,<21.0.0

# Property-based testing for emissions calculations
hypothesis>=6.92.0,<7.0.0

# =============================================================================
# Code Quality & Linting
# =============================================================================
ruff>=0.1.8,<0.2.0  # Fast Python linter
black>=23.12.0,<24.0.0  # Code formatter
isort>=5.13.0,<6.0.0  # Import sorter
mypy>=1.7.0,<2.0.0  # Static type checker

# Type stubs for type checking
types-redis>=4.6.0,<5.0.0
types-requests>=2.31.0,<3.0.0
pandas-stubs>=2.1.1,<3.0.0

# =============================================================================
# Configuration & Environment Management
# =============================================================================
python-dotenv>=1.0.0,<2.0.0
pyyaml>=6.0.1,<7.0.0
toml>=0.10.2,<0.11.0
dynaconf>=3.2.4,<4.0.0  # Advanced configuration management

# =============================================================================
# CLI & Development Tools
# =============================================================================
click>=8.1.7,<9.0.0
rich>=13.7.0,<14.0.0  # Beautiful terminal output
typer>=0.9.0,<0.10.0  # CLI framework
tqdm>=4.66.1,<5.0.0  # Progress bars

# =============================================================================
# Date & Time Utilities
# =============================================================================
python-dateutil>=2.8.2,<3.0.0
pytz>=2023.3
arrow>=1.3.0,<2.0.0
pendulum>=3.0.0,<4.0.0  # Better datetime handling

# =============================================================================
# Data Quality & Validation
# =============================================================================
great-expectations>=0.18.3,<0.19.0  # Data quality validation
pandera>=0.17.2,<0.18.0  # DataFrame validation

# =============================================================================
# Utilities & Helpers
# =============================================================================
tenacity>=8.2.3,<9.0.0  # Retry logic for CEMS communication
cachetools>=5.3.2,<6.0.0  # Caching utilities
python-slugify>=8.0.1,<9.0.0
humanize>=4.9.0,<5.0.0  # Human-readable numbers
orjson>=3.9.10,<4.0.0  # Fast JSON parsing
msgpack>=1.0.7,<2.0.0  # Binary serialization

# =============================================================================
# GreenLang Core Dependencies
# =============================================================================
# GreenLang determinism and provenance tracking
# greenlang-core>=1.0.0,<2.0.0  # Internal package

# =============================================================================
# Development Dependencies (Optional - install with pip install -e ".[dev]")
# =============================================================================
# ipython>=8.18.0,<9.0.0
# jupyter>=1.0.0,<2.0.0
# notebook>=7.0.6,<8.0.0
# jupyterlab>=4.0.9,<5.0.0
