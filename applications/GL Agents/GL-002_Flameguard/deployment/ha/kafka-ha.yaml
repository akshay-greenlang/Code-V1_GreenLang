# GL-002 Flameguard - Kafka HA Configuration
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: gl-002-kafka-topics
  namespace: greenlang
data:
  topics.sh: |
    #!/bin/bash
    BOOTSTRAP_SERVER="kafka-0.kafka-headless.greenlang.svc.cluster.local:9092"

    # GL-002 Flameguard topics
    kafka-topics.sh --create --if-not-exists --bootstrap-server $BOOTSTRAP_SERVER \
      --topic flameguard.process-data --partitions 4 --replication-factor 3

    kafka-topics.sh --create --if-not-exists --bootstrap-server $BOOTSTRAP_SERVER \
      --topic flameguard.optimization --partitions 4 --replication-factor 3

    kafka-topics.sh --create --if-not-exists --bootstrap-server $BOOTSTRAP_SERVER \
      --topic flameguard.safety --partitions 4 --replication-factor 3

    kafka-topics.sh --create --if-not-exists --bootstrap-server $BOOTSTRAP_SERVER \
      --topic flameguard.efficiency --partitions 4 --replication-factor 3

    kafka-topics.sh --create --if-not-exists --bootstrap-server $BOOTSTRAP_SERVER \
      --topic flameguard.emissions --partitions 4 --replication-factor 3

    kafka-topics.sh --create --if-not-exists --bootstrap-server $BOOTSTRAP_SERVER \
      --topic flameguard.audit --partitions 8 --replication-factor 3 \
      --config retention.ms=220752000000
---
# Note: GL-002 shares Kafka cluster with other GL agents
# This configures only GL-002 specific topics
# See shared-infrastructure/kafka-ha.yaml for cluster configuration
