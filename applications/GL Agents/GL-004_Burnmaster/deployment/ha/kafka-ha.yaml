# GL-004 Burnmaster - Kafka Topics Configuration
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: gl-004-kafka-topics
  namespace: greenlang
data:
  topics.sh: |
    #!/bin/bash
    BOOTSTRAP_SERVER="kafka-0.kafka-headless.greenlang.svc.cluster.local:9092"

    # GL-004 Burnmaster topics
    kafka-topics.sh --create --if-not-exists --bootstrap-server $BOOTSTRAP_SERVER \
      --topic burnmaster.combustion.data --partitions 4 --replication-factor 3

    kafka-topics.sh --create --if-not-exists --bootstrap-server $BOOTSTRAP_SERVER \
      --topic burnmaster.optimization --partitions 4 --replication-factor 3

    kafka-topics.sh --create --if-not-exists --bootstrap-server $BOOTSTRAP_SERVER \
      --topic burnmaster.emissions --partitions 4 --replication-factor 3

    kafka-topics.sh --create --if-not-exists --bootstrap-server $BOOTSTRAP_SERVER \
      --topic burnmaster.diagnostics --partitions 4 --replication-factor 3

    kafka-topics.sh --create --if-not-exists --bootstrap-server $BOOTSTRAP_SERVER \
      --topic burnmaster.audit --partitions 8 --replication-factor 3 \
      --config retention.ms=220752000000
