# GreenLang Database Credentials Secret
# IMPORTANT: In production, use external secret management (AWS Secrets Manager, HashiCorp Vault, etc.)
# This file is for reference only - actual secrets should NOT be committed to git
apiVersion: v1
kind: Secret
metadata:
  name: db-credentials
  namespace: greenlang-production
  labels:
    app.kubernetes.io/name: greenlang
    app.kubernetes.io/instance: production
    app.kubernetes.io/component: secret
    app.kubernetes.io/part-of: greenlang-platform
  annotations:
    description: "Database credentials - Use external secrets in production"
    # External secrets operator annotations (if using)
    # externalsecrets.kubernetes.io/refresh-interval: "1h"
type: Opaque
# Values below are base64 encoded placeholders - REPLACE IN PRODUCTION
# To encode: echo -n 'your-value' | base64
stringData:
  # PostgreSQL credentials
  DATABASE_USER: "greenlang_app"
  DATABASE_PASSWORD: "CHANGE_ME_IN_PRODUCTION"
  DATABASE_URL: "postgresql://greenlang_app:CHANGE_ME_IN_PRODUCTION@postgresql-service:5432/greenlang"

  # Redis credentials (if authentication enabled)
  REDIS_PASSWORD: "CHANGE_ME_IN_PRODUCTION"
  REDIS_URL: "redis://:CHANGE_ME_IN_PRODUCTION@redis-service:6379/0"

  # Connection strings for services
  GREENLANG_DATABASE_URL: "postgresql://greenlang_app:CHANGE_ME_IN_PRODUCTION@postgresql-service:5432/greenlang"
  GREENLANG_REDIS_URL: "redis://:CHANGE_ME_IN_PRODUCTION@redis-service:6379/0"
---
# External Secrets template (for AWS Secrets Manager)
# Uncomment and configure if using External Secrets Operator
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: db-credentials-external
#   namespace: greenlang-production
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: aws-secrets-manager
#     kind: ClusterSecretStore
#   target:
#     name: db-credentials
#     creationPolicy: Owner
#   data:
#   - secretKey: DATABASE_URL
#     remoteRef:
#       key: greenlang/production/database
#       property: url
#   - secretKey: DATABASE_USER
#     remoteRef:
#       key: greenlang/production/database
#       property: username
#   - secretKey: DATABASE_PASSWORD
#     remoteRef:
#       key: greenlang/production/database
#       property: password
#   - secretKey: REDIS_URL
#     remoteRef:
#       key: greenlang/production/redis
#       property: url
