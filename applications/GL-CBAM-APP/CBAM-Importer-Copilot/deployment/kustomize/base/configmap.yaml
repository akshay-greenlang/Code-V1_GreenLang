# ============================================================================
# GL-CBAM-APP - Base ConfigMap
# ============================================================================
# Base configuration data (environment-specific values in overlays)
# ============================================================================

apiVersion: v1
kind: ConfigMap
metadata:
  name: cbam-api-config
data:
  # Application settings
  APP_ENV: "production"
  LOG_LEVEL: "INFO"

  # API settings
  API_TITLE: "GL-CBAM-APP API"
  API_DESCRIPTION: "GreenLang CBAM Importer Copilot - Backend API"
  API_PREFIX: "/api/v1"

  # Database settings (non-sensitive)
  DB_POOL_SIZE: "10"
  DB_MAX_OVERFLOW: "20"
  DB_POOL_TIMEOUT: "30"
  DB_POOL_RECYCLE: "3600"
  DB_ECHO: "false"

  # Redis settings (non-sensitive)
  REDIS_DB: "0"
  REDIS_MAX_CONNECTIONS: "50"
  REDIS_DECODE_RESPONSES: "true"

  # CORS settings
  CORS_ALLOW_CREDENTIALS: "true"
  CORS_ALLOW_METHODS: "GET,POST,PUT,DELETE,OPTIONS,PATCH"
  CORS_ALLOW_HEADERS: "Content-Type,Authorization,X-Requested-With"

  # File upload settings
  MAX_UPLOAD_SIZE_MB: "100"
  UPLOAD_DIR: "/app/uploads"
  ALLOWED_UPLOAD_EXTENSIONS: ".csv,.xlsx,.json,.yaml"

  # Performance settings
  WORKER_PROCESSES: "4"
  WORKER_TIMEOUT: "120"
  KEEP_ALIVE: "5"
  MAX_REQUESTS: "1000"
  MAX_REQUESTS_JITTER: "100"

  # Feature flags
  ENABLE_API_DOCS: "true"
  ENABLE_METRICS: "true"
  ENABLE_TRACING: "false"
  ENABLE_RATE_LIMITING: "true"
  ENABLE_CACHING: "true"

  # Rate limiting
  RATE_LIMIT_PER_MINUTE: "60"
  RATE_LIMIT_PER_HOUR: "1000"

  # JWT settings (non-sensitive)
  JWT_ALGORITHM: "HS256"
  ACCESS_TOKEN_EXPIRE_MINUTES: "30"
  REFRESH_TOKEN_EXPIRE_DAYS: "7"

  # Logging
  LOG_FORMAT: "json"
  LOG_DATE_FORMAT: "%Y-%m-%d %H:%M:%S"
  LOG_MAX_BYTES: "10485760"
  LOG_BACKUP_COUNT: "5"

  # CBAM specific
  DEFAULT_QUARTER: "Q4-2024"
  CBAM_REGISTRY_URL: "https://cbam-registry.ec.europa.eu"
