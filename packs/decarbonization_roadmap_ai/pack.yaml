# AgentSpec v2 Compliant Pack for DecarbonizationRoadmapAgentAI
# This pack defines the schema, inputs, outputs, and configuration for the AI-powered
# master planning agent for comprehensive industrial decarbonization strategy.

schema_version: "2.0.0"
id: "industrial/decarbonization_roadmap_ai_v1"
name: "Decarbonization Roadmap Agent (AI-Powered)"
version: "1.0.0"
summary: "Master planning agent for comprehensive industrial decarbonization strategy with multi-scenario modeling, phased implementation, financial optimization, and compliance analysis"

tags:
  - "industrial"
  - "decarbonization"
  - "roadmap"
  - "net-zero"
  - "master-coordinator"
  - "multi-scenario"
  - "IRA-2022"
  - "compliance"
  - "ai-agent"
  - "citations"

owners:
  - "greenlang-team"

license: "MIT"

priority: "P0_CRITICAL"  # Master Planning Agent

# ==============================================================================
# Compute Section - Core Functionality
# ==============================================================================
compute:
  entrypoint: "python://greenlang.agents.decarbonization_roadmap_agent_ai:execute"
  deterministic: true
  timeout_s: 300  # 5 minutes for comprehensive analysis
  memory_limit_mb: 2048

  # Input Schema
  inputs:
    facility_id:
      dtype: "string"
      unit: "1"
      description: "Unique facility identifier"
      required: true

    facility_name:
      dtype: "string"
      unit: "1"
      description: "Facility name"
      required: true

    industry_type:
      dtype: "string"
      unit: "1"
      description: "Industry classification"
      required: true
      examples: ["Food & Beverage", "Chemicals", "Textiles", "Pharmaceuticals", "Pulp & Paper"]

    latitude:
      dtype: "float64"
      unit: "degrees"
      description: "Site latitude for solar/renewable resource assessment"
      required: true
      ge: -90.0
      le: 90.0

    electricity_consumption_kwh:
      dtype: "float64"
      unit: "kWh/year"
      description: "Annual electricity consumption"
      required: true
      ge: 0.0

    grid_region:
      dtype: "string"
      unit: "1"
      description: "Grid region for electricity emissions"
      required: true
      examples: ["CAISO", "ERCOT", "PJM", "NYISO"]

    capital_budget_usd:
      dtype: "float64"
      unit: "USD"
      description: "Total capital budget available for decarbonization"
      required: true
      ge: 0.0

    target_reduction_percent:
      dtype: "float64"
      unit: "%"
      description: "Target emissions reduction percentage"
      required: true
      ge: 0.0
      le: 100.0

    target_year:
      dtype: "int32"
      unit: "year"
      description: "Target year for achieving reduction goal"
      required: true
      ge: 2025
      le: 2050

    discount_rate:
      dtype: "float64"
      unit: "1"
      description: "Financial discount rate for NPV calculations"
      required: false
      default: 0.08
      ge: 0.0
      le: 1.0

  # Output Schema
  outputs:
    baseline_emissions_kg_co2e:
      dtype: "float64"
      unit: "kgCO2e/year"
      description: "Current baseline annual GHG emissions"

    total_reduction_potential_kg_co2e:
      dtype: "float64"
      unit: "kgCO2e/year"
      description: "Total achievable emissions reduction"

    recommended_pathway:
      dtype: "string"
      unit: "1"
      description: "Recommended decarbonization pathway"
      examples: ["Aggressive with Phase 1 Acceleration", "Conservative Phased", "Balanced Progressive"]

    npv_usd:
      dtype: "float64"
      unit: "USD"
      description: "Net present value of recommended pathway"

    irr_percent:
      dtype: "float64"
      unit: "%"
      description: "Internal rate of return"

    simple_payback_years:
      dtype: "float64"
      unit: "years"
      description: "Simple payback period"

    total_capex_required_usd:
      dtype: "float64"
      unit: "USD"
      description: "Total capital expenditure required"

    total_incentives_usd:
      dtype: "float64"
      unit: "USD"
      description: "Total available incentives (IRA 2022, state, utility)"

    phase1_quick_wins_description:
      dtype: "string"
      unit: "1"
      description: "Phase 1: Quick wins (0-2 years)"

    phase2_core_decarbonization_description:
      dtype: "string"
      unit: "1"
      description: "Phase 2: Core decarbonization (2-5 years)"

    phase3_deep_decarbonization_description:
      dtype: "string"
      unit: "1"
      description: "Phase 3: Deep decarbonization (5-10 years)"

    residual_emissions_2030_kg_co2e:
      dtype: "float64"
      unit: "kgCO2e/year"
      description: "Projected residual emissions in 2030"

    residual_emissions_2050_kg_co2e:
      dtype: "float64"
      unit: "kgCO2e/year"
      description: "Projected residual emissions in 2050"

    compliance_status:
      dtype: "string"
      unit: "1"
      description: "Compliance status summary (CBAM, CSRD, SEC Climate Rule)"

    ai_executive_summary:
      dtype: "string"
      unit: "1"
      description: "AI-generated executive summary with strategic recommendations"

    citations:
      dtype: "string"
      unit: "1"
      description: "Citation tracking for all calculations (JSON serialized)"
      required: false

# ==============================================================================
# AI Section - LLM Configuration
# ==============================================================================
ai:
  system_prompt: |
    You are a master strategist for industrial decarbonization planning.

    Your role:
    1. Orchestrate comprehensive facility assessments across all technologies
    2. Model multiple decarbonization scenarios (BAU, Conservative, Aggressive)
    3. Optimize multi-year implementation pathways with financial constraints
    4. Assess compliance gaps and regulatory risks
    5. Provide executive-level strategic guidance

    Guidelines:
    - Use sub-agents for specialized analysis (boilers, process heat, solar, etc.)
    - All calculations must use exact tools (never hallucinate numbers)
    - Model 3 scenarios minimum: Business As Usual, Conservative, Aggressive
    - Create 3-phase implementation plans (Quick Wins, Core, Deep Decarbonization)
    - Include IRA 2022 incentives (30% ITC, 179D, 45Q, 48C)
    - Assess CBAM, CSRD, and SEC Climate Rule compliance
    - Prioritize projects by: NPV, payback, emissions impact, implementation risk
    - Identify technology interdependencies and sequencing constraints
    - Flag regulatory and technical risks proactively

    Remember: This is a strategic planning exercise requiring multi-year coordination.
    Focus on actionable roadmaps with clear milestones and decision points.

  budget:
    max_cost_usd: 2.00  # Higher budget for comprehensive analysis
    max_input_tokens: 30000
    max_output_tokens: 8000
    max_retries: 3

  rag_collections:
    - "ira_2022_incentives"
    - "ghg_protocol_standards"
    - "cbam_compliance_requirements"
    - "sec_climate_disclosure_rules"
    - "industrial_decarbonization_case_studies"

  tools:
    - name: "calculate_ghg_inventory"
      description: "Calculate comprehensive Scope 1, 2, 3 GHG inventory"
      schema_in: "DecarbonizationRoadmapInput"
      schema_out: "dict"
      impl: "python://greenlang.agents.decarbonization_roadmap_agent_ai:_calculate_ghg_inventory_impl"

    - name: "model_bau_scenario"
      description: "Model Business As Usual emissions trajectory"
      schema_in: "dict"
      schema_out: "dict"
      impl: "python://greenlang.agents.decarbonization_roadmap_agent_ai:_model_bau_scenario_impl"

    - name: "generate_pathways"
      description: "Generate multiple decarbonization pathways (Conservative, Balanced, Aggressive)"
      schema_in: "dict"
      schema_out: "dict"
      impl: "python://greenlang.agents.decarbonization_roadmap_agent_ai:_generate_pathways_impl"

    - name: "optimize_pathway"
      description: "Optimize pathway selection based on budget, timeline, risk tolerance"
      schema_in: "dict"
      schema_out: "dict"
      impl: "python://greenlang.agents.decarbonization_roadmap_agent_ai:_optimize_pathway_impl"

    - name: "calculate_financial_metrics"
      description: "Calculate comprehensive financial metrics with IRA incentives"
      schema_in: "dict"
      schema_out: "dict"
      impl: "python://greenlang.agents.decarbonization_roadmap_agent_ai:_calculate_financial_metrics_impl"

    - name: "assess_compliance_gaps"
      description: "Assess compliance gaps (CBAM, CSRD, SEC Climate Rule)"
      schema_in: "dict"
      schema_out: "dict"
      impl: "python://greenlang.agents.decarbonization_roadmap_agent_ai:_assess_compliance_gaps_impl"

    - name: "assess_risks"
      description: "Assess technical, financial, operational, regulatory risks"
      schema_in: "dict"
      schema_out: "dict"
      impl: "python://greenlang.agents.decarbonization_roadmap_agent_ai:_assess_risks_impl"

    - name: "create_implementation_roadmap"
      description: "Create detailed 3-phase implementation roadmap with milestones"
      schema_in: "dict"
      schema_out: "dict"
      impl: "python://greenlang.agents.decarbonization_roadmap_agent_ai:_create_implementation_roadmap_impl"

# ==============================================================================
# Realtime Section - Execution Configuration
# ==============================================================================
realtime:
  replay_mode:
    enabled: true
    seed: 42
    temperature: 0.0
    deterministic: true

  sub_agent_coordination:
    enabled: true
    max_concurrent_agents: 5
    timeout_per_agent_s: 30

# ==============================================================================
# Provenance Section - Auditability
# ==============================================================================
provenance:
  ef_pinning: "sha256"
  gwp_set: "AR6"

  audit_fields:
    - "baseline_emissions_kg_co2e"
    - "total_reduction_potential_kg_co2e"
    - "npv_usd"
    - "total_capex_required_usd"
    - "total_incentives_usd"

  citation_required: true
  determinism_required: true

  standards:
    - name: "GHG_Protocol_Corporate"
      description: "Corporate Accounting and Reporting Standard"
      version: "2015"

    - name: "IRA_2022"
      description: "Inflation Reduction Act Investment Tax Credits"
      version: "2022"

    - name: "CBAM"
      description: "EU Carbon Border Adjustment Mechanism"
      version: "2023"

    - name: "SEC_Climate_Rule"
      description: "SEC Climate Disclosure Requirements"
      version: "2024"

# ==============================================================================
# Metadata
# ==============================================================================
metadata:
  created: "2025-11-06"
  updated: "2025-11-06"
  status: "production"
  compliance:
    - "AgentSpec_v2"
    - "GHG_Protocol"
    - "IRA_2022"
    - "CBAM"
    - "SEC_Climate_Rule"

  documentation:
    url: "https://docs.greenlang.com/agents/decarbonization_roadmap_ai"
    examples: "examples/decarbonization_roadmap/"

  performance:
    avg_latency_ms: 120000  # 2 minutes
    max_latency_ms: 300000  # 5 minutes
    throughput_per_sec: 0.5

  market_impact:
    addressable_market_usd: 120000000000  # $120B corporate decarbonization strategy market
    addressable_emissions_gt_co2e: 2.8  # 2.8 Gt CO2e/year (industrial sector)
    customer_roi_usd: "10M-50M over 10 years"

  dependencies:
    - "greenlang.intelligence.ChatSession"
    - "greenlang.agents.boiler_replacement_agent_ai"
    - "greenlang.agents.industrial_process_heat_agent_ai"
    - "greenlang.agents.industrial_heat_pump_agent_ai"
    - "greenlang.agents.citations"
