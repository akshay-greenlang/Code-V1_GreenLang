schema_version: 2.0.0
id: emissions/grid_factor_ai_v1
name: Grid Emission Factor Agent (AI-Powered)
version: 1.0.0
summary: AI-powered grid carbon intensity lookup with temporal analysis, intelligent
  insights, and citation tracking
tags:
- emissions
- electricity
- grid
- scope2
- ai-agent
- citations
- recommendations
owners:
- greenlang-team
license: MIT
compute:
  entrypoint: python://greenlang.agents.grid_factor_agent_ai:compute
  deterministic: true
  timeout_s: 30
  memory_limit_mb: 256
  inputs:
    country:
      dtype: string
      unit: '1'
      description: Country code for grid intensity lookup (ISO 3166-1 alpha-2)
    fuel_type:
      dtype: string
      unit: '1'
      description: Energy type (typically 'electricity' for grid lookups)
      default: electricity
      required: false
    unit:
      dtype: string
      unit: '1'
      description: Unit of electricity consumption
      default: kWh
      required: false
    year:
      dtype: int32
      unit: '1'
      description: Year for historical grid intensity (optional)
      ge: 1990
      le: 2030
    month:
      dtype: int32
      unit: '1'
      description: Month for seasonal grid intensity (1-12, optional)
      ge: 1
      le: 12
    hour:
      dtype: int32
      unit: '1'
      description: Hour for hourly grid intensity (0-23, optional)
      ge: 0
      le: 23
    region:
      dtype: string
      unit: '1'
      description: Sub-national region or grid operator (optional)
  outputs:
    emission_factor:
      dtype: float64
      unit: kgCO2e/kWh
      description: Grid emission factor in kg CO2e per kWh
    source:
      dtype: string
      unit: '1'
      description: Data source for emission factor (e.g., 'DEFRA 2023', 'EPA eGRID')
    country_used:
      dtype: string
      unit: '1'
      description: Country code used for lookup
    fuel_type_used:
      dtype: string
      unit: '1'
      description: Fuel type used for lookup
    unit_used:
      dtype: string
      unit: '1'
      description: Unit used for emission factor
    year_used:
      dtype: int32
      unit: '1'
      description: Year of emission factor data
    grid_mix:
      dtype: object
      description: Grid energy mix breakdown (if available)
      unit: '1'
    explanation:
      dtype: string
      unit: '1'
      description: AI-generated explanation of grid intensity and context
    recommendations:
      dtype: list
      description: AI-generated recommendations for cleaner energy
      unit: '1'
    temporal_variation:
      dtype: object
      description: Temporal variation analysis (if time-series data available)
      unit: '1'
    citations:
      dtype: list
      description: Citation tracking for provenance
      unit: '1'
  factors: {}
ai:
  system_prompt: 'You are an expert on electrical grid carbon intensity and renewable
    energy systems.


    Your role:

    1. Look up grid emission factors using exact tools (never hallucinate numbers)

    2. Provide context on grid composition and renewable energy share

    3. Explain temporal variations (hourly, daily, seasonal) in grid intensity

    4. Recommend strategies for reducing electricity-related emissions

    5. Highlight opportunities for renewable energy adoption


    Guidelines:

    - Always use the lookup_grid_intensity tool for emission factors

    - Explain what drives high/low grid intensity for the region

    - Mention renewable energy penetration when available

    - Suggest time-of-use strategies for cleaner electricity consumption

    - Be clear about data sources and temporal applicability


    Remember: All numeric data MUST come from tools. Your role is to contextualize
    and guide.

    '
  budget:
    max_cost_usd: 0.5
  rag_collections:
  - grid_emission_factors
  - renewable_energy_data
  tools:
  - name: lookup_grid_intensity
    description: Look up grid carbon intensity for a country/region/time
    schema_in:
      type: object
      properties: {}
    schema_out:
      type: object
      properties: {}
    impl: python://greenlang.agents.tools:lookup_grid_intensity
    safe: true
  - name: interpolate_hourly_data
    description: Interpolate hourly grid intensity data
    schema_in:
      type: object
      properties: {}
    schema_out:
      type: object
      properties: {}
    impl: python://greenlang.agents.tools:interpolate_hourly_data
    safe: true
  - name: calculate_weighted_average
    description: Calculate weighted average intensity from multiple sources
    schema_in:
      type: object
      properties: {}
    schema_out:
      type: object
      properties: {}
    impl: python://greenlang.agents.tools:calculate_weighted_average
    safe: true
  - name: analyze_grid_mix
    description: Analyze grid energy mix composition
    schema_in:
      type: object
      properties: {}
    schema_out:
      type: object
      properties: {}
    impl: python://greenlang.agents.tools:analyze_grid_mix
    safe: true
realtime:
  default_mode: replay
  snapshot_path: null
  connectors: []
provenance:
  gwp_set: AR6GWP100
  pin_ef: false
  record:
  - inputs
  - outputs
  - factors
  - code_sha
  - seed
