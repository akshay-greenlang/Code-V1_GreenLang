---
# Example: How to create sealed secrets
# 1. Install kubeseal CLI: https://github.com/bitnami-labs/sealed-secrets
# 2. Create a secret YAML file (don't commit!)
# 3. Seal it: kubeseal -f secret.yaml -w sealed-secret.yaml
# 4. Commit the sealed-secret.yaml (safe to commit)

# Template for backend secrets (seal this before committing)
apiVersion: v1
kind: Secret
metadata:
  name: vcci-backend-secrets
  namespace: vcci-platform
type: Opaque
stringData:
  database-url: "postgresql://vcci:CHANGE_ME@postgresql:5432/vcci"
  redis-url: "redis://:CHANGE_ME@redis:6379/0"
  weaviate-api-key: "CHANGE_ME"
  jwt-secret: "CHANGE_ME"
  openai-api-key: "CHANGE_ME"
  anthropic-api-key: "CHANGE_ME"

---
# Template for PostgreSQL secrets
apiVersion: v1
kind: Secret
metadata:
  name: postgresql-secrets
  namespace: vcci-platform
type: Opaque
stringData:
  username: "vcci"
  password: "CHANGE_ME"
  exporter-dsn: "postgresql://vcci_monitor:CHANGE_ME@localhost:5432/vcci?sslmode=disable"

---
# Template for Redis secrets
apiVersion: v1
kind: Secret
metadata:
  name: redis-secrets
  namespace: vcci-platform
type: Opaque
stringData:
  password: "CHANGE_ME"

---
# Template for Grafana secrets
apiVersion: v1
kind: Secret
metadata:
  name: grafana-secrets
  namespace: vcci-observability
type: Opaque
stringData:
  admin-user: "admin"
  admin-password: "CHANGE_ME"

---
# Instructions for using Sealed Secrets:
#
# 1. Install Sealed Secrets controller:
#    kubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.24.0/controller.yaml
#
# 2. Install kubeseal CLI:
#    wget https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.24.0/kubeseal-linux-amd64
#    sudo install -m 755 kubeseal-linux-amd64 /usr/local/bin/kubeseal
#
# 3. Create your secret:
#    kubectl create secret generic vcci-backend-secrets \
#      --from-literal=database-url="postgresql://..." \
#      --from-literal=redis-url="redis://..." \
#      --dry-run=client -o yaml > secret.yaml
#
# 4. Seal the secret:
#    kubeseal -f secret.yaml -w sealed-secret.yaml \
#      --controller-name=sealed-secrets-controller \
#      --controller-namespace=kube-system
#
# 5. Apply the sealed secret:
#    kubectl apply -f sealed-secret.yaml
#
# 6. Delete the original secret file:
#    rm secret.yaml
