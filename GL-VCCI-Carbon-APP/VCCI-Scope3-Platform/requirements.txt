# GL-VCCI-Carbon-APP: Scope 3 Platform Requirements
# Version: 2.0.0 (CTO v2 Strategic Plan)
# Python 3.9+ required, 3.11+ recommended
#
# Installation:
#   pip install -r requirements.txt
#
# Development:
#   pip install -r requirements.txt -r requirements-dev.txt

# ============================================================================
# GREENLANG FRAMEWORK (Core Dependencies)
# ============================================================================
greenlang-core>=0.3.0
greenlang-agents>=0.3.0
greenlang-validation>=0.3.0
greenlang-provenance>=0.3.0
greenlang-io>=0.3.0

# ============================================================================
# DATA PROCESSING & ANALYSIS
# ============================================================================
pandas>=2.1.0,<3.0.0
numpy>=1.24.0,<2.0.0
scipy>=1.11.0  # Statistical analysis, Monte Carlo simulation
openpyxl>=3.1.0  # Excel I/O
xlrd>=2.0.0  # Excel reading (legacy .xls format)
python-dateutil>=2.8.2  # Date parsing and manipulation

# ============================================================================
# VALIDATION & SCHEMAS
# ============================================================================
pydantic>=2.5.0,<3.0.0  # Data validation and settings management
pydantic-settings>=2.1.0  # Settings management with environment variables
jsonschema>=4.20.0  # JSON Schema validation
pyyaml>=6.0  # YAML parsing (schemas, rules, config)

# ============================================================================
# AI/ML & LLM PROVIDERS
# ============================================================================
# LLM providers
anthropic>=0.18.0  # Claude (primary for entity resolution)
openai>=1.10.0  # GPT-4 (alternative LLM provider)

# NLP & Text Processing
spacy>=3.7.0  # NLP for entity extraction
fuzzywuzzy>=0.18.0  # Fuzzy string matching
python-Levenshtein>=0.23.0  # Fast Levenshtein distance (for fuzzywuzzy)

# ML & Forecasting
scikit-learn>=1.3.0  # ML models (classification, regression)
prophet>=1.1.5  # Time series forecasting (Facebook Prophet)

# NEW in v2.0: Sentence Transformers (Entity MDM)
sentence-transformers>=2.2.0  # Sentence embeddings for entity resolution
torch>=2.0.0,<2.2.0  # PyTorch (required by sentence-transformers)
transformers>=4.30.0  # Hugging Face Transformers (required by sentence-transformers)

# ============================================================================
# POLICY ENGINE (NEW in v2.0)
# ============================================================================
# Open Policy Agent (OPA) integration
opa-python>=1.4.0  # OPA Python SDK for policy evaluation
py-rego>=0.2.0  # Rego policy language parser (optional)

# ============================================================================
# WEB FRAMEWORK & API
# ============================================================================
fastapi>=0.104.0,<1.0.0  # Web framework for APIs
uvicorn[standard]>=0.24.0  # ASGI server
pydantic[email]>=2.5.0  # Email validation
python-multipart>=0.0.6  # File upload support
httpx>=0.25.0  # Async HTTP client

# ============================================================================
# DATABASE DRIVERS
# ============================================================================
# PostgreSQL
psycopg2-binary>=2.9.0  # PostgreSQL adapter
asyncpg>=0.29.0  # Async PostgreSQL driver
sqlalchemy>=2.0.0  # SQL toolkit and ORM
alembic>=1.13.0  # Database migrations

# Redis
redis>=5.0.0  # Redis Python client
hiredis>=2.3.0  # Fast Redis parser

# Vector Database (Weaviate) - Used by Entity MDM
weaviate-client>=3.26.0  # Weaviate Python client (v2.0: Entity MDM)

# ============================================================================
# CLOUD & STORAGE
# ============================================================================
# AWS
boto3>=1.34.0  # AWS SDK (S3, Secrets Manager)
botocore>=1.34.0

# Azure (optional)
# azure-storage-blob>=12.19.0  # Uncomment if using Azure
# azure-identity>=1.15.0

# GCP (optional)
# google-cloud-storage>=2.14.0  # Uncomment if using GCP

# ============================================================================
# ERP CONNECTORS
# ============================================================================
# SAP S/4HANA
requests>=2.31.0  # HTTP library for SAP OData API
requests-oauthlib>=1.3.1  # OAuth 1.0/2.0 support
zeep>=4.2.1  # SOAP client (for legacy SAP systems)

# Oracle (REST API)
oracledb>=2.0.0  # Oracle Database driver (optional, for direct DB access)

# Workday (REST API)
# Uses requests + requests-oauthlib

# ============================================================================
# ENTITY MDM CONNECTORS (NEW in v2.0)
# ============================================================================
# LEI (Legal Entity Identifier) - GLEIF API
# Uses httpx with custom implementation

# DUNS (Dun & Bradstreet)
# Uses httpx with custom implementation - requires D&B commercial license

# OpenCorporates
# Uses httpx with custom implementation - free tier available

# NOTE: External identifier APIs use httpx (already installed above)
# No additional packages required

# ============================================================================
# PCF EXCHANGE (NEW in v2.0)
# ============================================================================
# PACT Pathfinder v2.0 (WBCSD Product Carbon Footprint Exchange)
# Uses httpx with custom PACT Pathfinder v2.0 implementation

# Catena-X Network (Automotive supply chain)
# Uses httpx with custom implementation

# SAP Sustainability Data Exchange (SAP SDX)
# Uses httpx with custom implementation

# NOTE: PCF Exchange protocols use httpx (already installed above)
# No additional packages required - implementations follow PACT/Catena-X/SAP SDX specs

# ============================================================================
# EMAIL & NOTIFICATIONS
# ============================================================================
sendgrid>=6.10.0  # SendGrid email service
python-dotenv>=1.0.0  # Environment variable management
jinja2>=3.1.2  # Template engine for emails

# ============================================================================
# TASK QUEUE & BACKGROUND JOBS
# ============================================================================
celery>=5.3.0  # Distributed task queue
celery[redis]>=5.3.0  # Redis broker for Celery
flower>=2.0.0  # Celery monitoring tool

# ============================================================================
# VISUALIZATION & REPORTING
# ============================================================================
plotly>=5.18.0  # Interactive visualizations
kaleido>=0.2.1  # Static image export for Plotly
matplotlib>=3.8.0  # Static plots
seaborn>=0.13.0  # Statistical visualizations

# PDF Generation
reportlab>=4.0.0  # PDF generation
pypdf2>=3.0.0  # PDF manipulation

# PowerPoint Generation
python-pptx>=0.6.23  # PowerPoint generation

# XBRL Generation (NEW in v2.0 for ESRS reporting)
python-xbrl>=1.1.1  # XBRL document generation (ESRS ESEF format)

# ============================================================================
# CLI & USER INTERFACE
# ============================================================================
typer[all]>=0.9.0  # CLI framework
rich>=13.7.0  # Beautiful terminal output
click>=8.1.0  # Command-line interface creation
tqdm>=4.66.0  # Progress bars

# ============================================================================
# SECURITY & AUTHENTICATION
# ============================================================================
cryptography>=41.0.0  # Encryption and cryptography
pyjwt>=2.8.0  # JWT token handling
passlib[bcrypt]>=1.7.4  # Password hashing
python-jose[cryptography]>=3.3.0  # JOSE (JWT, JWS, JWE) implementation
defusedxml>=0.7.1  # Secure XML parsing (XXE attack prevention)

# Secrets management
hvac>=2.1.0  # HashiCorp Vault client

# Rate limiting
slowapi>=0.1.9  # Rate limiting for FastAPI

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================
# Metrics
prometheus-client>=0.19.0  # Prometheus metrics

# Logging
structlog>=23.3.0  # Structured logging
python-json-logger>=2.0.7  # JSON logging

# Tracing
opentelemetry-api>=1.22.0  # OpenTelemetry API
opentelemetry-sdk>=1.22.0  # OpenTelemetry SDK
opentelemetry-instrumentation-fastapi>=0.43b0  # FastAPI instrumentation

# Error tracking
sentry-sdk[fastapi]>=1.40.0  # Sentry error tracking

# ============================================================================
# UTILITIES
# ============================================================================
# Date/Time
pytz>=2023.3  # Timezone definitions
arrow>=1.3.0  # Better date/time handling

# Configuration
python-decouple>=3.8  # Separate config from code
dynaconf>=3.2.0  # Configuration management

# Data validation
validators>=0.22.0  # Email, URL, IP validation
phonenumbers>=8.13.0  # Phone number validation

# File handling
chardet>=5.2.0  # Character encoding detection
magic>=0.4.27  # File type detection

# Compression
zstandard>=0.22.0  # Fast compression

# ============================================================================
# TESTING (Development only - see requirements-dev.txt)
# ============================================================================
# Uncomment for development:
# pytest>=7.4.0
# pytest-asyncio>=0.21.0
# pytest-cov>=4.1.0
# pytest-mock>=3.12.0
# httpx>=0.25.0  # For testing FastAPI
# faker>=22.0.0  # Generate fake data for testing

# ============================================================================
# CODE QUALITY (Development only - see requirements-dev.txt)
# ============================================================================
# Uncomment for development:
# black>=23.12.0  # Code formatter
# ruff>=0.1.9  # Fast Python linter
# mypy>=1.8.0  # Static type checker
# isort>=5.13.0  # Import sorting
# pre-commit>=3.6.0  # Git hooks

# ============================================================================
# DOCUMENTATION (Development only - see requirements-dev.txt)
# ============================================================================
# Uncomment for development:
# mkdocs>=1.5.0  # Documentation generator
# mkdocs-material>=9.5.0  # Material theme for MkDocs
# mkdocstrings[python]>=0.24.0  # API docs from docstrings

# ============================================================================
# PINNED VERSIONS (for reproducibility)
# ============================================================================
# To freeze all versions:
#   pip freeze > requirements-pinned.txt
#
# To update all packages:
#   pip install --upgrade -r requirements.txt
#
# To check for outdated packages:
#   pip list --outdated

# ============================================================================
# V2.0 CHANGELOG
# ============================================================================
# Added in v2.0.0 (CTO v2 Strategic Plan):
# - opa-python>=1.4.0 - Policy Engine (OPA) integration
# - py-rego>=0.2.0 - Rego policy parser (optional)
# - sentence-transformers>=2.2.0 - Entity MDM (two-stage resolution)
# - torch>=2.0.0,<2.2.0 - PyTorch for sentence-transformers
# - transformers>=4.30.0 - Hugging Face Transformers
# - python-xbrl>=1.1.1 - XBRL generation for ESRS reporting
#
# Updated in v2.0.0:
# - weaviate-client>=3.26.0 - Used by Entity MDM
# - httpx>=0.25.0 - Used by PCF Exchange, Entity MDM APIs
#
# Notes:
# - LEI/DUNS/OpenCorporates use httpx (no additional packages)
# - PCF Exchange (PACT, Catena-X, SAP SDX) use httpx (no additional packages)
# - Factor Broker uses httpx for runtime API calls (no additional packages)
