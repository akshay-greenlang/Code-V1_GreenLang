[pytest]
# Test configuration with CI-ready settings
addopts = -q -ra --maxfail=1 --durations=20 --color=yes --cov=greenlang --cov-report=xml --junitxml=test-results/junit.xml
testpaths = tests
pythonpath = .

# Markers for test categorization
markers =
    integration: marks tests that hit external services (skipped on CI by default)
    e2e: marks end-to-end tests (skipped on CI by default)
    performance: Performance-critical tests with timing requirements
    timeout: Tests with specific timeout requirements
    example: Human-friendly example tests

# Filter warnings to catch issues early
filterwarnings =
    error
    ignore::DeprecationWarning
    ignore::UserWarning:pkg_resources

# Async mode configuration for 3.10+ compatibility
asyncio_mode = auto

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Timeout for all tests (requires pytest-timeout)
timeout = 300

# Logging (less verbose for CI)
log_cli = false
log_cli_level = WARNING