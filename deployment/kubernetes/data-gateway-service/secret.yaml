# =============================================================================
# GreenLang Data Gateway Service - Secrets
# =============================================================================
# Placeholder secrets for the Data Gateway Service. In production, these are
# managed by External Secrets Operator (ESO) pulling from HashiCorp Vault.
# PRD: AGENT-DATA-004
# =============================================================================
# NOTE: These are placeholder values. Real secrets are injected via ESO/Vault.
# See: deployment/kubernetes/external-secrets/ for ESO ClusterSecretStore config.
# Vault path: secret/greenlang/data-gateway-service/*
# =============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: data-gateway-service-secrets
  namespace: greenlang
  labels:
    app: data-gateway-service
    app.kubernetes.io/name: data-gateway-service
    app.kubernetes.io/component: agent-data-004
    app.kubernetes.io/part-of: greenlang
  annotations:
    description: "Data Gateway Service secrets - database, Redis, backend API keys"
    prd: AGENT-DATA-004
    # External Secrets Operator annotations
    externalsecrets.io/managed-by: "external-secrets"
    externalsecrets.io/vault-path: "secret/greenlang/data-gateway-service"
    # Vault annotations
    vault.hashicorp.com/agent-inject: "true"
    vault.hashicorp.com/role: "data-gateway-service"
    vault.hashicorp.com/agent-inject-secret-database-url: "secret/greenlang/data-gateway-service/database"
    vault.hashicorp.com/agent-inject-secret-redis-url: "secret/greenlang/data-gateway-service/redis"
type: Opaque
stringData:
  # PostgreSQL connection string
  # Vault path: secret/greenlang/data-gateway-service/database
  DATABASE_URL: "postgresql+asyncpg://data_gateway_svc:CHANGE_ME@greenlang-postgresql.database.svc.cluster.local:5432/greenlang?options=-csearch_path%3Ddata_gateway_service"

  # Redis connection string
  # Vault path: secret/greenlang/data-gateway-service/redis
  REDIS_URL: "redis://greenlang-redis.redis.svc.cluster.local:6379/8"

  # Backend service API keys (for authenticated inter-service calls)
  # Vault path: secret/greenlang/data-gateway-service/api-keys
  PDF_EXTRACTOR_API_KEY: "CHANGE_ME_pdf_extractor_api_key"
  EXCEL_NORMALIZER_API_KEY: "CHANGE_ME_excel_normalizer_api_key"
  ERP_CONNECTOR_API_KEY: "CHANGE_ME_erp_connector_api_key"
  EUDR_TRACEABILITY_API_KEY: "CHANGE_ME_eudr_traceability_api_key"
