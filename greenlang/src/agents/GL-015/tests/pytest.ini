[pytest]
# GL-015 INSULSCAN Test Suite Configuration
# Author: GL-TestEngineer
# Version: 1.0.0

# Test discovery
testpaths =
    unit
    integration
    e2e
    determinism
    performance
    security

python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers
markers =
    unit: Unit tests for individual components
    integration: Integration tests for component interactions
    e2e: End-to-end tests for complete workflows
    determinism: Tests for calculation reproducibility and provenance
    performance: Performance and benchmark tests
    security: Security and vulnerability tests
    slow: Tests that take a long time to run
    asyncio: Asynchronous tests requiring event loop

# Test collection and execution
addopts =
    -v
    --strict-markers
    --tb=short
    -ra
    --color=yes
    --durations=10

# Async configuration
asyncio_mode = auto

# Logging configuration
log_cli = true
log_cli_level = WARNING
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

log_file = tests/logs/test_run.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(filename)s:%(lineno)d - %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Coverage configuration (if pytest-cov is installed)
# To run with coverage: pytest --cov=src/agents/GL-015 --cov-report=html
# addopts = --cov=src/agents/GL-015 --cov-report=html --cov-report=term-missing

# Timeouts (if pytest-timeout is installed)
timeout = 60
timeout_method = signal

# Parallel execution (if pytest-xdist is installed)
# To run in parallel: pytest -n auto
# addopts = -n auto

# Warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    error::UserWarning

# Minimum version
minversion = 7.0

# Cache directory
cache_dir = .pytest_cache

# Fixture configuration
usefixtures =
    cleanup_temp_files

# Environment variables for tests
env =
    GL015_ENVIRONMENT=test
    GL015_DEBUG=true
    GL015_LOG_LEVEL=DEBUG

# Test data paths
; testdata = tests/data

# Console output
console_output_style = progress

# JUnit XML reporting (for CI/CD)
junit_family = xunit2
junit_logging = all
junit_duration_report = total

# HTML reporting (if pytest-html is installed)
# To generate: pytest --html=reports/test_report.html
; generate_report_on_test = true
