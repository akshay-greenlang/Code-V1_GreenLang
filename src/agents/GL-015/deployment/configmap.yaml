# ==============================================================================
# GL-015 INSULSCAN - Kubernetes ConfigMap
# ==============================================================================
# Configuration data for insulation inspection agent
# Contains non-sensitive configuration values
# ==============================================================================
apiVersion: v1
kind: ConfigMap
metadata:
  name: gl-015-insulscan-config
  namespace: greenlang
  labels:
    app: gl-015-insulscan
    app.kubernetes.io/name: insulscan
    app.kubernetes.io/instance: gl-015
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/component: config
    app.kubernetes.io/part-of: greenlang
    greenlang.io/agent-id: gl-015
    greenlang.io/agent-codename: insulscan
data:
  # ------------------------------------------------------------------------------
  # Application Settings
  # ------------------------------------------------------------------------------
  APP_NAME: "GL-015-INSULSCAN"
  APP_VERSION: "1.0.0"
  APP_ENV: "production"
  DEBUG: "false"
  LOG_LEVEL: "INFO"

  # ------------------------------------------------------------------------------
  # Server Configuration
  # ------------------------------------------------------------------------------
  HOST: "0.0.0.0"
  PORT: "8000"
  WORKERS: "4"
  RELOAD: "false"

  # ------------------------------------------------------------------------------
  # API Configuration
  # ------------------------------------------------------------------------------
  API_PREFIX: "/api/v1"
  API_TITLE: "GL-015 INSULSCAN API"
  API_DESCRIPTION: "Insulation Inspection Agent with Thermal Image Processing"
  DOCS_URL: "/docs"
  REDOC_URL: "/redoc"
  OPENAPI_URL: "/openapi.json"

  # ------------------------------------------------------------------------------
  # Database Configuration
  # ------------------------------------------------------------------------------
  db-host: "gl-015-insulscan-postgresql"
  db-port: "5432"
  db-name: "insulscan_db"
  DATABASE_POOL_SIZE: "20"
  DATABASE_MAX_OVERFLOW: "10"
  DATABASE_POOL_TIMEOUT: "30"
  DATABASE_POOL_RECYCLE: "1800"
  DATABASE_ECHO: "false"

  # ------------------------------------------------------------------------------
  # Redis Configuration
  # ------------------------------------------------------------------------------
  redis-host: "gl-015-insulscan-redis"
  redis-port: "6379"
  REDIS_DB: "0"
  REDIS_MAX_CONNECTIONS: "50"
  REDIS_SOCKET_TIMEOUT: "5"

  # Cache TTL settings (seconds)
  CACHE_TTL_DEFAULT: "600"
  CACHE_TTL_THERMAL_ANALYSIS: "1800"
  CACHE_TTL_HEAT_LOSS_CALC: "3600"

  # ------------------------------------------------------------------------------
  # Object Storage Configuration
  # ------------------------------------------------------------------------------
  S3_REGION: "us-east-1"
  S3_BUCKET_THERMAL_IMAGES: "insulscan-thermal-images-prod"
  S3_BUCKET_REPORTS: "insulscan-reports-prod"
  S3_PRESIGNED_URL_EXPIRY: "3600"

  # ------------------------------------------------------------------------------
  # Thermal Image Processing
  # ------------------------------------------------------------------------------
  MAX_IMAGE_WIDTH: "4096"
  MAX_IMAGE_HEIGHT: "4096"
  MAX_IMAGE_SIZE_MB: "50"
  SUPPORTED_IMAGE_FORMATS: "jpg,jpeg,png,tiff,bmp,raw"

  # Temperature calibration defaults
  EMISSIVITY_DEFAULT: "0.95"
  AMBIENT_TEMPERATURE_C: "25.0"
  REFLECTED_TEMPERATURE_C: "25.0"

  # Processing settings
  THERMAL_PROCESSING_BATCH_SIZE: "10"
  THERMAL_PROCESSING_WORKERS: "4"
  ENABLE_GPU_ACCELERATION: "false"
  GPU_DEVICE_ID: "0"

  # ------------------------------------------------------------------------------
  # Heat Loss Calculation Settings
  # ------------------------------------------------------------------------------
  # Economic parameters
  NATURAL_GAS_COST_PER_MMBTU: "4.50"
  ELECTRICITY_COST_PER_KWH: "0.10"
  STEAM_COST_PER_KLBS: "12.00"
  OPERATING_HOURS_PER_YEAR: "8760"

  # Calculation standard
  CALCULATION_STANDARD: "ASTM_C680"

  # Heat loss thresholds (W/m2)
  HEAT_FLUX_MINOR: "50.0"
  HEAT_FLUX_MODERATE: "150.0"
  HEAT_FLUX_SEVERE: "300.0"
  HEAT_FLUX_CRITICAL: "500.0"

  # Temperature delta thresholds (K)
  TEMP_DELTA_MINOR: "10.0"
  TEMP_DELTA_MODERATE: "25.0"
  TEMP_DELTA_SEVERE: "50.0"
  TEMP_DELTA_CRITICAL: "100.0"

  # CUI risk temperature range (C)
  CUI_RISK_MIN_C: "0.0"
  CUI_RISK_MAX_C: "175.0"
  CUI_OPTIMAL_MIN_C: "50.0"
  CUI_OPTIMAL_MAX_C: "150.0"

  # Efficiency thresholds (%)
  EFFICIENCY_EXCELLENT: "95.0"
  EFFICIENCY_GOOD: "85.0"
  EFFICIENCY_FAIR: "70.0"
  EFFICIENCY_POOR: "50.0"
  EFFICIENCY_CRITICAL: "30.0"

  # ROI thresholds
  MIN_ROI_FOR_REPAIR: "25.0"
  MAX_PAYBACK_MONTHS: "36"

  # ------------------------------------------------------------------------------
  # Monitoring & Observability
  # ------------------------------------------------------------------------------
  METRICS_ENABLED: "true"
  METRICS_PORT: "9090"
  METRICS_PATH: "/metrics"

  # OpenTelemetry
  OTEL_ENABLED: "true"
  OTEL_SERVICE_NAME: "gl-015-insulscan"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://otel-collector.observability:4317"
  OTEL_EXPORTER_OTLP_PROTOCOL: "grpc"
  OTEL_TRACES_SAMPLER: "parentbased_traceidratio"
  OTEL_TRACES_SAMPLER_ARG: "0.1"

  # Logging
  LOG_FORMAT: "json"
  LOG_OUTPUT: "stdout"

  # ------------------------------------------------------------------------------
  # Rate Limiting
  # ------------------------------------------------------------------------------
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_REQUESTS_PER_MINUTE: "100"
  RATE_LIMIT_BURST_SIZE: "20"

  # ------------------------------------------------------------------------------
  # Health Check Configuration
  # ------------------------------------------------------------------------------
  HEALTH_CHECK_INCLUDE_DETAILS: "true"
  HEALTH_CHECK_DATABASE: "true"
  HEALTH_CHECK_REDIS: "true"
  HEALTH_CHECK_S3: "true"

  # ------------------------------------------------------------------------------
  # Feature Flags
  # ------------------------------------------------------------------------------
  FEATURE_CUI_DETECTION: "true"
  FEATURE_AUTO_PRIORITIZATION: "true"
  FEATURE_CMMS_INTEGRATION: "true"
  FEATURE_REAL_TIME_ALERTS: "true"
  FEATURE_BATCH_PROCESSING: "true"

  # ------------------------------------------------------------------------------
  # Agent Configuration YAML
  # ------------------------------------------------------------------------------
  agent-config.yaml: |
    # GL-015 INSULSCAN Agent Configuration
    agent:
      id: GL-015
      codename: INSULSCAN
      name: InsulationInspectionAgent
      version: "1.0.0"
      type: monitor
      domain: energy_conservation

    runtime:
      deterministic: true
      temperature: 0.0
      seed: 42
      zero_hallucination: true
      max_retries: 3
      timeout_seconds: 300

    cache:
      enabled: true
      ttl_seconds: 600
      max_entries: 5000
      strategy: lru

    batch:
      enabled: true
      max_batch_size: 100
      parallel_workers: 4
      chunk_size: 25

    thermal_processing:
      supported_formats:
        - jpg
        - jpeg
        - png
        - tiff
        - bmp
        - raw
      max_dimensions:
        width: 4096
        height: 4096
      max_file_size_mb: 50

    heat_loss:
      calculation_standard: ASTM_C680
      thresholds:
        heat_flux:
          minor: 50.0
          moderate: 150.0
          severe: 300.0
          critical: 500.0
        temperature_delta:
          minor: 10.0
          moderate: 25.0
          severe: 50.0
          critical: 100.0

    cui_detection:
      enabled: true
      risk_temperature_range:
        min_c: 0.0
        max_c: 175.0
      optimal_range:
        min_c: 50.0
        max_c: 150.0

    economics:
      natural_gas_cost_per_mmbtu: 4.50
      electricity_cost_per_kwh: 0.10
      steam_cost_per_klbs: 12.00
      operating_hours_per_year: 8760
      min_roi_for_repair: 25.0
      max_payback_months: 36

    logging:
      level: INFO
      format: json
      include_request_id: true
      include_trace_id: true

    metrics:
      enabled: true
      port: 9090
      path: /metrics
      histogram_buckets:
        - 0.005
        - 0.01
        - 0.025
        - 0.05
        - 0.1
        - 0.25
        - 0.5
        - 1.0
        - 2.5
        - 5.0
        - 10.0
