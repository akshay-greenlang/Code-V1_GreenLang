# ==============================================================================
# GL-015 INSULSCAN - Kubernetes Secrets
# ==============================================================================
# Secret configuration template for insulation inspection agent
# WARNING: Replace placeholder values before applying
# Consider using external secrets management (Vault, AWS Secrets Manager, etc.)
# ==============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: gl-015-insulscan-secrets
  namespace: greenlang
  labels:
    app: gl-015-insulscan
    app.kubernetes.io/name: insulscan
    app.kubernetes.io/instance: gl-015
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/component: secrets
    app.kubernetes.io/part-of: greenlang
    greenlang.io/agent-id: gl-015
    greenlang.io/agent-codename: insulscan
  annotations:
    description: "Secrets for GL-015 INSULSCAN agent"
    # For external secrets operator integration
    # externalsecrets.io/refresh-interval: "1h"
type: Opaque
stringData:
  # ------------------------------------------------------------------------------
  # Application Security
  # ------------------------------------------------------------------------------
  # Generate with: openssl rand -base64 64
  SECRET_KEY: "REPLACE_WITH_SECURE_SECRET_KEY"

  # JWT Configuration
  JWT_SECRET_KEY: "REPLACE_WITH_JWT_SECRET_KEY"

  # ------------------------------------------------------------------------------
  # Database Credentials
  # ------------------------------------------------------------------------------
  DB_USER: "insulscan_user"
  DB_PASSWORD: "REPLACE_WITH_SECURE_DB_PASSWORD"
  DATABASE_URL: "postgresql+asyncpg://insulscan_user:REPLACE_WITH_SECURE_DB_PASSWORD@gl-015-insulscan-postgresql:5432/insulscan_db"

  # ------------------------------------------------------------------------------
  # Redis Credentials
  # ------------------------------------------------------------------------------
  REDIS_PASSWORD: "REPLACE_WITH_REDIS_PASSWORD"
  REDIS_URL: "redis://:REPLACE_WITH_REDIS_PASSWORD@gl-015-insulscan-redis:6379/0"

  # ------------------------------------------------------------------------------
  # AWS Credentials (S3 Access)
  # ------------------------------------------------------------------------------
  AWS_ACCESS_KEY_ID: "REPLACE_WITH_AWS_ACCESS_KEY"
  AWS_SECRET_ACCESS_KEY: "REPLACE_WITH_AWS_SECRET_KEY"
  S3_ENDPOINT_URL: "https://s3.amazonaws.com"

  # ------------------------------------------------------------------------------
  # External Integrations
  # ------------------------------------------------------------------------------
  # CMMS API
  CMMS_API_KEY: "REPLACE_WITH_CMMS_API_KEY"
  CMMS_API_URL: "https://cmms.example.com/api"

  # Agent Network Token
  AGENT_NETWORK_AUTH_TOKEN: "REPLACE_WITH_NETWORK_TOKEN"

  # Alerting Webhooks
  SLACK_WEBHOOK_URL: "REPLACE_WITH_SLACK_WEBHOOK"
  PAGERDUTY_INTEGRATION_KEY: "REPLACE_WITH_PAGERDUTY_KEY"

---
# ==============================================================================
# TLS Certificate Secret
# ==============================================================================
# For manually managed certificates
# Usually managed by cert-manager automatically
# ---
# apiVersion: v1
# kind: Secret
# metadata:
#   name: gl-015-insulscan-tls
#   namespace: greenlang
#   labels:
#     app: gl-015-insulscan
# type: kubernetes.io/tls
# data:
#   tls.crt: "BASE64_ENCODED_CERTIFICATE"
#   tls.key: "BASE64_ENCODED_PRIVATE_KEY"

---
# ==============================================================================
# Image Pull Secret (for private container registry)
# ==============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: gcr-credentials
  namespace: greenlang
  labels:
    app: gl-015-insulscan
type: kubernetes.io/dockerconfigjson
stringData:
  .dockerconfigjson: |
    {
      "auths": {
        "gcr.io": {
          "username": "_json_key",
          "password": "REPLACE_WITH_GCR_SERVICE_ACCOUNT_JSON",
          "auth": "REPLACE_WITH_BASE64_ENCODED_AUTH"
        }
      }
    }

---
# ==============================================================================
# External Secrets Operator Configuration (Alternative)
# ==============================================================================
# Use this if you have External Secrets Operator installed
# to fetch secrets from AWS Secrets Manager, HashiCorp Vault, etc.
# ---
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: gl-015-insulscan-external-secrets
#   namespace: greenlang
#   labels:
#     app: gl-015-insulscan
# spec:
#   refreshInterval: "1h"
#   secretStoreRef:
#     name: aws-secrets-manager
#     kind: ClusterSecretStore
#   target:
#     name: gl-015-insulscan-secrets
#     creationPolicy: Owner
#   data:
#     - secretKey: SECRET_KEY
#       remoteRef:
#         key: greenlang/gl-015-insulscan/prod
#         property: secret_key
#     - secretKey: DATABASE_URL
#       remoteRef:
#         key: greenlang/gl-015-insulscan/prod
#         property: database_url
#     - secretKey: REDIS_URL
#       remoteRef:
#         key: greenlang/gl-015-insulscan/prod
#         property: redis_url
#     - secretKey: AWS_ACCESS_KEY_ID
#       remoteRef:
#         key: greenlang/gl-015-insulscan/prod
#         property: aws_access_key_id
#     - secretKey: AWS_SECRET_ACCESS_KEY
#       remoteRef:
#         key: greenlang/gl-015-insulscan/prod
#         property: aws_secret_access_key

---
# ==============================================================================
# Sealed Secrets Configuration (Alternative)
# ==============================================================================
# Use this if you have Sealed Secrets controller installed
# Generate with: kubeseal --format=yaml < secret.yaml > sealed-secret.yaml
# ---
# apiVersion: bitnami.com/v1alpha1
# kind: SealedSecret
# metadata:
#   name: gl-015-insulscan-secrets
#   namespace: greenlang
# spec:
#   encryptedData:
#     SECRET_KEY: "SEALED_ENCRYPTED_VALUE"
#     DATABASE_URL: "SEALED_ENCRYPTED_VALUE"
#     REDIS_URL: "SEALED_ENCRYPTED_VALUE"
#   template:
#     metadata:
#       name: gl-015-insulscan-secrets
#       namespace: greenlang
#       labels:
#         app: gl-015-insulscan
