# GL-002 BoilerEfficiencyOptimizer - Secret Template
# WARNING: This file contains template placeholders only
# NEVER commit actual secrets to version control
# Always use external secret management (Vault, AWS Secrets Manager, etc.)
# Instructions:
#   1. Copy this file to a secure location
#   2. Replace placeholder values with actual secrets
#   3. Apply with: kubectl create secret generic gl-002-secrets -n greenlang --from-literal=database_url=... etc.
#   OR use Sealed Secrets / External Secrets Operator

apiVersion: v1
kind: Secret
metadata:
  name: gl-002-secrets
  namespace: greenlang
  labels:
    app: gl-002-boiler-efficiency
    agent: "GL-002"
  annotations:
    description: "Sensitive secrets for GL-002 BoilerEfficiencyOptimizer"
    warning: "NEVER COMMIT SECRETS TO GIT"

# Data format: base64-encoded values
# To create: echo -n "actual_value" | base64
# Replace REPLACE_* with actual base64-encoded secrets
type: Opaque
data:
  # Database connection string
  # Format: postgresql://user:password@host:5432/database
  # NOTE: Must be base64-encoded
  database_url: "UkVQTEFDRV9XSVRIX0JBU0U2NF9FTkNPREVEX0RBVEFCQVNFX1VSTQ=="

  # Redis connection string
  # Format: redis://:[password]@host:6379/0
  # NOTE: Must be base64-encoded
  redis_url: "UkVQTEFDRV9XSVRIX0JBU0U2NF9FTkNPREVEX1JFRElTX1VSTQ=="

  # API authentication key
  # Format: JWT or custom API key
  api_key: "UkVQTEFDRV9XSVRIX0JBU0U2NF9FTkNPREVEX0FQSV9LRVk="

  # JWT signing secret
  # Format: cryptographically secure random string
  jwt_secret: "UkVQTEFDRV9XSVRIX0JBU0U2NF9FTkNPREVEX0pXVF9TRUNSRVQ="

  # OAuth2 client credentials (if applicable)
  oauth_client_id: "UkVQTEFDRV9XSVRIX0JBU0U2NF9FTkNPREVEX09BVVRIMl9JRCA="
  oauth_client_secret: "UkVQTEFDRV9XSVRIX0JBU0U2NF9FTkNPREVEX09BVVRIMl9TRUNSRVQ="

  # Monitoring and alerting credentials
  datadog_api_key: "UkVQTEFDRV9XSVRIX0JBU0U2NF9FTkNPREVEX0RBVEFET0dfQVBJX0tFWQ=="
  pagerduty_api_key: "UkVQTEFDRV9XSVRIX0JBU0U2NF9FTkNPREVEX1BBR0VSRERZX0FQSV9LRVk="

  # TLS certificates (optional)
  # tls_cert: "UkVQTEFDRV9XSVRIX0JBU0U2NF9FTkNPREVEX1RMU19DRVJUfQ=="
  # tls_key: "UkVQTEFDRV9XSVRIX0JBU0U2NF9FTkNPREVEX1RMU19LRVk="

---
# Recommended: Use Sealed Secrets for git-safe secret management
# Install: kubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.24.0/controller.yaml
# Seal secret: kubeseal -f secret.yaml -w secret-sealed.yaml
#
# Example sealed secret:
# apiVersion: bitnami.com/v1alpha1
# kind: SealedSecret
# metadata:
#   name: gl-002-secrets
#   namespace: greenlang
# spec:
#   encryptedData:
#     database_url: AgBvB... (encrypted)
#     api_key: AgCdE... (encrypted)
#   template:
#     metadata:
#       name: gl-002-secrets
#       namespace: greenlang
#     type: Opaque

---
# Alternative: Use External Secrets Operator for Vault/AWS Secrets Manager
# Install: helm repo add external-secrets https://charts.external-secrets.io
# helm install external-secrets external-secrets/external-secrets -n external-secrets-system --create-namespace
#
# Example SecretStore for AWS Secrets Manager:
# apiVersion: external-secrets.io/v1beta1
# kind: SecretStore
# metadata:
#   name: gl-002-secret-store
#   namespace: greenlang
# spec:
#   provider:
#     aws:
#       service: SecretsManager
#       region: us-east-1
#       auth:
#         jwt:
#           serviceAccountRef:
#             name: external-secrets-sa

# Example ExternalSecret:
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: gl-002-secrets
#   namespace: greenlang
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: gl-002-secret-store
#     kind: SecretStore
#   target:
#     name: gl-002-secrets
#     creationPolicy: Owner
#   data:
#     - secretKey: database_url
#       remoteRef:
#         key: gl-002/database_url
#     - secretKey: api_key
#       remoteRef:
#         key: gl-002/api_key

---
# Deployment script for secrets management
# Save as: scripts/setup-secrets.sh
# Usage: ./scripts/setup-secrets.sh production
#
# #!/bin/bash
# ENVIRONMENT=${1:-production}
#
# # Load secrets from secure location
# source ~/.greenlang-secrets-${ENVIRONMENT}
#
# # Create Kubernetes secret
# kubectl create secret generic gl-002-secrets \
#   --from-literal=database_url="${DATABASE_URL}" \
#   --from-literal=redis_url="${REDIS_URL}" \
#   --from-literal=api_key="${API_KEY}" \
#   --from-literal=jwt_secret="${JWT_SECRET}" \
#   -n greenlang \
#   --dry-run=client \
#   -o yaml | kubectl apply -f -
#
# echo "Secrets for ${ENVIRONMENT} environment created successfully"
