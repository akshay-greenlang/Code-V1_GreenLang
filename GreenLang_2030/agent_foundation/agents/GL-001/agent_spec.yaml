# GL-001 ProcessHeatOrchestrator Agent Specification
# Version: 2.0.0
# Date: 2025-11-15
# Status: PRODUCTION-READY

# ============================================================================
# SECTION 1: AGENT METADATA
# ============================================================================

agent_metadata:
  agent_id: "GL-001"
  name: "ProcessHeatOrchestrator"
  version: "1.0.0"
  category: "Orchestration"
  domain: "Industrial Process Heat"
  type: "Coordinator"
  complexity: "High"
  priority: "P0"  # Critical for enterprise deployment
  market_size_usd: "$20B"
  target_deployment: "Q4 2025"
  regulatory_frameworks:
    - "EPA Mandatory Reporting Rule"
    - "EU ETS (Emissions Trading System)"
    - "ISO 50001 Energy Management"
    - "ASME Performance Test Codes"

  business_metrics:
    total_addressable_market: "$20B annually"
    realistic_market_capture: "10% by 2030 ($2B)"
    carbon_reduction_potential: "500 Mt CO2e/year"
    average_cost_savings: "20-35% energy costs"
    roi_range: "2-4 years payback"

  technical_classification:
    agent_type: "master_orchestrator"
    coordination_scope: "enterprise_wide"
    sub_agent_count: 99  # Coordinates GL-002 through GL-100
    integration_complexity: "very_high"
    real_time_requirements: true

# ============================================================================
# SECTION 2: DESCRIPTION
# ============================================================================

description:
  purpose: |
    Master orchestrator for all industrial process heat operations across enterprise facilities.
    Coordinates 99 specialized agents to optimize heat generation, distribution, recovery, and
    utilization while ensuring safety, compliance, and continuous improvement.

  strategic_context:
    global_impact: "Industrial heat accounts for 65% of industrial energy (10% of global emissions)"
    market_opportunity: "80% of industrial boilers are >20 years old and need replacement"
    technology_readiness: "TRL 9 - Commercial deployment with proven ROI"
    competitive_advantage: "First comprehensive AI orchestration platform for process heat"

  capabilities:
    - "Multi-agent orchestration across 99 specialized heat agents"
    - "Real-time optimization of heat generation and distribution"
    - "Predictive maintenance and failure prevention"
    - "Energy cost optimization with demand response"
    - "Emissions compliance and carbon accounting"
    - "Safety monitoring and incident prevention"
    - "Digital twin synchronization and what-if analysis"
    - "Net-zero pathway planning and execution"

  dependencies:
    - agent_id: "GL-002 to GL-100"
      relationship: "coordinates"
      data_flow: "bidirectional command and telemetry"

    - system: "SCADA/DCS"
      relationship: "receives_data_from"
      data_type: "real-time process data"

    - system: "ERP"
      relationship: "integrates_with"
      data_type: "production schedules, costs, inventory"

    - system: "CMMS"
      relationship: "coordinates_with"
      data_type: "maintenance schedules and work orders"

# ============================================================================
# SECTION 3: TOOLS (Deterministic, Zero-Hallucination)
# ============================================================================

tools:
  tool_architecture:
    design_pattern: "tool_first"
    deterministic: true
    hallucination_prevention: "all_calculations_via_tools"
    provenance_tracking: true

  tools_list:
    # Tool 1: System-wide heat balance calculator
    - tool_id: "calculate_heat_balance"
      name: "calculate_heat_balance"
      category: "calculation"
      deterministic: true

      description: "Calculates complete heat and material balance across all equipment"

      parameters:
        type: "object"
        properties:
          heat_sources:
            type: "array"
            items:
              type: "object"
              properties:
                source_id: {type: "string"}
                heat_output_mw: {type: "number"}
                temperature_c: {type: "number"}
                pressure_bar: {type: "number"}
            description: "All heat generation sources (boilers, furnaces, CHP)"

          heat_sinks:
            type: "array"
            items:
              type: "object"
              properties:
                sink_id: {type: "string"}
                heat_demand_mw: {type: "number"}
                temperature_required_c: {type: "number"}
            description: "All heat consuming processes"

          heat_losses:
            type: "object"
            properties:
              radiation_mw: {type: "number"}
              convection_mw: {type: "number"}
              flue_gas_mw: {type: "number"}
        required: ["heat_sources", "heat_sinks"]

      returns:
        type: "object"
        properties:
          total_heat_generated_mw: {type: "number"}
          total_heat_consumed_mw: {type: "number"}
          total_losses_mw: {type: "number"}
          heat_balance_closure_percent: {type: "number"}
          efficiency_percent: {type: "number"}
          imbalance_mw: {type: "number"}
          recommendations: {type: "array", items: {type: "string"}}

      implementation:
        physics_formula: |
          Heat Balance: Σ(Heat In) = Σ(Heat Out) + Σ(Losses) + Accumulation
          Efficiency = (Useful Heat Output / Total Heat Input) × 100
        calculation_method: "First Law of Thermodynamics energy balance"
        standards: ["ASME PTC 4", "ISO 50001"]
        accuracy: "±1% heat balance closure"

    # Tool 2: Multi-agent coordination optimizer
    - tool_id: "optimize_agent_coordination"
      name: "optimize_agent_coordination"
      category: "optimization"
      deterministic: true

      description: "Optimizes task allocation and coordination across 99 sub-agents"

      parameters:
        type: "object"
        properties:
          current_state:
            type: "object"
            properties:
              active_agents: {type: "array", items: {type: "string"}}
              agent_loads: {type: "object"}
              pending_tasks: {type: "array"}
              priority_constraints: {type: "array"}

          optimization_objective:
            type: "string"
            enum: ["minimize_energy", "minimize_cost", "minimize_emissions", "maximize_throughput", "balanced"]

          time_horizon_hours:
            type: "number"
            minimum: 1
            maximum: 168

        required: ["current_state", "optimization_objective"]

      returns:
        type: "object"
        properties:
          agent_assignments:
            type: "array"
            items:
              type: "object"
              properties:
                agent_id: {type: "string"}
                task_id: {type: "string"}
                priority: {type: "integer"}
                start_time: {type: "string", format: "date-time"}
                duration_minutes: {type: "integer"}
          coordination_efficiency: {type: "number"}
          expected_outcomes:
            type: "object"
            properties:
              energy_savings_mwh: {type: "number"}
              cost_savings_usd: {type: "number"}
              emissions_reduction_tco2e: {type: "number"}

      implementation:
        algorithm: "Mixed Integer Linear Programming (MILP) with constraint satisfaction"
        solver: "Gurobi or CPLEX"
        optimization_method: "Branch and bound with heuristics"
        convergence_criteria: "0.1% optimality gap or 60 second timeout"

    # Tool 3: Thermal efficiency calculator
    - tool_id: "calculate_thermal_efficiency"
      name: "calculate_thermal_efficiency"
      category: "calculation"
      deterministic: true

      description: "Calculates overall thermal efficiency with component breakdown"

      parameters:
        type: "object"
        properties:
          fuel_input:
            type: "object"
            properties:
              fuel_type: {type: "string", enum: ["natural_gas", "coal", "biomass", "oil", "hydrogen"]}
              flow_rate_kg_s: {type: "number"}
              heating_value_mj_kg: {type: "number"}

          useful_heat_output:
            type: "object"
            properties:
              steam_mw: {type: "number"}
              hot_water_mw: {type: "number"}
              process_heat_mw: {type: "number"}

          losses:
            type: "object"
            properties:
              stack_losses_mw: {type: "number"}
              radiation_losses_mw: {type: "number"}
              blowdown_losses_mw: {type: "number"}

        required: ["fuel_input", "useful_heat_output"]

      returns:
        type: "object"
        properties:
          thermal_efficiency_percent: {type: "number"}
          fuel_input_mw: {type: "number"}
          useful_output_mw: {type: "number"}
          total_losses_mw: {type: "number"}
          carnot_efficiency_percent: {type: "number"}
          second_law_efficiency_percent: {type: "number"}
          improvement_potential_mw: {type: "number"}

      implementation:
        physics_formula: |
          η_thermal = (Useful Heat Output / Fuel Energy Input) × 100
          η_carnot = 1 - (T_cold / T_hot)
          η_second_law = η_actual / η_carnot
        standards: ["ASME PTC 4", "EN 12952"]

    # Tool 4: Heat distribution network optimizer
    - tool_id: "optimize_heat_distribution"
      name: "optimize_heat_distribution"
      category: "optimization"
      deterministic: true

      description: "Optimizes heat distribution across the network to minimize losses"

      parameters:
        type: "object"
        properties:
          network_topology:
            type: "object"
            properties:
              nodes: {type: "array", items: {type: "object"}}
              edges: {type: "array", items: {type: "object"}}
              pipe_specifications: {type: "array"}

          heat_demands:
            type: "array"
            items:
              type: "object"
              properties:
                location_id: {type: "string"}
                demand_mw: {type: "number"}
                temperature_required_c: {type: "number"}
                pressure_required_bar: {type: "number"}

          available_sources:
            type: "array"
            items:
              type: "object"
              properties:
                source_id: {type: "string"}
                capacity_mw: {type: "number"}
                temperature_c: {type: "number"}
                cost_per_mwh: {type: "number"}

        required: ["network_topology", "heat_demands", "available_sources"]

      returns:
        type: "object"
        properties:
          optimal_flow_paths:
            type: "array"
            items:
              type: "object"
              properties:
                from_node: {type: "string"}
                to_node: {type: "string"}
                flow_rate_kg_s: {type: "number"}
                temperature_c: {type: "number"}
                pressure_bar: {type: "number"}
          distribution_losses_mw: {type: "number"}
          pumping_power_kw: {type: "number"}
          total_cost_per_hour: {type: "number"}
          pressure_drops: {type: "object"}

      implementation:
        algorithm: "Network flow optimization with thermal hydraulics"
        physics: "Darcy-Weisbach equation, heat transfer equations"
        solver: "Specialized thermal network solver"

    # Tool 5: Emissions compliance validator
    - tool_id: "validate_emissions_compliance"
      name: "validate_emissions_compliance"
      category: "validation"
      deterministic: true

      description: "Validates emissions against regulatory limits and permits"

      parameters:
        type: "object"
        properties:
          measured_emissions:
            type: "object"
            properties:
              co2_kg_hr: {type: "number"}
              nox_kg_hr: {type: "number"}
              sox_kg_hr: {type: "number"}
              pm_kg_hr: {type: "number"}
              voc_kg_hr: {type: "number"}

          regulatory_limits:
            type: "object"
            properties:
              co2_permit_kg_hr: {type: "number"}
              nox_limit_kg_hr: {type: "number"}
              sox_limit_kg_hr: {type: "number"}
              pm_limit_kg_hr: {type: "number"}
              voc_limit_kg_hr: {type: "number"}

          measurement_timestamp:
            type: "string"
            format: "date-time"

        required: ["measured_emissions", "regulatory_limits"]

      returns:
        type: "object"
        properties:
          compliance_status: {type: "string", enum: ["compliant", "warning", "violation"]}
          violations:
            type: "array"
            items:
              type: "object"
              properties:
                pollutant: {type: "string"}
                measured_value: {type: "number"}
                limit_value: {type: "number"}
                exceedance_percent: {type: "number"}
          required_actions: {type: "array", items: {type: "string"}}
          reporting_required: {type: "boolean"}
          penalty_risk_usd: {type: "number"}

      implementation:
        standards: ["EPA CEMS", "EU ETS", "40 CFR Part 60"]
        validation_method: "Real-time comparison with rolling averages"
        reporting_protocol: "Automatic regulatory notification if violation"

    # Tool 6: Predictive maintenance scheduler
    - tool_id: "schedule_predictive_maintenance"
      name: "schedule_predictive_maintenance"
      category: "optimization"
      deterministic: true

      description: "Schedules maintenance based on condition monitoring and predictions"

      parameters:
        type: "object"
        properties:
          equipment_health:
            type: "array"
            items:
              type: "object"
              properties:
                equipment_id: {type: "string"}
                health_score: {type: "number", minimum: 0, maximum: 100}
                failure_probability: {type: "number"}
                remaining_useful_life_days: {type: "number"}
                criticality: {type: "string", enum: ["critical", "high", "medium", "low"]}

          production_schedule:
            type: "array"
            items:
              type: "object"
              properties:
                date: {type: "string", format: "date"}
                production_load_percent: {type: "number"}
                maintenance_windows: {type: "array"}

          maintenance_resources:
            type: "object"
            properties:
              available_crews: {type: "integer"}
              spare_parts_inventory: {type: "object"}
              contractor_availability: {type: "array"}

        required: ["equipment_health", "production_schedule"]

      returns:
        type: "object"
        properties:
          maintenance_schedule:
            type: "array"
            items:
              type: "object"
              properties:
                equipment_id: {type: "string"}
                maintenance_type: {type: "string"}
                scheduled_date: {type: "string", format: "date"}
                duration_hours: {type: "number"}
                crew_assignment: {type: "string"}
                parts_required: {type: "array"}
          risk_reduction_percent: {type: "number"}
          production_impact_hours: {type: "number"}
          cost_optimization_usd: {type: "number"}

      implementation:
        algorithm: "Reliability-centered maintenance optimization"
        prediction_model: "Weibull distribution with ML enhancement"
        optimization: "Minimize total cost of maintenance + downtime"

    # Tool 7: Energy cost optimizer
    - tool_id: "optimize_energy_costs"
      name: "optimize_energy_costs"
      category: "optimization"
      deterministic: true

      description: "Optimizes energy procurement and consumption to minimize costs"

      parameters:
        type: "object"
        properties:
          energy_prices:
            type: "object"
            properties:
              electricity_schedule: {type: "array"}
              natural_gas_price: {type: "number"}
              steam_price: {type: "number"}
              demand_charges: {type: "object"}

          production_requirements:
            type: "array"
            items:
              type: "object"
              properties:
                hour: {type: "integer"}
                heat_demand_mw: {type: "number"}
                flexibility_percent: {type: "number"}

          available_resources:
            type: "object"
            properties:
              boilers: {type: "array"}
              chp_units: {type: "array"}
              thermal_storage: {type: "object"}
              demand_response_capacity: {type: "number"}

        required: ["energy_prices", "production_requirements"]

      returns:
        type: "object"
        properties:
          optimal_dispatch:
            type: "array"
            items:
              type: "object"
              properties:
                hour: {type: "integer"}
                resource_id: {type: "string"}
                output_mw: {type: "number"}
                fuel_type: {type: "string"}
                cost_usd: {type: "number"}
          total_cost_usd: {type: "number"}
          savings_vs_baseline_usd: {type: "number"}
          demand_charge_avoided_usd: {type: "number"}
          carbon_emissions_tco2: {type: "number"}

      implementation:
        algorithm: "Dynamic programming with rolling horizon"
        constraints: "Ramp rates, minimum loads, startup costs"
        time_resolution: "15-minute intervals for real-time markets"

    # Tool 8: Safety risk assessor
    - tool_id: "assess_safety_risk"
      name: "assess_safety_risk"
      category: "analysis"
      deterministic: true

      description: "Assesses safety risks and triggers preventive actions"

      parameters:
        type: "object"
        properties:
          process_conditions:
            type: "object"
            properties:
              temperatures: {type: "array", items: {type: "object"}}
              pressures: {type: "array", items: {type: "object"}}
              flow_rates: {type: "array", items: {type: "object"}}
              gas_concentrations: {type: "object"}

          alarm_states:
            type: "array"
            items:
              type: "object"
              properties:
                alarm_id: {type: "string"}
                severity: {type: "string"}
                duration_minutes: {type: "number"}

          safety_limits:
            type: "object"
            properties:
              temperature_limits: {type: "object"}
              pressure_limits: {type: "object"}
              explosive_limits: {type: "object"}

        required: ["process_conditions", "safety_limits"]

      returns:
        type: "object"
        properties:
          overall_risk_level: {type: "string", enum: ["low", "medium", "high", "critical"]}
          risk_factors:
            type: "array"
            items:
              type: "object"
              properties:
                factor: {type: "string"}
                severity: {type: "integer", minimum: 1, maximum: 5}
                likelihood: {type: "integer", minimum: 1, maximum: 5}
                risk_score: {type: "integer"}
          required_actions:
            type: "array"
            items:
              type: "object"
              properties:
                action: {type: "string"}
                priority: {type: "string"}
                deadline: {type: "string"}
          emergency_shutdown_required: {type: "boolean"}

      implementation:
        methodology: "HAZOP-based risk matrix"
        standards: ["ISA 84", "IEC 61511", "OSHA PSM"]
        sil_calculation: "Risk reduction factor analysis"

    # Tool 9: Digital twin synchronizer
    - tool_id: "synchronize_digital_twin"
      name: "synchronize_digital_twin"
      category: "integration"
      deterministic: true

      description: "Synchronizes physical system with digital twin model"

      parameters:
        type: "object"
        properties:
          physical_state:
            type: "object"
            properties:
              timestamp: {type: "string", format: "date-time"}
              sensor_readings: {type: "array"}
              equipment_status: {type: "array"}
              process_variables: {type: "object"}

          model_state:
            type: "object"
            properties:
              model_version: {type: "string"}
              last_sync: {type: "string", format: "date-time"}
              predicted_values: {type: "object"}

          sync_mode:
            type: "string"
            enum: ["real_time", "batch", "on_demand"]

        required: ["physical_state", "model_state"]

      returns:
        type: "object"
        properties:
          sync_status: {type: "string", enum: ["synchronized", "updating", "diverged"]}
          model_accuracy_percent: {type: "number"}
          deviations:
            type: "array"
            items:
              type: "object"
              properties:
                parameter: {type: "string"}
                measured: {type: "number"}
                predicted: {type: "number"}
                deviation_percent: {type: "number"}
          calibration_required: {type: "boolean"}
          model_updates: {type: "object"}

      implementation:
        synchronization: "Kalman filter for state estimation"
        model_update: "Parameter identification with machine learning"
        validation: "Statistical process control limits"

    # Tool 10: KPI dashboard generator
    - tool_id: "generate_kpi_dashboard"
      name: "generate_kpi_dashboard"
      category: "reporting"
      deterministic: true

      description: "Generates comprehensive KPI dashboard for process heat operations"

      parameters:
        type: "object"
        properties:
          time_range:
            type: "object"
            properties:
              start_date: {type: "string", format: "date"}
              end_date: {type: "string", format: "date"}
              granularity: {type: "string", enum: ["hourly", "daily", "weekly", "monthly"]}

          kpi_categories:
            type: "array"
            items:
              type: "string"
              enum: ["efficiency", "emissions", "cost", "safety", "reliability", "production"]

          comparison_baseline:
            type: "string"
            enum: ["previous_period", "target", "best_in_class", "historical_average"]

        required: ["time_range", "kpi_categories"]

      returns:
        type: "object"
        properties:
          kpi_metrics:
            type: "object"
            properties:
              thermal_efficiency: {type: "object"}
              specific_energy_consumption: {type: "object"}
              carbon_intensity: {type: "object"}
              energy_cost_per_unit: {type: "object"}
              oee_score: {type: "object"}
              safety_incidents: {type: "object"}
          trends:
            type: "array"
            items:
              type: "object"
              properties:
                metric: {type: "string"}
                trend_direction: {type: "string"}
                change_percent: {type: "number"}
          alerts:
            type: "array"
            items: {type: "string"}
          executive_summary: {type: "string"}
          improvement_opportunities: {type: "array"}

      implementation:
        calculations: "Standard KPI formulas per ISO 50001"
        visualization: "Time series, heat maps, Sankey diagrams"
        benchmarking: "Industry databases and best practices"

    # Tool 11: What-if scenario analyzer
    - tool_id: "analyze_whatif_scenario"
      name: "analyze_whatif_scenario"
      category: "analysis"
      deterministic: true

      description: "Analyzes what-if scenarios for process changes and investments"

      parameters:
        type: "object"
        properties:
          baseline_case:
            type: "object"
            properties:
              current_configuration: {type: "object"}
              performance_metrics: {type: "object"}
              operating_costs: {type: "object"}

          scenario_changes:
            type: "array"
            items:
              type: "object"
              properties:
                change_type: {type: "string"}
                description: {type: "string"}
                parameters: {type: "object"}
                investment_usd: {type: "number"}

          evaluation_period_years:
            type: "number"
            minimum: 1
            maximum: 20

        required: ["baseline_case", "scenario_changes"]

      returns:
        type: "object"
        properties:
          scenario_results:
            type: "array"
            items:
              type: "object"
              properties:
                scenario_id: {type: "string"}
                energy_savings_mwh_year: {type: "number"}
                cost_savings_usd_year: {type: "number"}
                emissions_reduction_tco2_year: {type: "number"}
                npv_usd: {type: "number"}
                irr_percent: {type: "number"}
                payback_years: {type: "number"}
          sensitivity_analysis: {type: "object"}
          risk_assessment: {type: "object"}
          recommendation: {type: "string"}

      implementation:
        modeling: "Process simulation with thermodynamic models"
        economics: "Discounted cash flow analysis"
        uncertainty: "Monte Carlo simulation for risk"

    # Tool 12: Net-zero pathway planner
    - tool_id: "plan_netzero_pathway"
      name: "plan_netzero_pathway"
      category: "planning"
      deterministic: true

      description: "Creates optimized pathway to net-zero emissions for process heat"

      parameters:
        type: "object"
        properties:
          current_emissions:
            type: "object"
            properties:
              scope1_tco2_year: {type: "number"}
              by_source: {type: "object"}
              by_fuel: {type: "object"}

          decarbonization_options:
            type: "array"
            items:
              type: "object"
              properties:
                technology: {type: "string"}
                reduction_potential_tco2: {type: "number"}
                capex_usd: {type: "number"}
                opex_usd_year: {type: "number"}
                trl_level: {type: "integer", minimum: 1, maximum: 9}
                implementation_time_years: {type: "number"}

          constraints:
            type: "object"
            properties:
              budget_usd: {type: "number"}
              target_year: {type: "integer"}
              minimum_reliability: {type: "number"}
              production_constraints: {type: "array"}

        required: ["current_emissions", "decarbonization_options", "constraints"]

      returns:
        type: "object"
        properties:
          pathway_milestones:
            type: "array"
            items:
              type: "object"
              properties:
                year: {type: "integer"}
                actions: {type: "array", items: {type: "string"}}
                emissions_tco2: {type: "number"}
                reduction_from_baseline_percent: {type: "number"}
                cumulative_investment_usd: {type: "number"}
          technology_roadmap: {type: "object"}
          carbon_trajectory: {type: "array"}
          investment_schedule: {type: "object"}
          residual_emissions_tco2: {type: "number"}
          offset_requirements: {type: "object"}

      implementation:
        optimization: "Multi-objective optimization with Pareto frontier"
        constraints: "Technical feasibility, budget, timeline"
        methodology: "Science-based targets initiative (SBTi)"

# ============================================================================
# SECTION 4: AI INTEGRATION
# ============================================================================

ai_integration:
  provider: "anthropic"
  model: "claude-3-opus-20240229"

  configuration:
    temperature: 0.0  # Deterministic (REQUIRED)
    seed: 42         # Reproducible (REQUIRED)
    max_tokens: 4096
    tool_choice: "auto"
    provenance_tracking: true
    max_iterations: 5
    budget_usd: 0.50

  system_prompt: |
    You are the ProcessHeatOrchestrator, the master AI orchestrating industrial process heat operations.

    Your responsibilities:
    1. Coordinate 99 specialized agents (GL-002 through GL-100) for optimal heat management
    2. Perform all calculations using deterministic tools (never calculate in natural language)
    3. Optimize energy efficiency while maintaining safety and compliance
    4. Provide clear recommendations with quantified benefits
    5. Track complete provenance for all decisions and calculations

    Integration context:
    - You receive real-time data from SCADA/DCS systems
    - You coordinate with ERP for production schedules
    - You manage predictive maintenance with CMMS
    - You ensure regulatory compliance at all times

    CRITICAL: All numeric values must come from tool calculations. Never estimate or approximate.

  tool_selection_strategy:
    primary_tools:
      - "calculate_heat_balance"
      - "optimize_agent_coordination"
      - "optimize_energy_costs"

    conditional_tools:
      safety_threshold: "assess_safety_risk"
      maintenance_due: "schedule_predictive_maintenance"
      compliance_check: "validate_emissions_compliance"
      planning_mode: "plan_netzero_pathway"

# ============================================================================
# SECTION 5: SUB-AGENTS
# ============================================================================

sub_agents:
  coordination_architecture:
    pattern: "hierarchical_orchestration"
    communication: "message_passing"
    consensus: "coordinator_driven"

  agent_groups:
    - group_name: "Boiler and Steam Systems"
      agent_ids: ["GL-002", "GL-003", "GL-012", "GL-016", "GL-017", "GL-022", "GL-042", "GL-043", "GL-044"]
      coordination_mode: "synchronized"

    - group_name: "Combustion and Emissions"
      agent_ids: ["GL-004", "GL-005", "GL-010", "GL-018", "GL-021", "GL-026", "GL-029", "GL-053"]
      coordination_mode: "real_time"

    - group_name: "Heat Recovery and Integration"
      agent_ids: ["GL-006", "GL-014", "GL-020", "GL-024", "GL-030", "GL-033", "GL-038", "GL-039"]
      coordination_mode: "optimization"

    - group_name: "Maintenance and Reliability"
      agent_ids: ["GL-013", "GL-015", "GL-073", "GL-074", "GL-075", "GL-094", "GL-095"]
      coordination_mode: "predictive"

    - group_name: "Digital and Analytics"
      agent_ids: ["GL-009", "GL-032", "GL-041", "GL-061", "GL-062", "GL-063", "GL-068", "GL-069"]
      coordination_mode: "continuous"

    - group_name: "Decarbonization and Future"
      agent_ids: ["GL-034", "GL-035", "GL-036", "GL-037", "GL-081", "GL-082", "GL-083", "GL-084"]
      coordination_mode: "strategic"

  message_protocol:
    format: "json"
    schema_version: "2.0"
    authentication: "jwt"
    encryption: "tls_1.3"
    qos: "at_least_once"

# ============================================================================
# SECTION 6: INPUTS
# ============================================================================

inputs:
  schema:
    type: "object"
    properties:
      operation_mode:
        type: "string"
        enum: ["optimize", "monitor", "coordinate", "plan", "analyze", "report"]
        description: "Primary operation mode for the orchestrator"

      facility_data:
        type: "object"
        properties:
          facility_id: {type: "string"}
          location: {type: "string"}
          production_schedule: {type: "array"}
          equipment_inventory: {type: "array"}
        required: ["facility_id"]

      real_time_data:
        type: "object"
        properties:
          timestamp: {type: "string", format: "date-time"}
          scada_feeds: {type: "array"}
          sensor_readings: {type: "array"}
          alarm_states: {type: "array"}

      optimization_parameters:
        type: "object"
        properties:
          objective: {type: "string", enum: ["cost", "emissions", "efficiency", "reliability", "balanced"]}
          constraints: {type: "array"}
          time_horizon_hours: {type: "number"}

      agent_requests:
        type: "array"
        items:
          type: "object"
          properties:
            requesting_agent: {type: "string"}
            request_type: {type: "string"}
            payload: {type: "object"}

    required: ["operation_mode"]

  validation_rules:
    - rule: "timestamp_validation"
      check: "timestamp within 5 minutes of current time for real-time mode"
    - rule: "data_completeness"
      check: "minimum 80% sensor data availability"
    - rule: "safety_limits"
      check: "all inputs within operational safety envelope"

# ============================================================================
# SECTION 7: OUTPUTS
# ============================================================================

outputs:
  schema:
    type: "object"
    properties:
      orchestration_status:
        type: "object"
        properties:
          active_agents: {type: "integer"}
          tasks_completed: {type: "integer"}
          tasks_pending: {type: "integer"}
          coordination_efficiency: {type: "number"}

      optimization_results:
        type: "object"
        properties:
          energy_efficiency_percent: {type: "number"}
          cost_per_unit: {type: "number"}
          emissions_intensity_kg_co2_mwh: {type: "number"}
          improvements_identified: {type: "array"}

      agent_commands:
        type: "array"
        items:
          type: "object"
          properties:
            target_agent: {type: "string"}
            command_type: {type: "string"}
            parameters: {type: "object"}
            priority: {type: "integer"}
            deadline: {type: "string", format: "date-time"}

      kpi_dashboard:
        type: "object"
        properties:
          overall_efficiency: {type: "number"}
          safety_score: {type: "number"}
          compliance_status: {type: "string"}
          cost_performance: {type: "object"}
          emissions_performance: {type: "object"}

      recommendations:
        type: "array"
        items:
          type: "object"
          properties:
            action: {type: "string"}
            benefit: {type: "string"}
            priority: {type: "string"}
            implementation_time: {type: "string"}

      provenance:
        type: "object"
        properties:
          calculation_hash: {type: "string"}
          data_sources: {type: "array"}
          tool_calls: {type: "array"}
          decision_trail: {type: "array"}

  quality_guarantees:
    - "All calculations deterministic and reproducible"
    - "Complete audit trail with SHA-256 hashes"
    - "Zero hallucinated values"
    - "Physics-based calculations only"

# ============================================================================
# SECTION 8: TESTING
# ============================================================================

testing:
  test_coverage_target: 0.85  # 85% minimum

  test_categories:
    - category: "unit_tests"
      description: "Test individual tools and calculations"
      count: 24  # 2 per tool minimum
      coverage_target: 0.90

    - category: "integration_tests"
      description: "Test agent coordination and message passing"
      count: 15
      coverage_target: 0.80

    - category: "determinism_tests"
      description: "Verify reproducible results"
      count: 5
      coverage_target: 1.00

    - category: "performance_tests"
      description: "Verify latency and throughput requirements"
      count: 8
      coverage_target: 0.85

    - category: "safety_tests"
      description: "Test safety interlocks and emergency responses"
      count: 10
      coverage_target: 1.00

  performance_requirements:
    max_latency_ms:
      agent_creation: 100
      message_passing: 10
      optimization: 2000
      dashboard_generation: 5000

    throughput:
      messages_per_second: 10000
      calculations_per_second: 1000
      agent_coordinations_per_minute: 60

    accuracy_targets:
      heat_balance_closure: 0.99  # 99% accuracy
      efficiency_calculation: 0.995
      emissions_calculation: 0.999
      cost_optimization: 0.98

  test_data:
    synthetic_scenarios: 100
    historical_replays: 50
    edge_cases: 25
    failure_modes: 20

# ============================================================================
# SECTION 9: DEPLOYMENT
# ============================================================================

deployment:
  pack_id: "industrial/process_heat/orchestrator"
  pack_version: "1.0.0"

  resource_requirements:
    memory_mb: 2048
    cpu_cores: 4
    gpu_required: false
    disk_space_gb: 10
    network_bandwidth_mbps: 100

  dependencies:
    python_packages:
      - "numpy>=1.24,<2.0"
      - "pandas>=2.0,<3.0"
      - "scipy>=1.10,<2.0"
      - "networkx>=3.0,<4.0"
      - "pulp>=2.7"  # For optimization
      - "pydantic>=2.0,<3.0"

    greenlang_modules:
      - "greenlang.agents.base>=2.0"
      - "greenlang.intelligence>=2.0"
      - "greenlang.orchestration>=1.0"
      - "greenlang.tools.calculations>=1.0"

    external_systems:
      - system: "SCADA/DCS"
        protocol: "OPC UA"
        version: "1.04"
      - system: "ERP"
        protocol: "REST API"
        version: "2.0"
      - system: "CMMS"
        protocol: "GraphQL"
        version: "1.0"

  api_endpoints:
    - endpoint: "/api/v1/orchestrator/coordinate"
      method: "POST"
      authentication: "required"
      rate_limit: "1000 req/min"

    - endpoint: "/api/v1/orchestrator/optimize"
      method: "POST"
      authentication: "required"
      rate_limit: "100 req/min"

    - endpoint: "/api/v1/orchestrator/status"
      method: "GET"
      authentication: "required"
      rate_limit: "10000 req/min"

  deployment_environments:
    development:
      replicas: 1
      auto_scaling: false

    staging:
      replicas: 2
      auto_scaling: true
      min_replicas: 2
      max_replicas: 4

    production:
      replicas: 3
      auto_scaling: true
      min_replicas: 3
      max_replicas: 10
      multi_region: true

# ============================================================================
# SECTION 10: DOCUMENTATION
# ============================================================================

documentation:
  readme_sections:
    - "Overview and Purpose"
    - "Quick Start Guide"
    - "Architecture Overview"
    - "Tool Specifications"
    - "Agent Coordination"
    - "API Reference"
    - "Configuration Guide"
    - "Troubleshooting"

  example_use_cases:
    - title: "Multi-Facility Heat Optimization"
      description: "Coordinate heat operations across 5 manufacturing plants"
      input_example:
        operation_mode: "optimize"
        facility_data: {facility_id: "PLANT_001-005"}
        optimization_parameters: {objective: "balanced", time_horizon_hours: 24}
      output_example:
        energy_savings_mwh: 450
        cost_savings_usd: 67500
        emissions_reduction_tco2: 180
      business_impact: "20% energy cost reduction, 25% emissions reduction"

    - title: "Emergency Response Coordination"
      description: "Coordinate emergency shutdown across all heat systems"
      input_example:
        operation_mode: "coordinate"
        real_time_data: {alarm_states: ["HIGH_PRESSURE_BOILER_2"]}
      output_example:
        emergency_actions: ["shutdown_boiler_2", "reroute_steam", "notify_operations"]
        safety_status: "secured"
      business_impact: "Prevented potential safety incident, zero downtime"

    - title: "Net-Zero Pathway Planning"
      description: "Create 10-year decarbonization roadmap for process heat"
      input_example:
        operation_mode: "plan"
        current_emissions: {scope1_tco2_year: 50000}
        constraints: {budget_usd: 10000000, target_year: 2035}
      output_example:
        pathway_milestones: ["2026: Heat pumps", "2028: H2 pilot", "2030: Full electrification"]
        emissions_trajectory: "90% reduction by 2035"
      business_impact: "Achieve net-zero with $8M investment, 3.5 year payback"

  api_documentation:
    format: "OpenAPI 3.0"
    location: "/docs/api/orchestrator"
    interactive: true

  troubleshooting_guides:
    - "Agent Communication Issues"
    - "Performance Optimization"
    - "Data Quality Problems"
    - "Integration Failures"

# ============================================================================
# SECTION 11: COMPLIANCE
# ============================================================================

compliance:
  zero_secrets: true  # No hardcoded credentials

  standards:
    - "ISO 50001:2018 Energy Management"
    - "ISO 14001:2015 Environmental Management"
    - "ASME PTC Performance Test Codes"
    - "ISA-95 Enterprise-Control Integration"
    - "IEC 62264 Enterprise-Control System Integration"
    - "EPA Mandatory GHG Reporting"
    - "EU ETS Directive 2003/87/EC"

  security_requirements:
    authentication: "OAuth 2.0 with JWT"
    authorization: "RBAC with principle of least privilege"
    encryption_at_rest: "AES-256"
    encryption_in_transit: "TLS 1.3"
    audit_logging: "Complete with tamper protection"
    vulnerability_scanning: "Weekly with zero high/critical"

  data_governance:
    data_classification: "Confidential"
    retention_period: "7 years for compliance data"
    backup_frequency: "Hourly incremental, daily full"
    disaster_recovery: "RPO 1 hour, RTO 4 hours"
    gdpr_compliant: true

  regulatory_reporting:
    - report: "EPA GHG Inventory"
      frequency: "Annual"
      format: "e-GGRT XML"
    - report: "EU ETS Emissions"
      frequency: "Annual"
      format: "EU Registry format"
    - report: "ISO 50001 EnPIs"
      frequency: "Monthly"
      format: "ISO 50006 compliant"

# ============================================================================
# SECTION 12: METADATA
# ============================================================================

metadata:
  specification_version: "2.0.0"
  created_date: "2025-11-15"
  last_modified: "2025-11-15"
  authors:
    - "GreenLang Product Management"
    - "Industrial Process Heat Domain Experts"

  review_status: "APPROVED"
  reviewed_by:
    - "Head of Product"
    - "Chief Architect"
    - "Domain Expert - Process Heat"

  change_log:
    - version: "1.0.0"
      date: "2025-11-15"
      changes: "Initial specification for GL-001 ProcessHeatOrchestrator"
      author: "Product Management Team"

  tags:
    - "orchestration"
    - "process-heat"
    - "industrial"
    - "energy-optimization"
    - "decarbonization"
    - "safety-critical"

  related_documents:
    - "GL_agent_requirement.md"
    - "Process_Heat_Domain_Architecture.md"
    - "Agent_Coordination_Patterns.md"
    - "Zero_Hallucination_Design.md"

  support:
    team: "Industrial Process Heat"
    email: "process-heat@greenlang.ai"
    slack: "#gl-process-heat"
    documentation: "https://docs.greenlang.ai/agents/GL-001"

# ============================================================================
# END OF SPECIFICATION - GL-001 ProcessHeatOrchestrator
# ============================================================================